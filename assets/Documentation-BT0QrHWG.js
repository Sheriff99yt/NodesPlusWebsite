import{r as gs,a as mi,g as ys,R as D,b as v,j as m,u as an,c as xs,d as ws,e as vs}from"./index-C3EMY2Oo.js";import{a as bs,b as Ss,c as Xn,d as Es,e as Ns,f as _s,g as Cs,h as As,N as Ds,i as Ts,j as Ms,k as Rs,l as ks,m as xr,n as Is,F as $s}from"./Footer-Cwss1DQk.js";gs();function se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=se(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yn={exports:{}},xn={},wn={exports:{}},vn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wr;function zs(){if(wr)return vn;wr=1;var e=mi();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,o=e.useLayoutEffect,s=e.useDebugValue;function a(d,f){var h=f(),g=r({inst:{value:h,getSnapshot:f}}),y=g[0].inst,w=g[1];return o(function(){y.value=h,y.getSnapshot=f,c(y)&&w({inst:y})},[d,h,f]),i(function(){return c(y)&&w({inst:y}),d(function(){c(y)&&w({inst:y})})},[d]),s(h),h}function c(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function u(d,f){return f()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return vn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,vn}var vr;function Vs(){return vr||(vr=1,wn.exports=zs()),wn.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var br;function js(){if(br)return xn;br=1;var e=mi(),t=Vs();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,o=e.useRef,s=e.useEffect,a=e.useMemo,c=e.useDebugValue;return xn.useSyncExternalStoreWithSelector=function(u,l,d,f,h){var g=o(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=a(function(){function x(R){if(!E){if(E=!0,A=R,R=f(R),h!==void 0&&y.hasValue){var z=y.value;if(h(z,R))return b=z}return b=R}if(z=b,r(A,R))return z;var H=f(R);return h!==void 0&&h(z,H)?(A=R,z):(A=R,b=H)}var E=!1,A,b,T=d===void 0?null:d;return[function(){return x(l())},T===null?void 0:function(){return x(T())}]},[l,d,f,h]);var w=i(u,g[0],g[1]);return s(function(){y.hasValue=!0,y.value=w},[w]),c(w),w},xn}var Sr;function Fs(){return Sr||(Sr=1,yn.exports=js()),yn.exports}var Hs=Fs();const Ps=ys(Hs),Bs={},Er=e=>{let t;const n=new Set,r=(l,d)=>{const f=typeof l=="function"?l(t):l;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Bs?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,c);return c},Ls=e=>e?Er(e):Er,{useDebugValue:qs}=D,{useSyncExternalStoreWithSelector:Us}=Ps,Os=e=>e;function gi(e,t=Os,n){const r=Us(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qs(r),r}const Nr=(e,t)=>{const n=Ls(e),r=(i,o=t)=>gi(n,i,o);return Object.assign(r,n),r},Ks=(e,t)=>e?Nr(e,t):Nr;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Ys={value:()=>{}};function cn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Yt(n)}function Yt(e){this._=e}function Xs(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Yt.prototype=cn.prototype={constructor:Yt,on:function(e,t){var n=this._,r=Xs(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Ws(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=_r(n[i],e.name,t);else if(t==null)for(i in n)n[i]=_r(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Ws(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function _r(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ys,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kn="http://www.w3.org/1999/xhtml";const Cr={svg:"http://www.w3.org/2000/svg",xhtml:kn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ln(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Cr.hasOwnProperty(t)?{space:Cr[t],local:e}:e}function Gs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kn&&t.documentElement.namespaceURI===kn?t.createElement(e):t.createElementNS(n,e)}}function Zs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yi(e){var t=ln(e);return(t.local?Zs:Gs)(t)}function Qs(){}function Wn(e){return e==null?Qs:function(){return this.querySelector(e)}}function Js(e){typeof e!="function"&&(e=Wn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),c,u,l=0;l<s;++l)(c=o[l])&&(u=e.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new le(r,this._parents)}function ea(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ta(){return[]}function xi(e){return e==null?ta:function(){return this.querySelectorAll(e)}}function na(e){return function(){return ea(e.apply(this,arguments))}}function ra(e){typeof e=="function"?e=na(e):e=xi(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),i.push(c));return new le(r,i)}function wi(e){return function(){return this.matches(e)}}function vi(e){return function(t){return t.matches(e)}}var ia=Array.prototype.find;function oa(e){return function(){return ia.call(this.children,e)}}function sa(){return this.firstElementChild}function aa(e){return this.select(e==null?sa:oa(typeof e=="function"?e:vi(e)))}var ca=Array.prototype.filter;function la(){return Array.from(this.children)}function ua(e){return function(){return ca.call(this.children,e)}}function da(e){return this.selectAll(e==null?la:ua(typeof e=="function"?e:vi(e)))}function fa(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new le(r,this._parents)}function bi(e){return new Array(e.length)}function ha(){return new le(this._enter||this._groups.map(bi),this._parents)}function Zt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zt.prototype={constructor:Zt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pa(e){return function(){return e}}function ma(e,t,n,r,i,o){for(var s=0,a,c=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Zt(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function ga(e,t,n,r,i,o,s){var a,c,u=new Map,l=t.length,d=o.length,f=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(f[a]=h=s.call(c,c.__data__,a,t)+"",u.has(h)?i[a]=c:u.set(h,c));for(a=0;a<d;++a)h=s.call(e,o[a],a,o)+"",(c=u.get(h))?(r[a]=c,c.__data__=o[a],u.delete(h)):n[a]=new Zt(e,o[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(f[a])===c&&(i[a]=c)}function ya(e){return e.__data__}function xa(e,t){if(!arguments.length)return Array.from(this,ya);var n=t?ga:ma,r=this._parents,i=this._groups;typeof e!="function"&&(e=pa(e));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],d=i[u],f=d.length,h=wa(e.call(l,l&&l.__data__,u,r)),g=h.length,y=a[u]=new Array(g),w=s[u]=new Array(g),x=c[u]=new Array(f);n(l,d,y,w,x,h,t);for(var E=0,A=0,b,T;E<g;++E)if(b=y[E]){for(E>=A&&(A=E+1);!(T=w[A])&&++A<g;);b._next=T||null}}return s=new le(s,r),s._enter=a,s._exit=c,s}function wa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function va(){return new le(this._exit||this._groups.map(bi),this._parents)}function ba(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Sa(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var u=n[c],l=r[c],d=u.length,f=a[c]=new Array(d),h,g=0;g<d;++g)(h=u[g]||l[g])&&(f[g]=h);for(;c<i;++c)a[c]=n[c];return new le(a,this._parents)}function Ea(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Na(e){e||(e=_a);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new le(i,this._parents).order()}function _a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ca(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Aa(){return Array.from(this)}function Da(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Ta(){let e=0;for(const t of this)++e;return e}function Ma(){return!this.node()}function Ra(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function ka(e){return function(){this.removeAttribute(e)}}function Ia(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $a(e,t){return function(){this.setAttribute(e,t)}}function za(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Va(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ja(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fa(e,t){var n=ln(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ia:ka:typeof t=="function"?n.local?ja:Va:n.local?za:$a)(n,t))}function Si(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ha(e){return function(){this.style.removeProperty(e)}}function Pa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ba(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function La(e,t,n){return arguments.length>1?this.each((t==null?Ha:typeof t=="function"?Ba:Pa)(e,t,n??"")):ft(this.node(),e)}function ft(e,t){return e.style.getPropertyValue(t)||Si(e).getComputedStyle(e,null).getPropertyValue(t)}function qa(e){return function(){delete this[e]}}function Ua(e,t){return function(){this[e]=t}}function Oa(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ka(e,t){return arguments.length>1?this.each((t==null?qa:typeof t=="function"?Oa:Ua)(e,t)):this.node()[e]}function Ei(e){return e.trim().split(/^|\s+/)}function Gn(e){return e.classList||new Ni(e)}function Ni(e){this._node=e,this._names=Ei(e.getAttribute("class")||"")}Ni.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _i(e,t){for(var n=Gn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ci(e,t){for(var n=Gn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ya(e){return function(){_i(this,e)}}function Xa(e){return function(){Ci(this,e)}}function Wa(e,t){return function(){(t.apply(this,arguments)?_i:Ci)(this,e)}}function Ga(e,t){var n=Ei(e+"");if(arguments.length<2){for(var r=Gn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wa:t?Ya:Xa)(n,t))}function Za(){this.textContent=""}function Qa(e){return function(){this.textContent=e}}function Ja(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ec(e){return arguments.length?this.each(e==null?Za:(typeof e=="function"?Ja:Qa)(e)):this.node().textContent}function tc(){this.innerHTML=""}function nc(e){return function(){this.innerHTML=e}}function rc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ic(e){return arguments.length?this.each(e==null?tc:(typeof e=="function"?rc:nc)(e)):this.node().innerHTML}function oc(){this.nextSibling&&this.parentNode.appendChild(this)}function sc(){return this.each(oc)}function ac(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cc(){return this.each(ac)}function lc(e){var t=typeof e=="function"?e:yi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uc(){return null}function dc(e,t){var n=typeof e=="function"?e:yi(e),r=t==null?uc:typeof t=="function"?t:Wn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function fc(){var e=this.parentNode;e&&e.removeChild(this)}function hc(){return this.each(fc)}function pc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gc(e){return this.select(e?mc:pc)}function yc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xc(e){return function(t){e.call(this,t,this.__data__)}}function wc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function vc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function bc(e,t,n){return function(){var r=this.__on,i,o=xc(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Sc(e,t,n){var r=wc(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(i=0,l=a[c];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?bc:vc,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ai(e,t,n){var r=Si(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ec(e,t){return function(){return Ai(this,e,t)}}function Nc(e,t){return function(){return Ai(this,e,t.apply(this,arguments))}}function _c(e,t){return this.each((typeof t=="function"?Nc:Ec)(e,t))}function*Cc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Di=[null];function le(e,t){this._groups=e,this._parents=t}function $t(){return new le([[document.documentElement]],Di)}function Ac(){return this}le.prototype=$t.prototype={constructor:le,select:Js,selectAll:ra,selectChild:aa,selectChildren:da,filter:fa,data:xa,enter:ha,exit:va,join:ba,merge:Sa,selection:Ac,order:Ea,sort:Na,call:Ca,nodes:Aa,node:Da,size:Ta,empty:Ma,each:Ra,attr:Fa,style:La,property:Ka,classed:Ga,text:ec,html:ic,raise:sc,lower:cc,append:lc,insert:dc,remove:hc,clone:gc,datum:yc,on:Sc,dispatch:_c,[Symbol.iterator]:Cc};function ge(e){return typeof e=="string"?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],Di)}function Dc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Se(e,t){if(e=Dc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Tc={passive:!1},At={capture:!0,passive:!1};function bn(e){e.stopImmediatePropagation()}function ct(e){e.preventDefault(),e.stopImmediatePropagation()}function Ti(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",ct,At);"onselectstart"in t?n.on("selectstart.drag",ct,At):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Mi(e,t){var n=e.document.documentElement,r=ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",ct,At),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jt=e=>()=>e;function In(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}In.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Mc(e){return!e.ctrlKey&&!e.button}function Rc(){return this.parentNode}function kc(e,t){return t??{x:e.x,y:e.y}}function Ic(){return navigator.maxTouchPoints||"ontouchstart"in this}function $c(){var e=Mc,t=Rc,n=kc,r=Ic,i={},o=cn("start","drag","end"),s=0,a,c,u,l,d=0;function f(b){b.on("mousedown.drag",h).filter(r).on("touchstart.drag",w).on("touchmove.drag",x,Tc).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,T){if(!(l||!e.call(this,b,T))){var R=A(this,t.call(this,b,T),b,T,"mouse");R&&(ge(b.view).on("mousemove.drag",g,At).on("mouseup.drag",y,At),Ti(b.view),bn(b),u=!1,a=b.clientX,c=b.clientY,R("start",b))}}function g(b){if(ct(b),!u){var T=b.clientX-a,R=b.clientY-c;u=T*T+R*R>d}i.mouse("drag",b)}function y(b){ge(b.view).on("mousemove.drag mouseup.drag",null),Mi(b.view,u),ct(b),i.mouse("end",b)}function w(b,T){if(e.call(this,b,T)){var R=b.changedTouches,z=t.call(this,b,T),H=R.length,k,C;for(k=0;k<H;++k)(C=A(this,z,b,T,R[k].identifier,R[k]))&&(bn(b),C("start",b,R[k]))}}function x(b){var T=b.changedTouches,R=T.length,z,H;for(z=0;z<R;++z)(H=i[T[z].identifier])&&(ct(b),H("drag",b,T[z]))}function E(b){var T=b.changedTouches,R=T.length,z,H;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),z=0;z<R;++z)(H=i[T[z].identifier])&&(bn(b),H("end",b,T[z]))}function A(b,T,R,z,H,k){var C=o.copy(),$=Se(k||R,T),B,P,p;if((p=n.call(b,new In("beforestart",{sourceEvent:R,target:f,identifier:H,active:s,x:$[0],y:$[1],dx:0,dy:0,dispatch:C}),z))!=null)return B=p.x-$[0]||0,P=p.y-$[1]||0,function _(N,I,V){var S=$,M;switch(N){case"start":i[H]=_,M=s++;break;case"end":delete i[H],--s;case"drag":$=Se(V||I,T),M=s;break}C.call(N,b,new In(N,{sourceEvent:I,subject:p,target:f,identifier:H,active:M,x:$[0]+B,y:$[1]+P,dx:$[0]-S[0],dy:$[1]-S[1],dispatch:C}),z)}}return f.filter=function(b){return arguments.length?(e=typeof b=="function"?b:jt(!!b),f):e},f.container=function(b){return arguments.length?(t=typeof b=="function"?b:jt(b),f):t},f.subject=function(b){return arguments.length?(n=typeof b=="function"?b:jt(b),f):n},f.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:jt(!!b),f):r},f.on=function(){var b=o.on.apply(o,arguments);return b===o?f:b},f.clickDistance=function(b){return arguments.length?(d=(b=+b)*b,f):Math.sqrt(d)},f}function Zn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ri(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zt(){}var Dt=.7,Qt=1/Dt,lt="\\s*([+-]?\\d+)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zc=/^#([0-9a-f]{3,8})$/,Vc=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),jc=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Fc=new RegExp(`^rgba\\(${lt},${lt},${lt},${Tt}\\)$`),Hc=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${Tt}\\)$`),Pc=new RegExp(`^hsl\\(${Tt},${Ee},${Ee}\\)$`),Bc=new RegExp(`^hsla\\(${Tt},${Ee},${Ee},${Tt}\\)$`),Ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(zt,Mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dr,formatHex:Dr,formatHex8:Lc,formatHsl:qc,formatRgb:Tr,toString:Tr});function Dr(){return this.rgb().formatHex()}function Lc(){return this.rgb().formatHex8()}function qc(){return ki(this).formatHsl()}function Tr(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mr(t):n===3?new ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ft(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ft(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vc.exec(e))?new ae(t[1],t[2],t[3],1):(t=jc.exec(e))?new ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fc.exec(e))?Ft(t[1],t[2],t[3],t[4]):(t=Hc.exec(e))?Ft(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pc.exec(e))?Ir(t[1],t[2]/100,t[3]/100,1):(t=Bc.exec(e))?Ir(t[1],t[2]/100,t[3]/100,t[4]):Ar.hasOwnProperty(e)?Mr(Ar[e]):e==="transparent"?new ae(NaN,NaN,NaN,0):null}function Mr(e){return new ae(e>>16&255,e>>8&255,e&255,1)}function Ft(e,t,n,r){return r<=0&&(e=t=n=NaN),new ae(e,t,n,r)}function Uc(e){return e instanceof zt||(e=Mt(e)),e?(e=e.rgb(),new ae(e.r,e.g,e.b,e.opacity)):new ae}function $n(e,t,n,r){return arguments.length===1?Uc(e):new ae(e,t,n,r??1)}function ae(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Zn(ae,$n,Ri(zt,{brighter(e){return e=e==null?Qt:Math.pow(Qt,e),new ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dt:Math.pow(Dt,e),new ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ae(Xe(this.r),Xe(this.g),Xe(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rr,formatHex:Rr,formatHex8:Oc,formatRgb:kr,toString:kr}));function Rr(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}`}function Oc(){return`#${Oe(this.r)}${Oe(this.g)}${Oe(this.b)}${Oe((isNaN(this.opacity)?1:this.opacity)*255)}`}function kr(){const e=Jt(this.opacity);return`${e===1?"rgb(":"rgba("}${Xe(this.r)}, ${Xe(this.g)}, ${Xe(this.b)}${e===1?")":`, ${e})`}`}function Jt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oe(e){return e=Xe(e),(e<16?"0":"")+e.toString(16)}function Ir(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ye(e,t,n,r)}function ki(e){if(e instanceof ye)return new ye(e.h,e.s,e.l,e.opacity);if(e instanceof zt||(e=Mt(e)),!e)return new ye;if(e instanceof ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new ye(s,a,c,e.opacity)}function Kc(e,t,n,r){return arguments.length===1?ki(e):new ye(e,t,n,r??1)}function ye(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Zn(ye,Kc,Ri(zt,{brighter(e){return e=e==null?Qt:Math.pow(Qt,e),new ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dt:Math.pow(Dt,e),new ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ae(Sn(e>=240?e-240:e+120,i,r),Sn(e,i,r),Sn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ye($r(this.h),Ht(this.s),Ht(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jt(this.opacity);return`${e===1?"hsl(":"hsla("}${$r(this.h)}, ${Ht(this.s)*100}%, ${Ht(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $r(e){return e=(e||0)%360,e<0?e+360:e}function Ht(e){return Math.max(0,Math.min(1,e||0))}function Sn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ii=e=>()=>e;function Yc(e,t){return function(n){return e+n*t}}function Xc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Wc(e){return(e=+e)==1?$i:function(t,n){return n-t?Xc(t,n,e):Ii(isNaN(t)?n:t)}}function $i(e,t){var n=t-e;return n?Yc(e,n):Ii(isNaN(e)?t:e)}const zr=function e(t){var n=Wc(t);function r(i,o){var s=n((i=$n(i)).r,(o=$n(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),u=$i(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=e,r}(1);function ke(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,En=new RegExp(zn.source,"g");function Gc(e){return function(){return e}}function Zc(e){return function(t){return e(t)+""}}function Qc(e,t){var n=zn.lastIndex=En.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=zn.exec(e))&&(i=En.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:ke(r,i)})),n=En.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Zc(c[0].x):Gc(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var Vr=180/Math.PI,Vn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zi(e,t,n,r,i,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Vr,skewX:Math.atan(c)*Vr,scaleX:s,scaleY:a}}var Pt;function Jc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Vn:zi(t.a,t.b,t.c,t.d,t.e,t.f)}function el(e){return e==null||(Pt||(Pt=document.createElementNS("http://www.w3.org/2000/svg","g")),Pt.setAttribute("transform",e),!(e=Pt.transform.baseVal.consolidate()))?Vn:(e=e.matrix,zi(e.a,e.b,e.c,e.d,e.e,e.f))}function Vi(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,d,f,h,g){if(u!==d||l!==f){var y=h.push("translate(",null,t,null,n);g.push({i:y-4,x:ke(u,d)},{i:y-2,x:ke(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,l,d,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:ke(u,l)})):l&&d.push(i(d)+"rotate("+l+r)}function a(u,l,d,f){u!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:ke(u,l)}):l&&d.push(i(d)+"skewX("+l+r)}function c(u,l,d,f,h,g){if(u!==d||l!==f){var y=h.push(i(h)+"scale(",null,",",null,")");g.push({i:y-4,x:ke(u,d)},{i:y-2,x:ke(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,l){var d=[],f=[];return u=e(u),l=e(l),o(u.translateX,u.translateY,l.translateX,l.translateY,d,f),s(u.rotate,l.rotate,d,f),a(u.skewX,l.skewX,d,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,f),u=l=null,function(h){for(var g=-1,y=f.length,w;++g<y;)d[(w=f[g]).i]=w.x(h);return d.join("")}}}var tl=Vi(Jc,"px, ","px)","deg)"),nl=Vi(el,", ",")",")"),rl=1e-12;function jr(e){return((e=Math.exp(e))+1/e)/2}function il(e){return((e=Math.exp(e))-1/e)/2}function ol(e){return((e=Math.exp(2*e))-1)/(e+1)}const sl=function e(t,n,r){function i(o,s){var a=o[0],c=o[1],u=o[2],l=s[0],d=s[1],f=s[2],h=l-a,g=d-c,y=h*h+g*g,w,x;if(y<rl)x=Math.log(f/u)/t,w=function(z){return[a+z*h,c+z*g,u*Math.exp(t*z*x)]};else{var E=Math.sqrt(y),A=(f*f-u*u+r*y)/(2*u*n*E),b=(f*f-u*u-r*y)/(2*f*n*E),T=Math.log(Math.sqrt(A*A+1)-A),R=Math.log(Math.sqrt(b*b+1)-b);x=(R-T)/t,w=function(z){var H=z*x,k=jr(T),C=u/(n*E)*(k*ol(t*H+T)-il(T));return[a+C*h,c+C*g,u*k/jr(t*H+T)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},i}(Math.SQRT2,2,4);var ht=0,Nt=0,wt=0,ji=1e3,en,_t,tn=0,Ge=0,un=0,Rt=typeof performance=="object"&&performance.now?performance:Date,Fi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qn(){return Ge||(Fi(al),Ge=Rt.now()+un)}function al(){Ge=0}function nn(){this._call=this._time=this._next=null}nn.prototype=Hi.prototype={constructor:nn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qn():+n)+(t==null?0:+t),!this._next&&_t!==this&&(_t?_t._next=this:en=this,_t=this),this._call=e,this._time=n,jn()},stop:function(){this._call&&(this._call=null,this._time=1/0,jn())}};function Hi(e,t,n){var r=new nn;return r.restart(e,t,n),r}function cl(){Qn(),++ht;for(var e=en,t;e;)(t=Ge-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ht}function Fr(){Ge=(tn=Rt.now())+un,ht=Nt=0;try{cl()}finally{ht=0,ul(),Ge=0}}function ll(){var e=Rt.now(),t=e-tn;t>ji&&(un-=t,tn=e)}function ul(){for(var e,t=en,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:en=n);_t=e,jn(r)}function jn(e){if(!ht){Nt&&(Nt=clearTimeout(Nt));var t=e-Ge;t>24?(e<1/0&&(Nt=setTimeout(Fr,e-Rt.now()-un)),wt&&(wt=clearInterval(wt))):(wt||(tn=Rt.now(),wt=setInterval(ll,ji)),ht=1,Fi(Fr))}}function Hr(e,t,n){var r=new nn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var dl=cn("start","end","cancel","interrupt"),fl=[],Pi=0,Pr=1,Fn=2,Xt=3,Br=4,Hn=5,Wt=6;function dn(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;hl(e,n,{name:t,index:r,group:i,on:dl,tween:fl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Pi})}function Jn(e,t){var n=we(e,t);if(n.state>Pi)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=we(e,t);if(n.state>Xt)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Hi(o,0,n.time);function o(u){n.state=Pr,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,d,f,h;if(n.state!==Pr)return c();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Xt)return Hr(s);h.state===Br?(h.state=Wt,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=Wt,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(Hr(function(){n.state===Xt&&(n.state=Br,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Fn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fn){for(n.state=Xt,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Hn,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Hn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Wt,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Gt(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>Fn&&r.state<Hn,r.state=Wt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function pl(e){return this.each(function(){Gt(this,e)})}function ml(e,t){var n,r;return function(){var i=Ne(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function gl(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ne(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=a;break}c===u&&i.push(a)}o.tween=i}}function yl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=we(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?ml:gl)(n,e,t))}function er(e,t,n){var r=e._id;return e.each(function(){var i=Ne(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return we(i,r).value[t]}}function Bi(e,t){var n;return(typeof t=="number"?ke:t instanceof Mt?zr:(n=Mt(t))?(t=n,zr):Qc)(e,t)}function xl(e){return function(){this.removeAttribute(e)}}function wl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function bl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Sl(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function El(e,t,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a)))}}function Nl(e,t){var n=ln(e),r=n==="transform"?nl:Bi;return this.attrTween(e,typeof t=="function"?(n.local?El:Sl)(n,r,er(this,"attr."+e,t)):t==null?(n.local?wl:xl)(n):(n.local?bl:vl)(n,r,t))}function _l(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cl(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Al(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Cl(e,o)),n}return i._value=t,i}function Dl(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&_l(e,o)),n}return i._value=t,i}function Tl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ln(e);return this.tween(n,(r.local?Al:Dl)(r,t))}function Ml(e,t){return function(){Jn(this,e).delay=+t.apply(this,arguments)}}function Rl(e,t){return t=+t,function(){Jn(this,e).delay=t}}function kl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ml:Rl)(t,e)):we(this.node(),t).delay}function Il(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function $l(e,t){return t=+t,function(){Ne(this,e).duration=t}}function zl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Il:$l)(t,e)):we(this.node(),t).duration}function Vl(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function jl(e){var t=this._id;return arguments.length?this.each(Vl(t,e)):we(this.node(),t).ease}function Fl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function Hl(e){if(typeof e!="function")throw new Error;return this.each(Fl(this._id,e))}function Pl(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],c,u=0;u<s;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new Te(r,this._parents,this._name,this._id)}function Bl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=t[a],u=n[a],l=c.length,d=s[a]=new Array(l),f,h=0;h<l;++h)(f=c[h]||u[h])&&(d[h]=f);for(;a<r;++a)s[a]=t[a];return new Te(s,this._parents,this._name,this._id)}function Ll(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ql(e,t,n){var r,i,o=Ll(t)?Jn:Ne;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function Ul(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(ql(n,e,t))}function Ol(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Kl(){return this.on("end.remove",Ol(this._id))}function Yl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wn(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,u=o[s]=new Array(c),l,d,f=0;f<c;++f)(l=a[f])&&(d=e.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),u[f]=d,dn(u[f],t,n,f,u,we(l,n)));return new Te(o,this._parents,t,n)}function Xl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xi(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var f=e.call(l,l.__data__,d,c),h,g=we(l,n),y=0,w=f.length;y<w;++y)(h=f[y])&&dn(h,t,n,y,f,g);o.push(f),s.push(l)}return new Te(o,s,t,n)}var Wl=$t.prototype.constructor;function Gl(){return new Wl(this._groups,this._parents)}function Zl(e,t){var n,r,i;return function(){var o=ft(this,e),s=(this.style.removeProperty(e),ft(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Li(e){return function(){this.style.removeProperty(e)}}function Ql(e,t,n){var r,i=n+"",o;return function(){var s=ft(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Jl(e,t,n){var r,i,o;return function(){var s=ft(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),ft(this,e))),s===c?null:s===r&&c===i?o:(i=c,o=t(r=s,a))}}function eu(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var c=Ne(this,e),u=c.on,l=c.value[o]==null?a||(a=Li(t)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(s,i=l),c.on=r}}function tu(e,t,n){var r=(e+="")=="transform"?tl:Bi;return t==null?this.styleTween(e,Zl(e,r)).on("end.style."+e,Li(e)):typeof t=="function"?this.styleTween(e,Jl(e,r,er(this,"style."+e,t))).each(eu(this._id,e)):this.styleTween(e,Ql(e,r,t),n).on("end.style."+e,null)}function nu(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ru(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&nu(e,s,n)),r}return o._value=t,o}function iu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ru(e,t,n??""))}function ou(e){return function(){this.textContent=e}}function su(e){return function(){var t=e(this);this.textContent=t??""}}function au(e){return this.tween("text",typeof e=="function"?su(er(this,"text",e)):ou(e==null?"":e+""))}function cu(e){return function(t){this.textContent=e.call(this,t)}}function lu(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&cu(i)),t}return r._value=e,r}function uu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,lu(e))}function du(){for(var e=this._name,t=this._id,n=qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=we(c,t);dn(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Te(r,this._parents,e,n)}function fu(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var u=Ne(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),i===0&&o()})}var hu=0;function Te(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qi(){return++hu}var Ae=$t.prototype;Te.prototype={constructor:Te,select:Yl,selectAll:Xl,selectChild:Ae.selectChild,selectChildren:Ae.selectChildren,filter:Pl,merge:Bl,selection:Gl,transition:du,call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:Ul,attr:Nl,attrTween:Tl,style:tu,styleTween:iu,text:au,textTween:uu,remove:Kl,tween:yl,delay:kl,duration:zl,ease:jl,easeVarying:Hl,end:fu,[Symbol.iterator]:Ae[Symbol.iterator]};function pu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mu={time:null,delay:0,duration:250,ease:pu};function gu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function yu(e){var t,n;e instanceof Te?(t=e._id,e=e._name):(t=qi(),(n=mu).time=Qn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,u=0;u<a;++u)(c=s[u])&&dn(c,e,t,u,s,n||gu(c,t));return new Te(r,this._parents,e,t)}$t.prototype.interrupt=pl;$t.prototype.transition=yu;const Bt=e=>()=>e;function xu(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function De(e,t,n){this.k=e,this.x=t,this.y=n}De.prototype={constructor:De,scale:function(e){return e===1?this:new De(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new De(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ze=new De(1,0,0);De.prototype;function Nn(e){e.stopImmediatePropagation()}function vt(e){e.preventDefault(),e.stopImmediatePropagation()}function wu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Lr(){return this.__zoom||ze}function bu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Su(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Nu(){var e=wu,t=vu,n=Eu,r=bu,i=Su,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=sl,u=cn("start","zoom","end"),l,d,f,h=500,g=150,y=0,w=10;function x(p){p.property("__zoom",Lr).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",C).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,_,N,I){var V=p.selection?p.selection():p;V.property("__zoom",Lr),p!==V?T(p,_,N,I):V.interrupt().each(function(){R(this,arguments).event(I).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},x.scaleBy=function(p,_,N,I){x.scaleTo(p,function(){var V=this.__zoom.k,S=typeof _=="function"?_.apply(this,arguments):_;return V*S},N,I)},x.scaleTo=function(p,_,N,I){x.transform(p,function(){var V=t.apply(this,arguments),S=this.__zoom,M=N==null?b(V):typeof N=="function"?N.apply(this,arguments):N,j=S.invert(M),F=typeof _=="function"?_.apply(this,arguments):_;return n(A(E(S,F),M,j),V,s)},N,I)},x.translateBy=function(p,_,N,I){x.transform(p,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),s)},null,I)},x.translateTo=function(p,_,N,I,V){x.transform(p,function(){var S=t.apply(this,arguments),M=this.__zoom,j=I==null?b(S):typeof I=="function"?I.apply(this,arguments):I;return n(ze.translate(j[0],j[1]).scale(M.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof N=="function"?-N.apply(this,arguments):-N),S,s)},I,V)};function E(p,_){return _=Math.max(o[0],Math.min(o[1],_)),_===p.k?p:new De(_,p.x,p.y)}function A(p,_,N){var I=_[0]-N[0]*p.k,V=_[1]-N[1]*p.k;return I===p.x&&V===p.y?p:new De(p.k,I,V)}function b(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function T(p,_,N,I){p.on("start.zoom",function(){R(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(I).end()}).tween("zoom",function(){var V=this,S=arguments,M=R(V,S).event(I),j=t.apply(V,S),F=N==null?b(j):typeof N=="function"?N.apply(V,S):N,q=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),L=V.__zoom,K=typeof _=="function"?_.apply(V,S):_,X=c(L.invert(F).concat(q/L.k),K.invert(F).concat(q/K.k));return function(W){if(W===1)W=K;else{var G=X(W),ee=q/G[2];W=new De(ee,F[0]-G[0]*ee,F[1]-G[1]*ee)}M.zoom(null,W)}})}function R(p,_,N){return!N&&p.__zooming||new z(p,_)}function z(p,_){this.that=p,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,_),this.taps=0}z.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,_){return this.mouse&&p!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var _=ge(this.that).datum();u.call(p,this.that,new xu(p,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),_)}};function H(p,..._){if(!e.apply(this,arguments))return;var N=R(this,_).event(p),I=this.__zoom,V=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,r.apply(this,arguments)))),S=Se(p);if(N.wheel)(N.mouse[0][0]!==S[0]||N.mouse[0][1]!==S[1])&&(N.mouse[1]=I.invert(N.mouse[0]=S)),clearTimeout(N.wheel);else{if(I.k===V)return;N.mouse=[S,I.invert(S)],Gt(this),N.start()}vt(p),N.wheel=setTimeout(M,g),N.zoom("mouse",n(A(E(I,V),N.mouse[0],N.mouse[1]),N.extent,s));function M(){N.wheel=null,N.end()}}function k(p,..._){if(f||!e.apply(this,arguments))return;var N=p.currentTarget,I=R(this,_,!0).event(p),V=ge(p.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",q,!0),S=Se(p,N),M=p.clientX,j=p.clientY;Ti(p.view),Nn(p),I.mouse=[S,this.__zoom.invert(S)],Gt(this),I.start();function F(L){if(vt(L),!I.moved){var K=L.clientX-M,X=L.clientY-j;I.moved=K*K+X*X>y}I.event(L).zoom("mouse",n(A(I.that.__zoom,I.mouse[0]=Se(L,N),I.mouse[1]),I.extent,s))}function q(L){V.on("mousemove.zoom mouseup.zoom",null),Mi(L.view,I.moved),vt(L),I.event(L).end()}}function C(p,..._){if(e.apply(this,arguments)){var N=this.__zoom,I=Se(p.changedTouches?p.changedTouches[0]:p,this),V=N.invert(I),S=N.k*(p.shiftKey?.5:2),M=n(A(E(N,S),I,V),t.apply(this,_),s);vt(p),a>0?ge(this).transition().duration(a).call(T,M,I,p):ge(this).call(x.transform,M,I,p)}}function $(p,..._){if(e.apply(this,arguments)){var N=p.touches,I=N.length,V=R(this,_,p.changedTouches.length===I).event(p),S,M,j,F;for(Nn(p),M=0;M<I;++M)j=N[M],F=Se(j,this),F=[F,this.__zoom.invert(F),j.identifier],V.touch0?!V.touch1&&V.touch0[2]!==F[2]&&(V.touch1=F,V.taps=0):(V.touch0=F,S=!0,V.taps=1+!!l);l&&(l=clearTimeout(l)),S&&(V.taps<2&&(d=F[0],l=setTimeout(function(){l=null},h)),Gt(this),V.start())}}function B(p,..._){if(this.__zooming){var N=R(this,_).event(p),I=p.changedTouches,V=I.length,S,M,j,F;for(vt(p),S=0;S<V;++S)M=I[S],j=Se(M,this),N.touch0&&N.touch0[2]===M.identifier?N.touch0[0]=j:N.touch1&&N.touch1[2]===M.identifier&&(N.touch1[0]=j);if(M=N.that.__zoom,N.touch1){var q=N.touch0[0],L=N.touch0[1],K=N.touch1[0],X=N.touch1[1],W=(W=K[0]-q[0])*W+(W=K[1]-q[1])*W,G=(G=X[0]-L[0])*G+(G=X[1]-L[1])*G;M=E(M,Math.sqrt(W/G)),j=[(q[0]+K[0])/2,(q[1]+K[1])/2],F=[(L[0]+X[0])/2,(L[1]+X[1])/2]}else if(N.touch0)j=N.touch0[0],F=N.touch0[1];else return;N.zoom("touch",n(A(M,j,F),N.extent,s))}}function P(p,..._){if(this.__zooming){var N=R(this,_).event(p),I=p.changedTouches,V=I.length,S,M;for(Nn(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),S=0;S<V;++S)M=I[S],N.touch0&&N.touch0[2]===M.identifier?delete N.touch0:N.touch1&&N.touch1[2]===M.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(M=Se(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<w)){var j=ge(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Bt(+p),x):r},x.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Bt(!!p),x):e},x.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Bt(!!p),x):i},x.extent=function(p){return arguments.length?(t=typeof p=="function"?p:Bt([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):t},x.scaleExtent=function(p){return arguments.length?(o[0]=+p[0],o[1]=+p[1],x):[o[0],o[1]]},x.translateExtent=function(p){return arguments.length?(s[0][0]=+p[0][0],s[1][0]=+p[1][0],s[0][1]=+p[0][1],s[1][1]=+p[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(p){return arguments.length?(n=p,x):n},x.duration=function(p){return arguments.length?(a=+p,x):a},x.interpolate=function(p){return arguments.length?(c=p,x):c},x.on=function(){var p=u.on.apply(u,arguments);return p===u?x:p},x.clickDistance=function(p){return arguments.length?(y=(p=+p)*p,x):Math.sqrt(y)},x.tapDistance=function(p){return arguments.length?(w=+p,x):w},x}const fn=v.createContext(null),_u=fn.Provider,Me={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ui=Me.error001();function J(e,t){const n=v.useContext(fn);if(n===null)throw new Error(Ui);return gi(n,e,t)}const re=()=>{const e=v.useContext(fn);if(e===null)throw new Error(Ui);return v.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Cu=e=>e.userSelectionActive?"none":"all";function Oi({position:e,children:t,className:n,style:r,...i}){const o=J(Cu),s=`${e}`.split("-");return D.createElement("div",{className:se(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i},t)}function Au({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:D.createElement(Oi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},D.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Du=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=v.useRef(null),[f,h]=v.useState({x:0,y:0,width:0,height:0}),g=se(["react-flow__edge-textwrapper",u]);return v.useEffect(()=>{if(d.current){const y=d.current.getBBox();h({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:D.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...l},i&&D.createElement("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),D.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),c)};var Tu=v.memo(Du);const tr=e=>({width:e.offsetWidth,height:e.offsetHeight}),pt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),nr=(e={x:0,y:0},t)=>({x:pt(e.x,t[0][0],t[1][0]),y:pt(e.y,t[0][1],t[1][1])}),qr=(e,t,n)=>e<t?pt(Math.abs(e-t),1,50)/50:e>n?-pt(Math.abs(e-n),1,50)/50:0,Ki=(e,t)=>{const n=qr(e.x,35,t.width-35)*20,r=qr(e.y,35,t.height-35)*20;return[n,r]},Yi=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Mu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ru=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ur=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Pn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ku=e=>fe(e.width)&&fe(e.height)&&fe(e.x)&&fe(e.y),fe=e=>!isNaN(e)&&isFinite(e),te=Symbol.for("internals"),Xi=["Enter"," ","Escape"],Iu=(e,t)=>{},$u=e=>"nativeEvent"in e;function Bn(e){var i,o;const t=$u(e)?e.nativeEvent:e,n=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Wi=e=>"clientX"in e,Ve=(e,t)=>{var o,s;const n=Wi(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},rn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Vt=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h=20})=>D.createElement(D.Fragment,null,D.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&D.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&fe(n)&&fe(r)?D.createElement(Tu,{x:n,y:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Vt.displayName="BaseEdge";function bt(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function Gi({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function Zi({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const c=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}var Ze;(function(e){e.Strict="strict",e.Loose="loose"})(Ze||(Ze={}));var Ke;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ke||(Ke={}));var kt;(function(e){e.Partial="partial",e.Full="full"})(kt||(kt={}));var $e;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($e||($e={}));var on;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(on||(on={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));function Or({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===U.Left||e===U.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Qi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top}){const[s,a]=Or({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,u]=Or({pos:o,x1:r,y1:i,x2:e,y2:t}),[l,d,f,h]=Zi({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${i}`,l,d,f,h]}const ir=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:o=U.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:y})=>{const[w,x,E]=Qi({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return D.createElement(Vt,{path:w,labelX:x,labelY:E,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:y})});ir.displayName="SimpleBezierEdge";const Kr={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},zu=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Yr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Vu({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:i,offset:o}){const s=Kr[t],a=Kr[r],c={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},l=zu({source:c,sourcePosition:t,target:u}),d=l.x!==0?"x":"y",f=l[d];let h=[],g,y;const w={x:0,y:0},x={x:0,y:0},[E,A,b,T]=Gi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){g=i.x??E,y=i.y??A;const z=[{x:g,y:c.y},{x:g,y:u.y}],H=[{x:c.x,y},{x:u.x,y}];s[d]===f?h=d==="x"?z:H:h=d==="x"?H:z}else{const z=[{x:c.x,y:u.y}],H=[{x:u.x,y:c.y}];if(d==="x"?h=s.x===f?H:z:h=s.y===f?z:H,t===r){const P=Math.abs(e[d]-n[d]);if(P<=o){const p=Math.min(o-1,o-P);s[d]===f?w[d]=(c[d]>e[d]?-1:1)*p:x[d]=(u[d]>n[d]?-1:1)*p}}if(t!==r){const P=d==="x"?"y":"x",p=s[d]===a[P],_=c[P]>u[P],N=c[P]<u[P];(s[d]===1&&(!p&&_||p&&N)||s[d]!==1&&(!p&&N||p&&_))&&(h=d==="x"?z:H)}const k={x:c.x+w.x,y:c.y+w.y},C={x:u.x+x.x,y:u.y+x.y},$=Math.max(Math.abs(k.x-h[0].x),Math.abs(C.x-h[0].x)),B=Math.max(Math.abs(k.y-h[0].y),Math.abs(C.y-h[0].y));$>=B?(g=(k.x+C.x)/2,y=h[0].y):(g=h[0].x,y=(k.y+C.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...h,{x:u.x+x.x,y:u.y+x.y},n],g,y,b,T]}function ju(e,t,n,r){const i=Math.min(Yr(e,t)/2,Yr(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${s+i*c}Q ${o},${s} ${o+i*a},${s}`}function Ln({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,d,f,h,g]=Vu({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:c},offset:u});return[l.reduce((w,x,E)=>{let A="";return E>0&&E<l.length-1?A=ju(l[E-1],x,l[E+1],s):A=`${E===0?"M":"L"}${x.x} ${x.y}`,w+=A,w},""),d,f,h,g]}const hn=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=U.Bottom,targetPosition:f=U.Top,markerEnd:h,markerStart:g,pathOptions:y,interactionWidth:w})=>{const[x,E,A]=Ln({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return D.createElement(Vt,{path:x,labelX:E,labelY:A,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:g,interactionWidth:w})});hn.displayName="SmoothStepEdge";const or=v.memo(e=>{var t;return D.createElement(hn,{...e,pathOptions:v.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});or.displayName="StepEdge";function Fu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=Gi({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const sr=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[g,y,w]=Fu({sourceX:e,sourceY:t,targetX:n,targetY:r});return D.createElement(Vt,{path:g,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})});sr.displayName="StraightEdge";function Lt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Xr({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case U.Left:return[t-Lt(t-r,o),n];case U.Right:return[t+Lt(r-t,o),n];case U.Top:return[t,n-Lt(n-i,o)];case U.Bottom:return[t,n+Lt(i-n,o)]}}function Ji({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top,curvature:s=.25}){const[a,c]=Xr({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,l]=Xr({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[d,f,h,g]=Zi({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${i}`,d,f,h,g]}const sn=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:o=U.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,pathOptions:y,interactionWidth:w})=>{const[x,E,A]=Ji({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:y==null?void 0:y.curvature});return D.createElement(Vt,{path:x,labelX:E,labelY:A,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:w})});sn.displayName="BezierEdge";const ar=v.createContext(null),Hu=ar.Provider;ar.Consumer;const Pu=()=>v.useContext(ar),Bu=e=>"id"in e&&"source"in e&&"target"in e,Lu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,qn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,qu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Uu=(e,t)=>{if(!e.source||!e.target)return t;let n;return Bu(e)?n={...e}:n={...e,id:Lu(e)},qu(n,t)?t:t.concat(n)},Un=({x:e,y:t},[n,r,i],o,[s,a])=>{const c={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},eo=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),ut=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},cr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:s}=ut(i,t).positionAbsolute;return Mu(r,rr({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ru(n)},to=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(l=>{const{width:d,height:f,selectable:h=!0,hidden:g=!1}=l;if(s&&!h||g)return!1;const{positionAbsolute:y}=ut(l,a),w={x:y.x,y:y.y,width:d||0,height:f||0},x=Pn(c,w),E=typeof d>"u"||typeof f>"u"||d===null||f===null,A=o&&x>0,b=(d||0)*(f||0);(E||A||x>=b||l.dragging)&&u.push(l)}),u},no=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},ro=(e,t,n,r,i,o=.1)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),c=Math.min(s,a),u=pt(c,r,i),l=e.x+e.width/2,d=e.y+e.height/2,f=t/2-l*u,h=n/2-d*u;return{x:f,y:h,zoom:u}},Ue=(e,t=0)=>e.transition().duration(t);function Wr(e,t,n,r){return(t[n]||[]).reduce((i,o)=>{var s,a;return`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function Ou(e,t,n,r,i,o){const{x:s,y:a}=Ve(e),u=t.elementsFromPoint(s,a).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const y=lr(void 0,u),w=u.getAttribute("data-handleid"),x=o({nodeId:g,id:w,type:y});if(x){const E=i.find(A=>A.nodeId===g&&A.type===y&&A.id===w);return{handle:{id:w,type:y,nodeId:g,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:x}}}}let l=[],d=1/0;if(i.forEach(g=>{const y=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(y<=r){const w=o(g);y<=d&&(y<d?l=[{handle:g,validHandleResult:w}]:y===d&&l.push({handle:g,validHandleResult:w}),d=y)}}),!l.length)return{handle:null,validHandleResult:io()};if(l.length===1)return l[0];const f=l.some(({validHandleResult:g})=>g.isValid),h=l.some(({handle:g})=>g.type==="target");return l.find(({handle:g,validHandleResult:y})=>h?g.type==="target":f?y.isValid:!0)||l[0]}const Ku={source:null,target:null,sourceHandle:null,targetHandle:null},io=()=>({handleDomNode:null,isValid:!1,connection:Ku,endHandle:null});function oo(e,t,n,r,i,o,s){const a=i==="target",c=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...io(),handleDomNode:c};if(c){const l=lr(void 0,c),d=c.getAttribute("data-nodeid"),f=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),y={source:a?d:n,sourceHandle:a?f:r,target:a?n:d,targetHandle:a?r:f};u.connection=y,h&&g&&(t===Ze.Strict?a&&l==="source"||!a&&l==="target":d!==n||f!==r)&&(u.endHandle={nodeId:d,handleId:f,type:l},u.isValid=o(y))}return u}function Yu({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[te]){const{handleBounds:s}=o[te];let a=[],c=[];s&&(a=Wr(o,s,"source",`${t}-${n}-${r}`),c=Wr(o,s,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function lr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function _n(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Xu(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function so({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=Yi(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:g,onConnectStart:y,panBy:w,getNodes:x,cancelConnection:E}=o();let A=0,b;const{x:T,y:R}=Ve(e),z=l==null?void 0:l.elementFromPoint(T,R),H=lr(c,z),k=f==null?void 0:f.getBoundingClientRect();if(!k||!H)return;let C,$=Ve(e,k),B=!1,P=null,p=!1,_=null;const N=Yu({nodes:x(),nodeId:n,handleId:t,handleType:H}),I=()=>{if(!h)return;const[M,j]=Ki($,k);w({x:M,y:j}),A=requestAnimationFrame(I)};s({connectionPosition:$,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:H,connectionStartHandle:{nodeId:n,handleId:t,type:H},connectionEndHandle:null}),y==null||y(e,{nodeId:n,handleId:t,handleType:H});function V(M){const{transform:j}=o();$=Ve(M,k);const{handle:F,validHandleResult:q}=Ou(M,l,Un($,j,!1,[1,1]),g,N,L=>oo(L,d,n,t,i?"target":"source",a,l));if(b=F,B||(I(),B=!0),_=q.handleDomNode,P=q.connection,p=q.isValid,s({connectionPosition:b&&p?eo({x:b.x,y:b.y},j):$,connectionStatus:Xu(!!b,p),connectionEndHandle:q.endHandle}),!b&&!p&&!_)return _n(C);P.source!==P.target&&_&&(_n(C),C=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",p),_.classList.toggle("react-flow__handle-valid",p))}function S(M){var j,F;(b||_)&&P&&p&&(r==null||r(P)),(F=(j=o()).onConnectEnd)==null||F.call(j,M),c&&(u==null||u(M)),_n(C),E(),cancelAnimationFrame(A),B=!1,p=!1,P=null,_=null,l.removeEventListener("mousemove",V),l.removeEventListener("mouseup",S),l.removeEventListener("touchmove",V),l.removeEventListener("touchend",S)}l.addEventListener("mousemove",V),l.addEventListener("mouseup",S),l.addEventListener("touchmove",V),l.addEventListener("touchend",S)}const Gr=()=>!0,Wu=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Gu=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n}},ao=v.forwardRef(({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...f},h)=>{var k,C;const g=s||null,y=e==="target",w=re(),x=Pu(),{connectOnClick:E,noPanClassName:A}=J(Wu,oe),{connecting:b,clickConnecting:T}=J(Gu(x,g,e),oe);x||(C=(k=w.getState()).onError)==null||C.call(k,"010",Me.error010());const R=$=>{const{defaultEdgeOptions:B,onConnect:P,hasDefaultEdges:p}=w.getState(),_={...B,...$};if(p){const{edges:N,setEdges:I}=w.getState();I(Uu(_,N))}P==null||P(_),a==null||a(_)},z=$=>{if(!x)return;const B=Wi($);i&&(B&&$.button===0||!B)&&so({event:$,handleId:g,nodeId:x,onConnect:R,isTarget:y,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Gr}),B?l==null||l($):d==null||d($)},H=$=>{const{onClickConnectStart:B,onClickConnectEnd:P,connectionClickStartHandle:p,connectionMode:_,isValidConnection:N}=w.getState();if(!x||!p&&!i)return;if(!p){B==null||B($,{nodeId:x,handleId:g,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:x,type:e,handleId:g}});return}const I=Yi($.target),V=n||N||Gr,{connection:S,isValid:M}=oo({nodeId:x,id:g,type:e},_,p.nodeId,p.handleId||null,p.type,V,I);M&&R(S),P==null||P($),w.setState({connectionClickStartHandle:null})};return D.createElement("div",{"data-handleid":g,"data-nodeid":x,"data-handlepos":t,"data-id":`${x}-${g}-${e}`,className:se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!y,target:y,connectable:r,connectablestart:i,connectableend:o,connecting:T,connectionindicator:r&&(i&&!b||o&&b)}]),onMouseDown:z,onTouchStart:z,onClick:E?H:void 0,ref:h,...f},c)});ao.displayName="Handle";var We=v.memo(ao);const co=({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:r=U.Bottom})=>D.createElement(D.Fragment,null,D.createElement(We,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,D.createElement(We,{type:"source",position:r,isConnectable:t}));co.displayName="DefaultNode";var On=v.memo(co);const lo=({data:e,isConnectable:t,sourcePosition:n=U.Bottom})=>D.createElement(D.Fragment,null,e==null?void 0:e.label,D.createElement(We,{type:"source",position:n,isConnectable:t}));lo.displayName="InputNode";var uo=v.memo(lo);const fo=({data:e,isConnectable:t,targetPosition:n=U.Top})=>D.createElement(D.Fragment,null,D.createElement(We,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);fo.displayName="OutputNode";var ho=v.memo(fo);const ur=()=>null;ur.displayName="GroupNode";const Zu=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),qt=e=>e.id;function Qu(e,t){return oe(e.selectedNodes.map(qt),t.selectedNodes.map(qt))&&oe(e.selectedEdges.map(qt),t.selectedEdges.map(qt))}const po=v.memo(({onSelectionChange:e})=>{const t=re(),{selectedNodes:n,selectedEdges:r}=J(Zu,Qu);return v.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(o=>o(i))},[n,r,e]),null});po.displayName="SelectionListener";const Ju=e=>!!e.onSelectionChange;function ed({onSelectionChange:e}){const t=J(Ju);return e||t?D.createElement(po,{onSelectionChange:e}):null}const td=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rt(e,t){v.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Y(e,t,n){v.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const nd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:g,minZoom:y,maxZoom:w,nodeExtent:x,onNodesChange:E,onEdgesChange:A,elementsSelectable:b,connectionMode:T,snapGrid:R,snapToGrid:z,translateExtent:H,connectOnClick:k,defaultEdgeOptions:C,fitView:$,fitViewOptions:B,onNodesDelete:P,onEdgesDelete:p,onNodeDrag:_,onNodeDragStart:N,onNodeDragStop:I,onSelectionDrag:V,onSelectionDragStart:S,onSelectionDragStop:M,noPanClassName:j,nodeOrigin:F,rfId:q,autoPanOnConnect:L,autoPanOnNodeDrag:K,onError:X,connectionRadius:W,isValidConnection:G,nodeDragThreshold:ee})=>{const{setNodes:Z,setEdges:he,setDefaultNodesAndEdges:ue,setMinZoom:pe,setMaxZoom:de,setTranslateExtent:ne,setNodeExtent:ve,reset:Q}=J(td,oe),O=re();return v.useEffect(()=>{const ce=r==null?void 0:r.map(je=>({...je,...C}));return ue(n,ce),()=>{Q()}},[]),Y("defaultEdgeOptions",C,O.setState),Y("connectionMode",T,O.setState),Y("onConnect",i,O.setState),Y("onConnectStart",o,O.setState),Y("onConnectEnd",s,O.setState),Y("onClickConnectStart",a,O.setState),Y("onClickConnectEnd",c,O.setState),Y("nodesDraggable",u,O.setState),Y("nodesConnectable",l,O.setState),Y("nodesFocusable",d,O.setState),Y("edgesFocusable",f,O.setState),Y("edgesUpdatable",h,O.setState),Y("elementsSelectable",b,O.setState),Y("elevateNodesOnSelect",g,O.setState),Y("snapToGrid",z,O.setState),Y("snapGrid",R,O.setState),Y("onNodesChange",E,O.setState),Y("onEdgesChange",A,O.setState),Y("connectOnClick",k,O.setState),Y("fitViewOnInit",$,O.setState),Y("fitViewOnInitOptions",B,O.setState),Y("onNodesDelete",P,O.setState),Y("onEdgesDelete",p,O.setState),Y("onNodeDrag",_,O.setState),Y("onNodeDragStart",N,O.setState),Y("onNodeDragStop",I,O.setState),Y("onSelectionDrag",V,O.setState),Y("onSelectionDragStart",S,O.setState),Y("onSelectionDragStop",M,O.setState),Y("noPanClassName",j,O.setState),Y("nodeOrigin",F,O.setState),Y("rfId",q,O.setState),Y("autoPanOnConnect",L,O.setState),Y("autoPanOnNodeDrag",K,O.setState),Y("onError",X,O.setState),Y("connectionRadius",W,O.setState),Y("isValidConnection",G,O.setState),Y("nodeDragThreshold",ee,O.setState),rt(e,Z),rt(t,he),rt(y,pe),rt(w,de),rt(H,ne),rt(x,ve),null},Zr={display:"none"},rd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},mo="react-flow__node-desc",go="react-flow__edge-desc",id="react-flow__aria-live",od=e=>e.ariaLiveMessage;function sd({rfId:e}){const t=J(od);return D.createElement("div",{id:`${id}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rd},t)}function ad({rfId:e,disableKeyboardA11y:t}){return D.createElement(D.Fragment,null,D.createElement("div",{id:`${mo}-${e}`,style:Zr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),D.createElement("div",{id:`${go}-${e}`,style:Zr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&D.createElement(sd,{rfId:e}))}var It=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=v.useState(!1),i=v.useRef(!1),o=v.useRef(new Set([])),[s,a]=v.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,f)=>d.concat(...f),[]);return[u,l]}return[[],[]]},[e]);return v.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const l=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Bn(h))return!1;const y=Jr(h.code,a);o.current.add(h[y]),Qr(s,o.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Bn(h))return!1;const y=Jr(h.code,a);Qr(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[y]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function Qr(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Jr(e,t){return t.includes(e)?"code":"key"}function yo(e,t,n,r){var a,c;const i=e.parentNode||e.parentId;if(!i)return n;const o=t.get(i),s=ut(o,r);return yo(o,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(((a=o[te])==null?void 0:a.z)??0)>(n.z??0)?((c=o[te])==null?void 0:c.z)??0:n.z??0},r)}function xo(e,t,n){e.forEach(r=>{var o;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:s,y:a,z:c}=yo(r,e,{...r.position,z:((o=r[te])==null?void 0:o.z)??0},t);r.positionAbsolute={x:s,y:a},r[te].z=c,n!=null&&n[r.id]&&(r[te].isParent=!0)}})}function Cn(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(a=>{var h;const c=(fe(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(o[d]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(l,te,{enumerable:!1,value:{handleBounds:f||(h=u==null?void 0:u[te])==null?void 0:h.handleBounds,z:c}}),i.set(a.id,l)}),xo(i,n,o),i}function wo(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=e(),f=t.initial&&!u&&l;if(a&&c&&(f||!t.initial)){const g=n().filter(w=>{var E;const x=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return(E=t.nodes)!=null&&E.length?x&&t.nodes.some(A=>A.id===w.id):x}),y=g.every(w=>w.width&&w.height);if(g.length>0&&y){const w=cr(g,d),{x,y:E,zoom:A}=ro(w,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),b=ze.translate(x,E).scale(A);return typeof t.duration=="number"&&t.duration>0?a.transform(Ue(c,t.duration),b):a.transform(c,b),!0}}return!1}function cd(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[te]:r[te],selected:n.selected})}),new Map(t)}function ld(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Ut({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:cd(e,i)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:ld(t,o)}),a==null||a(t))}const it=()=>{},ud={zoomIn:it,zoomOut:it,zoomTo:it,getZoom:()=>1,setViewport:it,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:it,fitBounds:it,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},dd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),fd=()=>{const e=re(),{d3Zoom:t,d3Selection:n}=J(dd,oe);return v.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Ue(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Ue(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(Ue(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[s,a,c]=e.getState().transform,u=ze.translate(i.x??s,i.y??a).scale(i.zoom??c);t.transform(Ue(n,o==null?void 0:o.duration),u)},getViewport:()=>{const[i,o,s]=e.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>wo(e.getState,i),setCenter:(i,o,s)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,d=a/2-i*l,f=c/2-o*l,h=ze.translate(d,f).scale(l);t.transform(Ue(n,s==null?void 0:s.duration),h)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:d,zoom:f}=ro(i,s,a,c,u,(o==null?void 0:o.padding)??.1),h=ze.translate(l,d).scale(f);t.transform(Ue(n,o==null?void 0:o.duration),h)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Un(i,o,s,a)},screenToFlowPosition:i=>{const{transform:o,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return i;const{x:u,y:l}=c.getBoundingClientRect(),d={x:i.x-u,y:i.y-l};return Un(d,o,s,a)},flowToScreenPosition:i=>{const{transform:o,domNode:s}=e.getState();if(!s)return i;const{x:a,y:c}=s.getBoundingClientRect(),u=eo(i,o);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:ud,[t,n])};function dr(){const e=fd(),t=re(),n=v.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=v.useCallback(y=>t.getState().nodeInternals.get(y),[]),i=v.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(w=>({...w}))},[]),o=v.useCallback(y=>{const{edges:w=[]}=t.getState();return w.find(x=>x.id===y)},[]),s=v.useCallback(y=>{const{getNodes:w,setNodes:x,hasDefaultNodes:E,onNodesChange:A}=t.getState(),b=w(),T=typeof y=="function"?y(b):y;if(E)x(T);else if(A){const R=T.length===0?b.map(z=>({type:"remove",id:z.id})):T.map(z=>({item:z,type:"reset"}));A(R)}},[]),a=v.useCallback(y=>{const{edges:w=[],setEdges:x,hasDefaultEdges:E,onEdgesChange:A}=t.getState(),b=typeof y=="function"?y(w):y;if(E)x(b);else if(A){const T=b.length===0?w.map(R=>({type:"remove",id:R.id})):b.map(R=>({item:R,type:"reset"}));A(T)}},[]),c=v.useCallback(y=>{const w=Array.isArray(y)?y:[y],{getNodes:x,setNodes:E,hasDefaultNodes:A,onNodesChange:b}=t.getState();if(A){const R=[...x(),...w];E(R)}else if(b){const T=w.map(R=>({item:R,type:"add"}));b(T)}},[]),u=v.useCallback(y=>{const w=Array.isArray(y)?y:[y],{edges:x=[],setEdges:E,hasDefaultEdges:A,onEdgesChange:b}=t.getState();if(A)E([...x,...w]);else if(b){const T=w.map(R=>({item:R,type:"add"}));b(T)}},[]),l=v.useCallback(()=>{const{getNodes:y,edges:w=[],transform:x}=t.getState(),[E,A,b]=x;return{nodes:y().map(T=>({...T})),edges:w.map(T=>({...T})),viewport:{x:E,y:A,zoom:b}}},[]),d=v.useCallback(({nodes:y,edges:w})=>{const{nodeInternals:x,getNodes:E,edges:A,hasDefaultNodes:b,hasDefaultEdges:T,onNodesDelete:R,onEdgesDelete:z,onNodesChange:H,onEdgesChange:k}=t.getState(),C=(y||[]).map(_=>_.id),$=(w||[]).map(_=>_.id),B=E().reduce((_,N)=>{const I=N.parentNode||N.parentId,V=!C.includes(N.id)&&I&&_.find(M=>M.id===I);return(typeof N.deletable=="boolean"?N.deletable:!0)&&(C.includes(N.id)||V)&&_.push(N),_},[]),P=A.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),p=P.filter(_=>$.includes(_.id));if(B||p){const _=no(B,P),N=[...p,..._],I=N.reduce((V,S)=>(V.includes(S.id)||V.push(S.id),V),[]);if((T||b)&&(T&&t.setState({edges:A.filter(V=>!I.includes(V.id))}),b&&(B.forEach(V=>{x.delete(V.id)}),t.setState({nodeInternals:new Map(x)}))),I.length>0&&(z==null||z(N),k&&k(I.map(V=>({id:V,type:"remove"})))),B.length>0&&(R==null||R(B),H)){const V=B.map(S=>({id:S.id,type:"remove"}));H(V)}}},[]),f=v.useCallback(y=>{const w=ku(y),x=w?null:t.getState().nodeInternals.get(y.id);return!w&&!x?[null,null,w]:[w?y:Ur(x),x,w]},[]),h=v.useCallback((y,w=!0,x)=>{const[E,A,b]=f(y);return E?(x||t.getState().getNodes()).filter(T=>{if(!b&&(T.id===A.id||!T.positionAbsolute))return!1;const R=Ur(T),z=Pn(R,E);return w&&z>0||z>=E.width*E.height}):[]},[]),g=v.useCallback((y,w,x=!0)=>{const[E]=f(y);if(!E)return!1;const A=Pn(E,w);return x&&A>0||A>=E.width*E.height},[]);return v.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,r,i,o,s,a,c,u,l,d,h,g])}const hd={actInsideInputWithModifier:!1};var pd=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=re(),{deleteElements:r}=dr(),i=It(e,hd),o=It(t);v.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),v.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function md(e){const t=re();v.useEffect(()=>{let n;const r=()=>{var o,s;if(!e.current)return;const i=tr(e.current);(i.height===0||i.width===0)&&((s=(o=t.getState()).onError)==null||s.call(o,"004",Me.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const fr={position:"absolute",width:"100%",height:"100%",top:0,left:0},gd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ot=e=>({x:e.x,y:e.y,zoom:e.k}),ot=(e,t)=>e.target.closest(`.${t}`),ei=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ti=e=>{const t=e.ctrlKey&&rn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},yd=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),xd=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ke.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:g,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:x=!0,children:E,noWheelClassName:A,noPanClassName:b})=>{const T=v.useRef(),R=re(),z=v.useRef(!1),H=v.useRef(!1),k=v.useRef(null),C=v.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:B,d3ZoomHandler:P,userSelectionActive:p}=J(yd,oe),_=It(w),N=v.useRef(0),I=v.useRef(!1),V=v.useRef();return md(k),v.useEffect(()=>{if(k.current){const S=k.current.getBoundingClientRect(),M=Nu().scaleExtent([g,y]).translateExtent(h),j=ge(k.current).call(M),F=ze.translate(f.x,f.y).scale(pt(f.zoom,g,y)),q=[[0,0],[S.width,S.height]],L=M.constrain()(F,q,h);M.transform(j,L),M.wheelDelta(ti),R.setState({d3Zoom:M,d3Selection:j,d3ZoomHandler:j.on("wheel.zoom"),transform:[L.x,L.y,L.k],domNode:k.current.closest(".react-flow")})}},[]),v.useEffect(()=>{B&&$&&(s&&!_&&!p?B.on("wheel.zoom",S=>{if(ot(S,A))return!1;S.preventDefault(),S.stopImmediatePropagation();const M=B.property("__zoom").k||1;if(S.ctrlKey&&o){const G=Se(S),ee=ti(S),Z=M*Math.pow(2,ee);$.scaleTo(B,Z,G,S);return}const j=S.deltaMode===1?20:1;let F=c===Ke.Vertical?0:S.deltaX*j,q=c===Ke.Horizontal?0:S.deltaY*j;!rn()&&S.shiftKey&&c!==Ke.Vertical&&(F=S.deltaY*j,q=0),$.translateBy(B,-(F/M)*a,-(q/M)*a,{internal:!0});const L=Ot(B.property("__zoom")),{onViewportChangeStart:K,onViewportChange:X,onViewportChangeEnd:W}=R.getState();clearTimeout(V.current),I.current||(I.current=!0,t==null||t(S,L),K==null||K(L)),I.current&&(e==null||e(S,L),X==null||X(L),V.current=setTimeout(()=>{n==null||n(S,L),W==null||W(L),I.current=!1},150))},{passive:!1}):typeof P<"u"&&B.on("wheel.zoom",function(S,M){if(!x&&S.type==="wheel"&&!S.ctrlKey||ot(S,A))return null;S.preventDefault(),P.call(this,S,M)},{passive:!1}))},[p,s,c,B,$,P,_,o,x,A,t,e,n]),v.useEffect(()=>{$&&$.on("start",S=>{var F,q;if(!S.sourceEvent||S.sourceEvent.internal)return null;N.current=(F=S.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:M}=R.getState(),j=Ot(S.transform);z.current=!0,C.current=j,((q=S.sourceEvent)==null?void 0:q.type)==="mousedown"&&R.setState({paneDragging:!0}),M==null||M(j),t==null||t(S.sourceEvent,j)})},[$,t]),v.useEffect(()=>{$&&(p&&!z.current?$.on("zoom",null):p||$.on("zoom",S=>{var j;const{onViewportChange:M}=R.getState();if(R.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),H.current=!!(r&&ei(d,N.current??0)),(e||M)&&!((j=S.sourceEvent)!=null&&j.internal)){const F=Ot(S.transform);M==null||M(F),e==null||e(S.sourceEvent,F)}}))},[p,$,e,d,r]),v.useEffect(()=>{$&&$.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:M}=R.getState();if(z.current=!1,R.setState({paneDragging:!1}),r&&ei(d,N.current??0)&&!H.current&&r(S.sourceEvent),H.current=!1,(n||M)&&gd(C.current,S.transform)){const j=Ot(S.transform);C.current=j,clearTimeout(T.current),T.current=setTimeout(()=>{M==null||M(j),n==null||n(S.sourceEvent,j)},s?150:0)}})},[$,s,d,n,r]),v.useEffect(()=>{$&&$.filter(S=>{const M=_||i,j=o&&S.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&S.button===1&&S.type==="mousedown"&&(ot(S,"react-flow__node")||ot(S,"react-flow__edge")))return!0;if(!d&&!M&&!s&&!u&&!o||p||!u&&S.type==="dblclick"||ot(S,A)&&S.type==="wheel"||ot(S,b)&&(S.type!=="wheel"||s&&S.type==="wheel"&&!_)||!o&&S.ctrlKey&&S.type==="wheel"||!M&&!s&&!j&&S.type==="wheel"||!d&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(d)&&!d.includes(S.button)&&S.type==="mousedown")return!1;const F=Array.isArray(d)&&d.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&F})},[p,$,i,o,s,u,d,l,_]),D.createElement("div",{className:"react-flow__renderer",ref:k,style:fr},E)},wd=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vd(){const{userSelectionActive:e,userSelectionRect:t}=J(wd,oe);return e&&t?D.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ni(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,o=t.position.y+t.height-r.height;if(i>0||o>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),o>0&&(r.style.height+=o),t.position.x<0){const s=Math.abs(t.position.x);r.position.x=r.position.x-s,r.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);r.position.y=r.position.y-s,r.style.height+=s,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function bd(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&ni(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&ni(r,s);break}case"remove":return r}return r.push(s),r},n)}function Sd(e,t){return bd(e,t)}const Ie=(e,t)=>({id:e,type:"select",selected:t});function at(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Ie(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Ie(r.id,!1))),n},[])}const An=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Ed=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),vo=v.memo(({isSelecting:e,selectionMode:t=kt.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const f=v.useRef(null),h=re(),g=v.useRef(0),y=v.useRef(0),w=v.useRef(),{userSelectionActive:x,elementsSelectable:E,dragging:A}=J(Ed,oe),b=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,y.current=0},T=P=>{o==null||o(P),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},R=P=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){P.preventDefault();return}s==null||s(P)},z=a?P=>a(P):void 0,H=P=>{const{resetSelectedElements:p,domNode:_}=h.getState();if(w.current=_==null?void 0:_.getBoundingClientRect(),!E||!e||P.button!==0||P.target!==f.current||!w.current)return;const{x:N,y:I}=Ve(P,w.current);p(),h.setState({userSelectionRect:{width:0,height:0,startX:N,startY:I,x:N,y:I}}),r==null||r(P)},k=P=>{const{userSelectionRect:p,nodeInternals:_,edges:N,transform:I,onNodesChange:V,onEdgesChange:S,nodeOrigin:M,getNodes:j}=h.getState();if(!e||!w.current||!p)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=Ve(P,w.current),q=p.startX??0,L=p.startY??0,K={...p,x:F.x<q?F.x:q,y:F.y<L?F.y:L,width:Math.abs(F.x-q),height:Math.abs(F.y-L)},X=j(),W=to(_,K,I,t===kt.Partial,!0,M),G=no(W,N).map(Z=>Z.id),ee=W.map(Z=>Z.id);if(g.current!==ee.length){g.current=ee.length;const Z=at(X,ee);Z.length&&(V==null||V(Z))}if(y.current!==G.length){y.current=G.length;const Z=at(N,G);Z.length&&(S==null||S(Z))}h.setState({userSelectionRect:K})},C=P=>{if(P.button!==0)return;const{userSelectionRect:p}=h.getState();!x&&p&&P.target===f.current&&(T==null||T(P)),h.setState({nodesSelectionActive:g.current>0}),b(),i==null||i(P)},$=P=>{x&&(h.setState({nodesSelectionActive:g.current>0}),i==null||i(P)),b()},B=E&&(e||x);return D.createElement("div",{className:se(["react-flow__pane",{dragging:A,selection:e}]),onClick:B?void 0:An(T,f),onContextMenu:An(R,f),onWheel:An(z,f),onMouseEnter:B?void 0:c,onMouseDown:B?H:void 0,onMouseMove:B?k:u,onMouseUp:B?C:void 0,onMouseLeave:B?$:l,ref:f,style:fr},d,D.createElement(vd,null))});vo.displayName="Pane";function bo(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:bo(r,t):!1}function ri(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Nd(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!bo(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var o,s;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((o=i.positionAbsolute)==null?void 0:o.x)??0),y:n.y-(((s=i.positionAbsolute)==null?void 0:s.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function _d(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function So(e,t,n,r,i=[0,0],o){const s=_d(e,e.extent||r);let a=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:f,y:h}=ut(d,i).positionAbsolute;a=d&&fe(f)&&fe(h)&&fe(d.width)&&fe(d.height)?[[f+e.width*i[0],h+e.height*i[1]],[f+d.width-e.width+e.width*i[0],h+d.height-e.height+e.height*i[1]]]:a}else o==null||o("005",Me.error005()),a=s;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:f,y:h}=ut(d,i).positionAbsolute;a=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const d=n.get(c);u=ut(d,i).positionAbsolute}const l=a&&a!=="parent"?nr(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function Dn({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const ii=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...tr(c)}})};function St(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Kn({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Me.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):i([e])}function Cd(){const e=re();return v.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:o?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function Tn(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Eo({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=re(),[c,u]=v.useState(!1),l=v.useRef([]),d=v.useRef({x:null,y:null}),f=v.useRef(0),h=v.useRef(null),g=v.useRef({x:0,y:0}),y=v.useRef(null),w=v.useRef(!1),x=v.useRef(!1),E=v.useRef(!1),A=Cd();return v.useEffect(()=>{if(e!=null&&e.current){const b=ge(e.current),T=({x:H,y:k})=>{const{nodeInternals:C,onNodeDrag:$,onSelectionDrag:B,updateNodePositions:P,nodeExtent:p,snapGrid:_,snapToGrid:N,nodeOrigin:I,onError:V}=a.getState();d.current={x:H,y:k};let S=!1,M={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&p){const F=cr(l.current,I);M=rr(F)}if(l.current=l.current.map(F=>{const q={x:H-F.distance.x,y:k-F.distance.y};N&&(q.x=_[0]*Math.round(q.x/_[0]),q.y=_[1]*Math.round(q.y/_[1]));const L=[[p[0][0],p[0][1]],[p[1][0],p[1][1]]];l.current.length>1&&p&&!F.extent&&(L[0][0]=F.positionAbsolute.x-M.x+p[0][0],L[1][0]=F.positionAbsolute.x+(F.width??0)-M.x2+p[1][0],L[0][1]=F.positionAbsolute.y-M.y+p[0][1],L[1][1]=F.positionAbsolute.y+(F.height??0)-M.y2+p[1][1]);const K=So(F,q,C,L,I,V);return S=S||F.position.x!==K.position.x||F.position.y!==K.position.y,F.position=K.position,F.positionAbsolute=K.positionAbsolute,F}),!S)return;P(l.current,!0,!0),u(!0);const j=i?$:Tn(B);if(j&&y.current){const[F,q]=Dn({nodeId:i,dragItems:l.current,nodeInternals:C});j(y.current,F,q)}},R=()=>{if(!h.current)return;const[H,k]=Ki(g.current,h.current);if(H!==0||k!==0){const{transform:C,panBy:$}=a.getState();d.current.x=(d.current.x??0)-H/C[2],d.current.y=(d.current.y??0)-k/C[2],$({x:H,y:k})&&T(d.current)}f.current=requestAnimationFrame(R)},z=H=>{var I;const{nodeInternals:k,multiSelectionActive:C,nodesDraggable:$,unselectNodesAndEdges:B,onNodeDragStart:P,onSelectionDragStart:p}=a.getState();x.current=!0;const _=i?P:Tn(p);(!s||!o)&&!C&&i&&((I=k.get(i))!=null&&I.selected||B()),i&&o&&s&&Kn({id:i,store:a,nodeRef:e});const N=A(H);if(d.current=N,l.current=Nd(k,$,N,i),_&&l.current){const[V,S]=Dn({nodeId:i,dragItems:l.current,nodeInternals:k});_(H.sourceEvent,V,S)}};if(t)b.on(".drag",null);else{const H=$c().on("start",k=>{const{domNode:C,nodeDragThreshold:$}=a.getState();$===0&&z(k),E.current=!1;const B=A(k);d.current=B,h.current=(C==null?void 0:C.getBoundingClientRect())||null,g.current=Ve(k.sourceEvent,h.current)}).on("drag",k=>{var P,p;const C=A(k),{autoPanOnNodeDrag:$,nodeDragThreshold:B}=a.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!w.current&&x.current&&$&&(w.current=!0,R()),!x.current){const _=C.xSnapped-(((P=d==null?void 0:d.current)==null?void 0:P.x)??0),N=C.ySnapped-(((p=d==null?void 0:d.current)==null?void 0:p.y)??0);Math.sqrt(_*_+N*N)>B&&z(k)}(d.current.x!==C.xSnapped||d.current.y!==C.ySnapped)&&l.current&&x.current&&(y.current=k.sourceEvent,g.current=Ve(k.sourceEvent,h.current),T(C))}}).on("end",k=>{if(!(!x.current||E.current)&&(u(!1),w.current=!1,x.current=!1,cancelAnimationFrame(f.current),l.current)){const{updateNodePositions:C,nodeInternals:$,onNodeDragStop:B,onSelectionDragStop:P}=a.getState(),p=i?B:Tn(P);if(C(l.current,!1,!1),p){const[_,N]=Dn({nodeId:i,dragItems:l.current,nodeInternals:$});p(k.sourceEvent,_,N)}}}).filter(k=>{const C=k.target;return!k.button&&(!n||!ri(C,`.${n}`,e))&&(!r||ri(C,r,e))});return b.call(H),()=>{b.on(".drag",null)}}}},[e,t,n,r,o,a,i,s,A]),c}function No(){const e=re();return v.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),d=s().filter(E=>E.selected&&(E.draggable||l&&typeof E.draggable>"u")),f=a?c[0]:5,h=a?c[1]:5,g=n.isShiftPressed?4:1,y=n.x*f*g,w=n.y*h*g,x=d.map(E=>{if(E.positionAbsolute){const A={x:E.positionAbsolute.x+y,y:E.positionAbsolute.y+w};a&&(A.x=c[0]*Math.round(A.x/c[0]),A.y=c[1]*Math.round(A.y/c[1]));const{positionAbsolute:b,position:T}=So(E,A,r,i,void 0,u);E.position=T,E.positionAbsolute=b}return E});o(x,!0,!1)},[])}const dt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Et=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:g,onDoubleClick:y,style:w,className:x,isDraggable:E,isSelectable:A,isConnectable:b,isFocusable:T,selectNodesOnDrag:R,sourcePosition:z,targetPosition:H,hidden:k,resizeObserver:C,dragHandle:$,zIndex:B,isParent:P,noDragClassName:p,noPanClassName:_,initialized:N,disableKeyboardA11y:I,ariaLabel:V,rfId:S,hasHandleBounds:M})=>{const j=re(),F=v.useRef(null),q=v.useRef(null),L=v.useRef(z),K=v.useRef(H),X=v.useRef(r),W=A||E||l||d||f||h,G=No(),ee=St(n,j.getState,d),Z=St(n,j.getState,f),he=St(n,j.getState,h),ue=St(n,j.getState,g),pe=St(n,j.getState,y),de=Q=>{const{nodeDragThreshold:O}=j.getState();if(A&&(!R||!E||O>0)&&Kn({id:n,store:j,nodeRef:F}),l){const ce=j.getState().nodeInternals.get(n);ce&&l(Q,{...ce})}},ne=Q=>{if(!Bn(Q)&&!I)if(Xi.includes(Q.key)&&A){const O=Q.key==="Escape";Kn({id:n,store:j,unselect:O,nodeRef:F})}else E&&u&&Object.prototype.hasOwnProperty.call(dt,Q.key)&&(j.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),G({x:dt[Q.key].x,y:dt[Q.key].y,isShiftPressed:Q.shiftKey}))};v.useEffect(()=>()=>{q.current&&(C==null||C.unobserve(q.current),q.current=null)},[]),v.useEffect(()=>{if(F.current&&!k){const Q=F.current;(!N||!M||q.current!==Q)&&(q.current&&(C==null||C.unobserve(q.current)),C==null||C.observe(Q),q.current=Q)}},[k,N,M]),v.useEffect(()=>{const Q=X.current!==r,O=L.current!==z,ce=K.current!==H;F.current&&(Q||O||ce)&&(Q&&(X.current=r),O&&(L.current=z),ce&&(K.current=H),j.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,z,H]);const ve=Eo({nodeRef:F,disabled:k||!E,noDragClassName:p,handleSelector:$,nodeId:n,isSelectable:A,selectNodesOnDrag:R});return k?null:D.createElement("div",{className:se(["react-flow__node",`react-flow__node-${r}`,{[_]:E},x,{selected:u,selectable:A,parent:P,dragging:ve}]),ref:F,style:{zIndex:B,transform:`translate(${a}px,${c}px)`,pointerEvents:W?"all":"none",visibility:N?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:Z,onMouseLeave:he,onContextMenu:ue,onClick:de,onDoubleClick:pe,onKeyDown:T?ne:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":I?void 0:`${mo}-${S}`,"aria-label":V},D.createElement(Hu,{value:n},D.createElement(e,{id:n,data:i,type:r,xPos:o,yPos:s,selected:u,isConnectable:b,sourcePosition:z,targetPosition:H,dragging:ve,dragHandle:$,zIndex:B})))};return t.displayName="NodeWrapper",v.memo(t)};const Ad=e=>{const t=e.getNodes().filter(n=>n.selected);return{...cr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Dd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=re(),{width:i,height:o,x:s,y:a,transformString:c,userSelectionActive:u}=J(Ad,oe),l=No(),d=v.useRef(null);if(v.useEffect(()=>{var g;n||(g=d.current)==null||g.focus({preventScroll:!0})},[n]),Eo({nodeRef:d}),u||!i||!o)return null;const f=e?g=>{const y=r.getState().getNodes().filter(w=>w.selected);e(g,y)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(dt,g.key)&&l({x:dt[g.key].x,y:dt[g.key].y,isShiftPressed:g.shiftKey})};return D.createElement("div",{className:se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},D.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:o,top:a,left:s}}))}var Td=v.memo(Dd);const Md=e=>e.nodesSelectionActive,_o=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:x,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:b,zoomOnPinch:T,panOnScroll:R,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:k,panOnDrag:C,defaultViewport:$,translateExtent:B,minZoom:P,maxZoom:p,preventScrolling:_,onSelectionContextMenu:N,noWheelClassName:I,noPanClassName:V,disableKeyboardA11y:S})=>{const M=J(Md),j=It(d),F=It(x),q=F||C,L=F||R,K=j||f&&q!==!0;return pd({deleteKeyCode:a,multiSelectionKeyCode:w}),D.createElement(xd,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:o,elementsSelectable:A,zoomOnScroll:b,zoomOnPinch:T,panOnScroll:L,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:k,panOnDrag:!j&&q,defaultViewport:$,translateExtent:B,minZoom:P,maxZoom:p,zoomActivationKeyCode:E,preventScrolling:_,noWheelClassName:I,noPanClassName:V},D.createElement(vo,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:q,isSelecting:!!K,selectionMode:h},e,M&&D.createElement(Td,{onSelectionContextMenu:N,noPanClassName:V,disableKeyboardA11y:S})))};_o.displayName="FlowRenderer";var Rd=v.memo(_o);function kd(e){return J(v.useCallback(n=>e?to(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Id(e){const t={input:Et(e.input||uo),default:Et(e.default||On),output:Et(e.output||ho),group:Et(e.group||ur)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Et(e[o]||On),i),n);return{...t,...r}}const $d=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},zd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Co=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=J(zd,oe),a=kd(e.onlyRenderVisibleElements),c=v.useRef(),u=v.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));o(f)});return c.current=l,l},[]);return v.useEffect(()=>()=>{var l;(l=c==null?void 0:c.current)==null||l.disconnect()},[]),D.createElement("div",{className:"react-flow__nodes",style:fr},a.map(l=>{var T,R,z;let d=l.type||"default";e.nodeTypes[d]||(s==null||s("003",Me.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(l.draggable||t&&typeof l.draggable>"u"),g=!!(l.selectable||i&&typeof l.selectable>"u"),y=!!(l.connectable||n&&typeof l.connectable>"u"),w=!!(l.focusable||r&&typeof l.focusable>"u"),x=e.nodeExtent?nr(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,E=(x==null?void 0:x.x)??0,A=(x==null?void 0:x.y)??0,b=$d({x:E,y:A,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return D.createElement(f,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||U.Bottom,targetPosition:l.targetPosition||U.Top,hidden:l.hidden,xPos:E,yPos:A,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:g,isConnectable:y,isFocusable:w,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((T=l[te])==null?void 0:T.z)??0,isParent:!!((R=l[te])!=null&&R.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!((z=l[te])!=null&&z.handleBounds)})}))};Co.displayName="NodeRenderer";var Vd=v.memo(Co);const jd=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Fd=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,oi="react-flow__edgeupdater",si=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>D.createElement("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:se([oi,`${oi}-${a}`]),cx:jd(t,r,e),cy:Fd(n,r,e),r,stroke:"transparent",fill:"transparent"}),Hd=()=>!0;var st=e=>{const t=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,style:w,source:x,target:E,sourceX:A,sourceY:b,targetX:T,targetY:R,sourcePosition:z,targetPosition:H,elementsSelectable:k,hidden:C,sourceHandleId:$,targetHandleId:B,onContextMenu:P,onMouseEnter:p,onMouseMove:_,onMouseLeave:N,reconnectRadius:I,onReconnect:V,onReconnectStart:S,onReconnectEnd:M,markerEnd:j,markerStart:F,rfId:q,ariaLabel:L,isFocusable:K,isReconnectable:X,pathOptions:W,interactionWidth:G,disableKeyboardA11y:ee})=>{const Z=v.useRef(null),[he,ue]=v.useState(!1),[pe,de]=v.useState(!1),ne=re(),ve=v.useMemo(()=>`url('#${qn(F,q)}')`,[F,q]),Q=v.useMemo(()=>`url('#${qn(j,q)}')`,[j,q]);if(C)return null;const O=ie=>{var be;const{edges:me,addSelectedEdges:Pe,unselectNodesAndEdges:Be,multiSelectionActive:Le}=ne.getState(),Ce=me.find(yt=>yt.id===n);Ce&&(k&&(ne.setState({nodesSelectionActive:!1}),Ce.selected&&Le?(Be({nodes:[],edges:[Ce]}),(be=Z.current)==null||be.blur()):Pe([n])),s&&s(ie,Ce))},ce=bt(n,ne.getState,a),je=bt(n,ne.getState,P),mt=bt(n,ne.getState,p),Qe=bt(n,ne.getState,_),Je=bt(n,ne.getState,N),_e=(ie,me)=>{if(ie.button!==0)return;const{edges:Pe,isValidConnection:Be}=ne.getState(),Le=me?E:x,Ce=(me?B:$)||null,be=me?"target":"source",yt=Be||Hd,pn=me,xt=Pe.find(qe=>qe.id===n);de(!0),S==null||S(ie,xt,be);const mn=qe=>{de(!1),M==null||M(qe,xt,be)};so({event:ie,handleId:Ce,nodeId:Le,onConnect:qe=>V==null?void 0:V(xt,qe),isTarget:pn,getState:ne.getState,setState:ne.setState,isValidConnection:yt,edgeUpdaterType:be,onReconnectEnd:mn})},et=ie=>_e(ie,!0),Fe=ie=>_e(ie,!1),He=()=>ue(!0),tt=()=>ue(!1),nt=!k&&!s,gt=ie=>{var me;if(!ee&&Xi.includes(ie.key)&&k){const{unselectNodesAndEdges:Pe,addSelectedEdges:Be,edges:Le}=ne.getState();ie.key==="Escape"?((me=Z.current)==null||me.blur(),Pe({edges:[Le.find(be=>be.id===n)]})):Be([n])}};return D.createElement("g",{className:se(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:u,inactive:nt,updating:he}]),onClick:O,onDoubleClick:ce,onContextMenu:je,onMouseEnter:mt,onMouseMove:Qe,onMouseLeave:Je,onKeyDown:K?gt:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":L===null?void 0:L||`Edge from ${x} to ${E}`,"aria-describedby":K?`${go}-${q}`:void 0,ref:Z},!pe&&D.createElement(e,{id:n,source:x,target:E,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:y,data:o,style:w,sourceX:A,sourceY:b,targetX:T,targetY:R,sourcePosition:z,targetPosition:H,sourceHandleId:$,targetHandleId:B,markerStart:ve,markerEnd:Q,pathOptions:W,interactionWidth:G}),X&&D.createElement(D.Fragment,null,(X==="source"||X===!0)&&D.createElement(si,{position:z,centerX:A,centerY:b,radius:I,onMouseDown:et,onMouseEnter:He,onMouseOut:tt,type:"source"}),(X==="target"||X===!0)&&D.createElement(si,{position:H,centerX:T,centerY:R,radius:I,onMouseDown:Fe,onMouseEnter:He,onMouseOut:tt,type:"target"})))};return t.displayName="EdgeWrapper",v.memo(t)};function Pd(e){const t={default:st(e.default||sn),straight:st(e.bezier||sr),step:st(e.step||or),smoothstep:st(e.step||hn),simplebezier:st(e.simplebezier||ir)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=st(e[o]||sn),i),n);return{...t,...r}}function ai(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case U.Top:return{x:r+o/2,y:i};case U.Right:return{x:r+o,y:i+s/2};case U.Bottom:return{x:r+o/2,y:i+s};case U.Left:return{x:r,y:i+s/2}}}function ci(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Bd=(e,t,n,r,i,o)=>{const s=ai(n,e,t),a=ai(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Ld({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=rr({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),f=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*f)>0}function li(e){var r,i,o,s,a;const t=((r=e==null?void 0:e[te])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const qd=[{level:0,isMaxLevel:!0,edges:[]}];function Ud(e,t,n=!1){let r=-1;const i=e.reduce((s,a)=>{var l,d;const c=fe(a.zIndex);let u=c?a.zIndex:0;if(n){const f=t.get(a.target),h=t.get(a.source),g=a.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),y=Math.max(((l=h==null?void 0:h[te])==null?void 0:l.z)||0,((d=f==null?void 0:f[te])==null?void 0:d.z)||0,1e3);u=(c?a.zIndex:0)+(g?y:0)}return s[u]?s[u].push(a):s[u]=[a],r=u>r?u:r,s},{}),o=Object.entries(i).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===r}});return o.length===0?qd:o}function Od(e,t,n){const r=J(v.useCallback(i=>e?i.edges.filter(o=>{const s=t.get(o.source),a=t.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Ld({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return Ud(r,t,n)}const Kd=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Yd=({color:e="none",strokeWidth:t=1})=>D.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ui={[on.Arrow]:Kd,[on.ArrowClosed]:Yd};function Xd(e){const t=re();return v.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(ui,e)?ui[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",Me.error009(e)),null)},[e])}const Wd=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=Xd(t);return c?D.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0"},D.createElement(c,{color:n,strokeWidth:s})):null},Gd=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=qn(s,t);r.includes(a)||(i.push({id:a,color:s.color||e,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Ao=({defaultColor:e,rfId:t})=>{const n=J(v.useCallback(Gd({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return D.createElement("defs",null,n.map(r=>D.createElement(Wd,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Ao.displayName="MarkerDefinitions";var Zd=v.memo(Ao);const Qd=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Do=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:y,children:w,disableKeyboardA11y:x})=>{const{edgesFocusable:E,edgesUpdatable:A,elementsSelectable:b,width:T,height:R,connectionMode:z,nodeInternals:H,onError:k}=J(Qd,oe),C=Od(t,H,n);return T?D.createElement(D.Fragment,null,C.map(({level:$,edges:B,isMaxLevel:P})=>D.createElement("svg",{key:$,style:{zIndex:$},width:T,height:R,className:"react-flow__edges react-flow__container"},P&&D.createElement(Zd,{defaultColor:e,rfId:r}),D.createElement("g",null,B.map(p=>{const[_,N,I]=li(H.get(p.source)),[V,S,M]=li(H.get(p.target));if(!I||!M)return null;let j=p.type||"default";i[j]||(k==null||k("011",Me.error011(j)),j="default");const F=i[j]||i.default,q=z===Ze.Strict?S.target:(S.target??[]).concat(S.source??[]),L=ci(N.source,p.sourceHandle),K=ci(q,p.targetHandle),X=(L==null?void 0:L.position)||U.Bottom,W=(K==null?void 0:K.position)||U.Top,G=!!(p.focusable||E&&typeof p.focusable>"u"),ee=p.reconnectable||p.updatable,Z=typeof f<"u"&&(ee||A&&typeof ee>"u");if(!L||!K)return k==null||k("008",Me.error008(L,p)),null;const{sourceX:he,sourceY:ue,targetX:pe,targetY:de}=Bd(_,L,X,V,K,W);return D.createElement(F,{key:p.id,id:p.id,className:se([p.className,o]),type:j,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:he,sourceY:ue,targetX:pe,targetY:de,sourcePosition:X,targetPosition:W,elementsSelectable:b,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:y,rfId:r,ariaLabel:p.ariaLabel,isFocusable:G,isReconnectable:Z,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth,disableKeyboardA11y:x})})))),w):null};Do.displayName="EdgeRenderer";var Jd=v.memo(Do);const ef=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tf({children:e}){const t=J(ef);return D.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function nf(e){const t=dr(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const rf={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},To=({nodeId:e,handleType:t,style:n,type:r=$e.Bezier,CustomComponent:i,connectionStatus:o})=>{var R,z,H;const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=J(v.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),oe),d=(R=s==null?void 0:s[te])==null?void 0:R.handleBounds;let f=d==null?void 0:d[t];if(l===Ze.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!s||!f)return null;const h=a?f.find(k=>k.id===a):f[0],g=h?h.x+h.width/2:(s.width??0)/2,y=h?h.y+h.height/2:s.height??0,w=(((z=s.positionAbsolute)==null?void 0:z.x)??0)+g,x=(((H=s.positionAbsolute)==null?void 0:H.y)??0)+y,E=h==null?void 0:h.position,A=E?rf[E]:null;if(!E||!A)return null;if(i)return D.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:w,fromY:x,toX:c,toY:u,fromPosition:E,toPosition:A,connectionStatus:o});let b="";const T={sourceX:w,sourceY:x,sourcePosition:E,targetX:c,targetY:u,targetPosition:A};return r===$e.Bezier?[b]=Ji(T):r===$e.Step?[b]=Ln({...T,borderRadius:0}):r===$e.SmoothStep?[b]=Ln(T):r===$e.SimpleBezier?[b]=Qi(T):b=`M${w},${x} ${c},${u}`,D.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};To.displayName="ConnectionLine";const of=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function sf({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:c,connectionStatus:u}=J(of,oe);return!(i&&o&&a&&s)?null:D.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},D.createElement("g",{className:se(["react-flow__connection",u])},D.createElement(To,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function di(e,t){return v.useRef(null),re(),v.useMemo(()=>t(e),[e])}const Mo=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:y,onSelectionEnd:w,connectionLineType:x,connectionLineStyle:E,connectionLineComponent:A,connectionLineContainerStyle:b,selectionKeyCode:T,selectionOnDrag:R,selectionMode:z,multiSelectionKeyCode:H,panActivationKeyCode:k,zoomActivationKeyCode:C,deleteKeyCode:$,onlyRenderVisibleElements:B,elementsSelectable:P,selectNodesOnDrag:p,defaultViewport:_,translateExtent:N,minZoom:I,maxZoom:V,preventScrolling:S,defaultMarkerColor:M,zoomOnScroll:j,zoomOnPinch:F,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:K,zoomOnDoubleClick:X,panOnDrag:W,onPaneClick:G,onPaneMouseEnter:ee,onPaneMouseMove:Z,onPaneMouseLeave:he,onPaneScroll:ue,onPaneContextMenu:pe,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:ve,onEdgeMouseLeave:Q,onReconnect:O,onReconnectStart:ce,onReconnectEnd:je,reconnectRadius:mt,noDragClassName:Qe,noWheelClassName:Je,noPanClassName:_e,elevateEdgesOnSelect:et,disableKeyboardA11y:Fe,nodeOrigin:He,nodeExtent:tt,rfId:nt})=>{const gt=di(e,Id),ie=di(t,Pd);return nf(o),D.createElement(Rd,{onPaneClick:G,onPaneMouseEnter:ee,onPaneMouseMove:Z,onPaneMouseLeave:he,onPaneContextMenu:pe,onPaneScroll:ue,deleteKeyCode:$,selectionKeyCode:T,selectionOnDrag:R,selectionMode:z,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:H,panActivationKeyCode:k,zoomActivationKeyCode:C,elementsSelectable:P,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:j,zoomOnPinch:F,zoomOnDoubleClick:X,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:K,panOnDrag:W,defaultViewport:_,translateExtent:N,minZoom:I,maxZoom:V,onSelectionContextMenu:g,preventScrolling:S,noDragClassName:Qe,noWheelClassName:Je,noPanClassName:_e,disableKeyboardA11y:Fe},D.createElement(tf,null,D.createElement(Jd,{edgeTypes:ie,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:B,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:ve,onEdgeMouseLeave:Q,onReconnect:O,onReconnectStart:ce,onReconnectEnd:je,reconnectRadius:mt,defaultMarkerColor:M,noPanClassName:_e,elevateEdgesOnSelect:!!et,disableKeyboardA11y:Fe,rfId:nt},D.createElement(sf,{style:E,type:x,component:A,containerStyle:b})),D.createElement("div",{className:"react-flow__edgelabel-renderer"}),D.createElement(Vd,{nodeTypes:gt,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:p,onlyRenderVisibleElements:B,noPanClassName:_e,noDragClassName:Qe,disableKeyboardA11y:Fe,nodeOrigin:He,nodeExtent:tt,rfId:nt})))};Mo.displayName="GraphView";var af=v.memo(Mo);const Yn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Re={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Yn,nodeExtent:Yn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ze.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Iu,isValidConnection:void 0},cf=()=>Ks((e,t)=>({...Re,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Cn(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?Cn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c==null?void 0:c.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((y,w)=>{const x=i.get(w.id);if(x!=null&&x.hidden)i.set(x.id,{...x,[te]:{...x[te],handleBounds:void 0}});else if(x){const E=tr(w.nodeElement);!!(E.width&&E.height&&(x.width!==E.width||x.height!==E.height||w.forceUpdate))&&(i.set(x.id,{...x,[te]:{...x[te],handleBounds:{source:ii(".source",w.nodeElement,f,u),target:ii(".target",w.nodeElement,f,u)}},...E}),y.push({id:x.id,type:"dimensions",dimensions:E}))}return y},[]);xo(i,u);const g=s||o&&!s&&wo(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(o){const u=Sd(n,a()),l=Cn(u,i,s,c);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(c=>Ie(c,!0)):(s=at(o(),n),a=at(i,[])),Ut({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(c=>Ie(c,!0)):(s=at(i,n),a=at(o(),[])),Ut({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),s=n||o(),a=r||i,c=s.map(l=>(l.selected=!1,Ie(l.id,!1))),u=a.map(l=>Ie(l.id,!1));Ut({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>Ie(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Ie(a.id,!1));Ut({changedNodes:o,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=nr(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=ze.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[i,o]],d=s==null?void 0:s.constrain()(u,l,c);return s.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Re.connectionNodeId,connectionHandleId:Re.connectionHandleId,connectionHandleType:Re.connectionHandleType,connectionStatus:Re.connectionStatus,connectionStartHandle:Re.connectionStartHandle,connectionEndHandle:Re.connectionEndHandle}),reset:()=>e({...Re})}),Object.is),Ro=({children:e})=>{const t=v.useRef(null);return t.current||(t.current=cf()),D.createElement(_u,{value:t.current},e)};Ro.displayName="ReactFlowProvider";const ko=({children:e})=>v.useContext(fn)?D.createElement(D.Fragment,null,e):D.createElement(Ro,null,e);ko.displayName="ReactFlowWrapper";const lf={input:uo,default:On,output:ho,group:ur},uf={default:sn,straight:sr,step:or,smoothstep:hn,simplebezier:ir},df=[0,0],ff=[15,15],hf={x:0,y:0,zoom:1},pf={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Io=v.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=lf,edgeTypes:s=uf,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:b,onNodeContextMenu:T,onNodeDoubleClick:R,onNodeDragStart:z,onNodeDrag:H,onNodeDragStop:k,onNodesDelete:C,onEdgesDelete:$,onSelectionChange:B,onSelectionDragStart:P,onSelectionDrag:p,onSelectionDragStop:_,onSelectionContextMenu:N,onSelectionStart:I,onSelectionEnd:V,connectionMode:S=Ze.Strict,connectionLineType:M=$e.Bezier,connectionLineStyle:j,connectionLineComponent:F,connectionLineContainerStyle:q,deleteKeyCode:L="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:X=!1,selectionMode:W=kt.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:ee=rn()?"Meta":"Control",zoomActivationKeyCode:Z=rn()?"Meta":"Control",snapToGrid:he=!1,snapGrid:ue=ff,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:de=!0,nodesDraggable:ne,nodesConnectable:ve,nodesFocusable:Q,nodeOrigin:O=df,edgesFocusable:ce,edgesUpdatable:je,elementsSelectable:mt,defaultViewport:Qe=hf,minZoom:Je=.5,maxZoom:_e=2,translateExtent:et=Yn,preventScrolling:Fe=!0,nodeExtent:He,defaultMarkerColor:tt="#b1b1b7",zoomOnScroll:nt=!0,zoomOnPinch:gt=!0,panOnScroll:ie=!1,panOnScrollSpeed:me=.5,panOnScrollMode:Pe=Ke.Free,zoomOnDoubleClick:Be=!0,panOnDrag:Le=!0,onPaneClick:Ce,onPaneMouseEnter:be,onPaneMouseMove:yt,onPaneMouseLeave:pn,onPaneScroll:xt,onPaneContextMenu:mn,children:pr,onEdgeContextMenu:qe,onEdgeDoubleClick:jo,onEdgeMouseEnter:Fo,onEdgeMouseMove:Ho,onEdgeMouseLeave:Po,onEdgeUpdate:Bo,onEdgeUpdateStart:Lo,onEdgeUpdateEnd:qo,onReconnect:Uo,onReconnectStart:Oo,onReconnectEnd:Ko,reconnectRadius:Yo=10,edgeUpdaterRadius:Xo=10,onNodesChange:Wo,onEdgesChange:Go,noDragClassName:Zo="nodrag",noWheelClassName:Qo="nowheel",noPanClassName:mr="nopan",fitView:Jo=!1,fitViewOptions:es,connectOnClick:ts=!0,attributionPosition:ns,proOptions:rs,defaultEdgeOptions:is,elevateNodesOnSelect:os=!0,elevateEdgesOnSelect:ss=!1,disableKeyboardA11y:gr=!1,autoPanOnConnect:as=!0,autoPanOnNodeDrag:cs=!0,connectionRadius:ls=20,isValidConnection:us,onError:ds,style:fs,id:yr,nodeDragThreshold:hs,...ps},ms)=>{const gn=yr||"1";return D.createElement("div",{...ps,style:{...fs,...pf},ref:ms,className:se(["react-flow",i]),"data-testid":"rf__wrapper",id:yr},D.createElement(ko,null,D.createElement(af,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:b,onNodeContextMenu:T,onNodeDoubleClick:R,nodeTypes:o,edgeTypes:s,connectionLineType:M,connectionLineStyle:j,connectionLineComponent:F,connectionLineContainerStyle:q,selectionKeyCode:K,selectionOnDrag:X,selectionMode:W,deleteKeyCode:L,multiSelectionKeyCode:ee,panActivationKeyCode:G,zoomActivationKeyCode:Z,onlyRenderVisibleElements:pe,selectNodesOnDrag:de,defaultViewport:Qe,translateExtent:et,minZoom:Je,maxZoom:_e,preventScrolling:Fe,zoomOnScroll:nt,zoomOnPinch:gt,zoomOnDoubleClick:Be,panOnScroll:ie,panOnScrollSpeed:me,panOnScrollMode:Pe,panOnDrag:Le,onPaneClick:Ce,onPaneMouseEnter:be,onPaneMouseMove:yt,onPaneMouseLeave:pn,onPaneScroll:xt,onPaneContextMenu:mn,onSelectionContextMenu:N,onSelectionStart:I,onSelectionEnd:V,onEdgeContextMenu:qe,onEdgeDoubleClick:jo,onEdgeMouseEnter:Fo,onEdgeMouseMove:Ho,onEdgeMouseLeave:Po,onReconnect:Uo??Bo,onReconnectStart:Oo??Lo,onReconnectEnd:Ko??qo,reconnectRadius:Yo??Xo,defaultMarkerColor:tt,noDragClassName:Zo,noWheelClassName:Qo,noPanClassName:mr,elevateEdgesOnSelect:ss,rfId:gn,disableKeyboardA11y:gr,nodeOrigin:O,nodeExtent:He}),D.createElement(nd,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:ne,nodesConnectable:ve,nodesFocusable:Q,edgesFocusable:ce,edgesUpdatable:je,elementsSelectable:mt,elevateNodesOnSelect:os,minZoom:Je,maxZoom:_e,nodeExtent:He,onNodesChange:Wo,onEdgesChange:Go,snapToGrid:he,snapGrid:ue,connectionMode:S,translateExtent:et,connectOnClick:ts,defaultEdgeOptions:is,fitView:Jo,fitViewOptions:es,onNodesDelete:C,onEdgesDelete:$,onNodeDragStart:z,onNodeDrag:H,onNodeDragStop:k,onSelectionDrag:p,onSelectionDragStart:P,onSelectionDragStop:_,noPanClassName:mr,nodeOrigin:O,rfId:gn,autoPanOnConnect:as,autoPanOnNodeDrag:cs,onError:ds,connectionRadius:ls,isValidConnection:us,nodeDragThreshold:hs}),D.createElement(ed,{onSelectionChange:B}),pr,D.createElement(Au,{proOptions:rs,position:ns}),D.createElement(ad,{rfId:gn,disableKeyboardA11y:gr})))});Io.displayName="ReactFlow";function mf(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},D.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function gf(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},D.createElement("path",{d:"M0 0h32v4.2H0z"}))}function yf(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},D.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function xf(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},D.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function wf(){return D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},D.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Ct=({children:e,className:t,...n})=>D.createElement("button",{type:"button",className:se(["react-flow__controls-button",t]),...n},e);Ct.displayName="ControlButton";const vf=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),$o=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:l,position:d="bottom-left"})=>{const f=re(),[h,g]=v.useState(!1),{isInteractive:y,minZoomReached:w,maxZoomReached:x}=J(vf,oe),{zoomIn:E,zoomOut:A,fitView:b}=dr();if(v.useEffect(()=>{g(!0)},[]),!h)return null;const T=()=>{E(),o==null||o()},R=()=>{A(),s==null||s()},z=()=>{b(i),a==null||a()},H=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)};return D.createElement(Oi,{className:se(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&D.createElement(D.Fragment,null,D.createElement(Ct,{onClick:T,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:x},D.createElement(mf,null)),D.createElement(Ct,{onClick:R,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},D.createElement(gf,null))),n&&D.createElement(Ct,{className:"react-flow__controls-fitview",onClick:z,title:"fit view","aria-label":"fit view"},D.createElement(yf,null)),r&&D.createElement(Ct,{className:"react-flow__controls-interactive",onClick:H,title:"toggle interactivity","aria-label":"toggle interactivity"},y?D.createElement(wf,null):D.createElement(xf,null)),l)};$o.displayName="Controls";var bf=v.memo($o),xe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xe||(xe={}));function Sf({color:e,dimensions:t,lineWidth:n}){return D.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Ef({color:e,radius:t}){return D.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Nf={[xe.Dots]:"#91919a",[xe.Lines]:"#eee",[xe.Cross]:"#e2e2e2"},_f={[xe.Dots]:1,[xe.Lines]:1,[xe.Cross]:6},Cf=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function zo({id:e,variant:t=xe.Dots,gap:n=20,size:r,lineWidth:i=1,offset:o=2,color:s,style:a,className:c}){const u=v.useRef(null),{transform:l,patternId:d}=J(Cf,oe),f=s||Nf[t],h=r||_f[t],g=t===xe.Dots,y=t===xe.Cross,w=Array.isArray(n)?n:[n,n],x=[w[0]*l[2]||1,w[1]*l[2]||1],E=h*l[2],A=y?[E,E]:x,b=g?[E/o,E/o]:[A[0]/o,A[1]/o];return D.createElement("svg",{className:se(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},D.createElement("pattern",{id:d+e,x:l[0]%x[0],y:l[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},g?D.createElement(Ef,{color:f,radius:E/o}):D.createElement(Sf,{dimensions:A,color:f,lineWidth:i})),D.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}zo.displayName="Background";var Af=v.memo(zo);const fi=(e,t)=>{let n=0;return(...r)=>{const i=Date.now();if(i-n>=t)return n=i,e(...r)}},Df=(e,t)=>{if(!e||!t||t.length<2)return e;const n=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(n,'<span class="highlight">$1</span>')},Mn=e=>{switch(e.toLowerCase()){case"boolean":return"#FF5252";case"integer":case"float":case"number":case"vector":case"vector2d":case"vector4":case"transform":return"#4FC3F7";case"string":case"name":case"text":return"#81C784";case"exec":return"#D83B3B";case"object":case"actor":case"component":return"#CE93D8";case"struct":return"#FFB74D";case"enum":return"#FFF176";case"array":case"set":case"map":return"#7986CB";default:return"#B0BEC5"}},Tf=e=>{switch(e.toLowerCase()){case"debug":return"#E53E3E";case"math":return"#3182CE";case"string":return"#38A169";case"utility":return"#D69E2E";case"array":return"#805AD5";default:return"#4A5568"}},Vo=v.memo(({data:e,isConnectable:t})=>{const{node:n,detailed:r=!1,highlightTerm:i="",minimal:o=!1}=e,[s,a]=v.useState(null),c=v.useRef(null),u=v.useMemo(()=>{if(i&&n.name)return{__html:Df(n.name,i)}},[n.name,i]),l=v.useMemo(()=>({backgroundColor:Tf(n.category)}),[n.category]),d=v.useCallback(fi((g,y)=>{a({id:g,description:y})},50),[]),f=v.useCallback(fi(()=>{a(null)},50),[]);v.useMemo(()=>({background:"#ffffff",top:"14px",width:"12px",height:"12px",borderRadius:"2px"}),[]);const h=v.useMemo(()=>`blueprint-node ${r?"detailed":""} ${o?"minimal":""}`,[r,o]);return m.jsxs("div",{className:h,ref:c,children:[m.jsxs("div",{className:"blueprint-node-header node-header",style:l,children:[u?m.jsx("span",{className:"blueprint-node-title",dangerouslySetInnerHTML:u}):m.jsx("span",{className:"blueprint-node-title",children:n.name}),m.jsx("span",{className:"blueprint-node-category",children:n.category})]}),m.jsx("div",{className:"blueprint-node-content",children:r&&m.jsx("div",{className:"blueprint-node-pins",children:m.jsxs("div",{className:"inline-pins-container",children:[(n.inputs||[]).map((g,y)=>{const w=n.outputs&&n.outputs[y],x=v.useMemo(()=>({background:g.isExec?"#ffffff":Mn(g.type),width:g.isExec?"12px":"8px",height:g.isExec?"12px":"8px",borderRadius:g.isExec?"2px":"50%"}),[g.isExec,g.type]),E=w?v.useMemo(()=>({background:w.isExec?"#ffffff":Mn(w.type),width:w.isExec?"12px":"8px",height:w.isExec?"12px":"8px",borderRadius:w.isExec?"2px":"50%"}),[w.isExec,w.type]):null;return m.jsxs("div",{className:"inline-pins-row",children:[m.jsxs("div",{className:"blueprint-node-pin input-pin",onMouseEnter:()=>d(`input-${y}`,g.description),onMouseLeave:f,children:[m.jsx(We,{type:"target",position:U.Left,id:`input-${y}`,style:x,isConnectable:t,className:g.isExec?"exec":""}),m.jsxs("div",{className:"blueprint-node-pin-label",children:[m.jsx("span",{className:"pin-name",title:g.name,children:g.name}),m.jsx("span",{className:"pin-type",title:g.type,children:g.type})]})]}),w&&m.jsxs("div",{className:"blueprint-node-pin output-pin",onMouseEnter:()=>d(`output-${y}`,w.description),onMouseLeave:f,children:[m.jsxs("div",{className:"blueprint-node-pin-label",children:[m.jsx("span",{className:"pin-name",title:w.name,children:w.name}),m.jsx("span",{className:"pin-type",title:w.type,children:w.type})]}),m.jsx(We,{type:"source",position:U.Right,id:`output-${y}`,style:E,isConnectable:t,className:w.isExec?"exec":""})]})]},`pin-row-${y}`)}),n.outputs&&n.inputs&&n.outputs.length>n.inputs.length&&n.outputs.slice(n.inputs.length).map((g,y)=>{const w=y+n.inputs.length,x=v.useMemo(()=>({background:g.isExec?"#ffffff":Mn(g.type),width:g.isExec?"12px":"8px",height:g.isExec?"12px":"8px",borderRadius:g.isExec?"2px":"50%"}),[g.isExec,g.type]);return m.jsxs("div",{className:"inline-pins-row",children:[m.jsx("div",{className:"blueprint-node-pin empty-input"}),m.jsxs("div",{className:"blueprint-node-pin output-pin",onMouseEnter:()=>d(`output-${w}`,g.description),onMouseLeave:f,children:[m.jsxs("div",{className:"blueprint-node-pin-label",children:[m.jsx("span",{className:"pin-name",title:g.name,children:g.name}),m.jsx("span",{className:"pin-type",title:g.type,children:g.type})]}),m.jsx(We,{type:"source",position:U.Right,id:`output-${w}`,style:x,isConnectable:t,className:g.isExec?"exec":""})]})]},`extra-output-${y}`)})]})})}),s&&m.jsx("div",{className:"pin-tooltip",style:{position:"absolute",top:(s.id.includes("input"),-30),left:s.id.includes("input")?30:"auto",right:s.id.includes("output")?30:"auto",opacity:1},children:s.description})]})}),Kt=[{id:"debug",name:"Debug & Utilities",description:"Nodes for debugging and basic utility operations"},{id:"math",name:"Math & Calculations",description:"Mathematical operations and calculations"},{id:"string",name:"String Operations",description:"Text and string manipulation nodes"},{id:"utility",name:"Utility",description:"General purpose utility nodes"},{id:"array",name:"Array & Collection Operations",description:"Operations for working with arrays and collections"}],hr=[{id:"hello-world",name:"Hello World",category:"debug",shortDescription:'Prints "Hello, World!" to the output log',longDescription:'A simple test node that prints "Hello, World!" to the output log. Used to validate plugin architecture.',complexity:"simple",inputs:[{name:"Execute",type:"Exec",description:"Triggers the node execution",isExec:!0}],outputs:[{name:"Then",type:"Exec",description:"Executed after the message is printed",isExec:!0}],errorHandling:"Always succeeds, no validation required.",searchKeywords:["debug","print","log","hello","test"]},{id:"is-nearly-equal",name:"Is Nearly Equal (Float)",category:"math",shortDescription:"Checks if two floats are nearly equal within tolerance",longDescription:"Compares two float values with a tolerance to account for floating point precision errors. Addresses common issues when comparing floating-point numbers for equality.",complexity:"simple",inputs:[{name:"A",type:"Float",description:"First value to compare"},{name:"B",type:"Float",description:"Second value to compare"},{name:"ErrorTolerance",type:"Float",description:"Maximum allowed difference for considering the values as equal",defaultValue:"0.0000001"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the difference between A and B is less than or equal to ErrorTolerance"}],examples:[{title:"Compare calculated values",description:"Use to compare values that may have minor calculation differences.",code:`Math.Sin(1.0) -> Is Nearly Equal (A)
Math.Sin(1.0 + 2) -> Is Nearly Equal (B)
0.0000001 -> Is Nearly Equal (ErrorTolerance)`}],errorHandling:"Handles NaN and Infinity values appropriately.",performanceNotes:"Very efficient operation with minimal overhead.",searchKeywords:["float","compare","equal","tolerance","approximate","precision"]},{id:"is-nearly-zero",name:"Is Nearly Zero (Float)",category:"math",shortDescription:"Checks if value is approximately zero",longDescription:"Tests if a float value is close enough to zero within a specified tolerance. Useful for checking if calculations result in effectively zero values.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"Value to check if close to zero"},{name:"ErrorTolerance",type:"Float",description:'Maximum absolute value to consider as "nearly zero"',defaultValue:"0.0000001"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the absolute value is less than or equal to ErrorTolerance"}],examples:[{title:"Checking for small residuals",description:"When an iterative calculation should reach zero but might have small residual values.",code:"Calculate Residual -> Is Nearly Zero -> Branch"}],searchKeywords:["zero","float","epsilon","tolerance","math","calculation"]},{id:"degrees-to-radians",name:"Degrees To Radians",category:"math",shortDescription:"Convert angle from degrees to radians",longDescription:"Converts an angle value from degrees to radians. Useful for mathematical functions that require radian input.",complexity:"simple",inputs:[{name:"Degrees",type:"Float",description:"The angle in degrees"}],outputs:[{name:"Return Value",type:"Float",description:"The angle in radians"}],examples:[{title:"Convert user input to radians",description:"Use this node when user inputs angles in degrees but calculations require radians.",code:`90.0 -> Degrees To Radians -> Sin
// Result will be 1.0 (sin of 90 degrees)`}],searchKeywords:["conversion","angle","degrees","radians","math","trigonometry"]},{id:"radians-to-degrees",name:"Radians To Degrees",category:"math",shortDescription:"Convert angle from radians to degrees",longDescription:"Converts an angle value from radians to degrees. Useful for displaying radian values in a more human-readable format.",complexity:"simple",inputs:[{name:"Radians",type:"Float",description:"The angle in radians"}],outputs:[{name:"Return Value",type:"Float",description:"The angle in degrees"}],examples:[{title:"Display result in degrees",description:"Convert math calculation results from radians to degrees for display.",code:"Math.Atan2(Y, X) -> Radians To Degrees -> Display Angle"}],searchKeywords:["conversion","angle","radians","degrees","math","trigonometry"]},{id:"random-vector-in-cone-degrees",name:"Random Vector in Cone (Degrees)",category:"math",shortDescription:"Generate random vector within cone",longDescription:"Creates a random direction vector within a cone angle. Useful for spawning particles, creating spread patterns, or simulating inaccuracy.",complexity:"moderate",inputs:[{name:"Direction",type:"Vector",description:"Base direction of the cone"},{name:"ConeHalfAngleDegrees",type:"Float",description:"Half-angle of cone in degrees"},{name:"bIsSquished",type:"Boolean",description:"If true, creates a non-uniform cone with different angles in Y and Z",defaultValue:"false"},{name:"VerticalConeHalfAngleDegrees",type:"Float",description:"Half-angle of cone in vertical direction (only used if bIsSquished is true)",defaultValue:"45.0"}],outputs:[{name:"Return Value",type:"Vector",description:"Random normalized vector within the specified cone"}],examples:[{title:"Bullet spread simulation",description:"Create a random spread for weapon fire.",code:"Get Forward Vector -> Random Vector in Cone (Degrees) -> Spawn Projectile"}],errorHandling:"Validates Direction is not a zero vector, and normalizes it if needed.",searchKeywords:["random","vector","cone","direction","spread","angle","degrees"]},{id:"random-vector-in-cone-radians",name:"Random Vector in Cone (Radians)",category:"math",shortDescription:"Generate random vector within cone using radians",longDescription:"Creates a random direction vector within a cone angle using radians. Alternative version of the Random Vector in Cone node that uses radians instead of degrees.",complexity:"moderate",inputs:[{name:"Direction",type:"Vector",description:"Base direction of the cone"},{name:"ConeHalfAngleRadians",type:"Float",description:"Half-angle of cone in radians"},{name:"bIsSquished",type:"Boolean",description:"If true, creates a non-uniform cone with different angles in Y and Z",defaultValue:"false"},{name:"VerticalConeHalfAngleRadians",type:"Float",description:"Half-angle of cone in vertical direction (only used if bIsSquished is true)",defaultValue:"0.7853982"}],outputs:[{name:"Return Value",type:"Vector",description:"Random normalized vector within the specified cone"}],examples:[{title:"Bullet spread simulation",description:"Create a random spread for weapon fire using radians.",code:"Get Forward Vector -> Random Vector in Cone (Radians) -> Spawn Projectile"}],errorHandling:"Validates Direction is not a zero vector, and normalizes it if needed.",searchKeywords:["random","vector","cone","direction","spread","angle","radians"]},{id:"round-to-nearest-increment",name:"Round To Nearest (Increment)",category:"math",shortDescription:"Rounds a number to the nearest multiple of a specified increment",longDescription:"Rounds a floating-point value to the nearest multiple of a specified increment. Useful for snapping values to grids or intervals in level design, UI positioning, or quantized values.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to round"},{name:"Increment",type:"Float",description:"The increment to round to",defaultValue:"1.0"}],outputs:[{name:"Return Value",type:"Float",description:"The rounded value"}],examples:[{title:"Snap to grid",description:"Round a world position to the nearest 5 units.",code:"Get Actor Location -> Round To Nearest (Increment=5.0) -> Set Actor Location"},{title:"Price rounding",description:"Round a calculated price to nearest $0.25.",code:`12.73 -> Round To Nearest (Increment=0.25) -> Display Price
// Result will be 12.75`}],errorHandling:"Validates that Increment is not zero. Returns the input value if Increment is invalid.",searchKeywords:["round","increment","snap","grid","quantize","multiple"]},{id:"round-away-from-zero",name:"Round Away From Zero",category:"math",shortDescription:"Rounds away from zero instead of to nearest even",longDescription:"Rounds a floating-point value away from zero. This differs from standard rounding which typically rounds to the nearest even number for halfway cases. This node always rounds outward from zero for consistent behavior.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to round"}],outputs:[{name:"Return Value",type:"Float",description:"The rounded value"}],examples:[{title:"Consistent rounding",description:"Round values away from zero consistently.",code:`-1.5 -> Round Away From Zero -> Print String
// Result will be -2
1.5 -> Round Away From Zero -> Print String
// Result will be 2`}],searchKeywords:["round","away","zero","consistent","ceiling","floor"]},{id:"is-prime-number",name:"Is Prime Number",category:"math",shortDescription:"Checks if an integer is a prime number",longDescription:"Determines if a given integer is a prime number (divisible only by 1 and itself). Useful for procedural generation algorithms, cryptography, or puzzle gameplay mechanics.",complexity:"moderate",inputs:[{name:"Value",type:"Integer",description:"The integer to check"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the number is prime"}],examples:[{title:"Procedural generation",description:"Use prime checking to create unique patterns.",code:`Get Current Cell Index -> Is Prime Number -> Branch
// Different behavior for prime-indexed cells`}],errorHandling:"Numbers less than 2 are never prime. Negative numbers are converted to their absolute value.",performanceNotes:"Uses optimized algorithm for checking primality, but can be slow for very large numbers.",searchKeywords:["prime","number","integer","divisible","math","check"]},{id:"greatest-common-divisor",name:"Greatest Common Divisor",category:"math",shortDescription:"Calculates the GCD of an array of integers",longDescription:"Finds the largest positive integer that divides all the input integers without a remainder. Useful for simplifying fractions, finding common factors, and various mathematical algorithms.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Integers",description:"Array of integers to find the GCD of"}],outputs:[{name:"Return Value",type:"Integer",description:"The GCD of all values in the array, or 0 if the array is empty"}],examples:[{title:"Simplify fractions",description:"Find the simplest form of a fraction.",code:"GCD of [Numerator, Denominator] -> Divide Both Values"}],errorHandling:"Returns 0 if the array is empty. Uses absolute values for calculation (ignores signs).",searchKeywords:["gcd","greatest","common","divisor","math","factor"]},{id:"least-common-multiple",name:"Least Common Multiple",category:"math",shortDescription:"Calculates the LCM of an array of integers",longDescription:"Finds the smallest positive integer that is divisible by all the input integers. Useful for finding common periods, synchronizing repeating events, and various mathematical applications.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Integers",description:"Array of integers to find the LCM of"}],outputs:[{name:"Return Value",type:"Integer",description:"The LCM of all values in the array, or 0 if the array is empty or contains 0"}],examples:[{title:"Find cycle repetition",description:"Calculate when two repeating events will coincide.",code:"LCM of [Cycle1Duration, Cycle2Duration] -> Next Synchronization Time"}],errorHandling:"Returns 0 if the array is empty. Uses absolute values for calculation (ignores signs).",performanceNotes:"Uses the GCD to efficiently calculate LCM and avoids integer overflow where possible.",searchKeywords:["lcm","least","common","multiple","math","cycle"]},{id:"angle-between-vectors-signed",name:"Angle Between Vectors (Signed)",category:"math",shortDescription:"Calculates the signed angle between two vectors in a 2D plane",longDescription:"Computes the signed angle between two vectors, providing information about whether the rotation is clockwise or counter-clockwise. This differs from the standard angle calculation which only returns the unsigned (absolute) angle.",complexity:"moderate",inputs:[{name:"From",type:"Vector",description:"Starting vector"},{name:"To",type:"Vector",description:"Target vector"},{name:"AxisZ",type:"Vector",description:"Optional Z axis for the 2D plane",defaultValue:"(0,0,1)"}],outputs:[{name:"Return Value",type:"Float",description:"Signed angle in degrees between the vectors (-180 to 180)"}],examples:[{title:"Character steering",description:"Determine whether to turn left or right to face a target.",code:`Get Forward Vector -> Angle Between Vectors (Signed) (From)
Get Direction to Target -> Angle Between Vectors (Signed) (To)
// Negative angle means turn left, positive means turn right`}],errorHandling:"Returns 0 if either vector is too small (close to zero). Normalizes input vectors automatically.",searchKeywords:["angle","vector","signed","direction","rotation","clockwise"]},{id:"array-average-float",name:"Average (Float Array)",category:"math",shortDescription:"Calculates the average (arithmetic mean) of an array of float values",longDescription:"Computes the arithmetic mean of an array of float values. Useful for statistical operations and data analysis.",complexity:"simple",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The arithmetic mean of the values"}],examples:[{title:"Smoothed sensor reading",description:"Average multiple sensor readings to reduce noise.",code:"Recent Temperature Readings -> Average (Float Array) -> Display Temperature"}],errorHandling:"Returns 0 if the array is empty. Ignores non-numeric values in mixed arrays.",searchKeywords:["average","mean","arithmetic","statistics","array","float"]},{id:"array-average-vector",name:"Average (Vector Array)",category:"math",shortDescription:"Calculates the average (arithmetic mean) of an array of vectors",longDescription:"Computes the arithmetic mean vector of an array of vectors. Calculates a single vector with the average of each component.",complexity:"simple",inputs:[{name:"Vectors",type:"Array of Vectors",description:"Array of vectors"}],outputs:[{name:"Return Value",type:"Vector",description:"The arithmetic mean vector"}],examples:[{title:"Calculate center position",description:"Find the center point of multiple actors.",code:"Get Multiple Actor Locations -> Average (Vector Array) -> Spawn Effect at Center"}],errorHandling:"Returns Zero Vector if the array is empty.",searchKeywords:["average","mean","arithmetic","statistics","array","vector","center"]},{id:"standard-deviation",name:"Standard Deviation",category:"math",shortDescription:"Calculates the standard deviation of a float array",longDescription:"Computes the standard deviation of a set of numeric values, measuring the amount of variation or dispersion from the average. Useful for statistical analysis, data clustering, and measuring data spread.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The standard deviation of the values"}],examples:[{title:"Detect data outliers",description:"Identify values that are outside the normal range.",code:`Data Points -> Standard Deviation -> Calculate Threshold
Data Points -> For Each -> Branch (Value > Threshold)`}],errorHandling:"Returns 0 if the array has fewer than 2 elements. Ignores non-numeric values.",performanceNotes:"Requires two passes through the data (one for mean, one for squared differences).",searchKeywords:["standard","deviation","statistics","variance","spread","distribution"]},{id:"variance",name:"Variance",category:"math",shortDescription:"Calculates the variance of a float array",longDescription:"Computes the variance of a set of numeric values, measuring how far the values are spread out from their average. The variance is the square of the standard deviation, useful for statistical analysis.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The variance of the values"}],examples:[{title:"Compare data sets",description:"Compare the variability of different distributions.",code:`Dataset A -> Variance -> Compare (A)
Dataset B -> Variance -> Compare (B)`}],errorHandling:"Returns 0 if the array has fewer than 2 elements. Ignores non-numeric values.",performanceNotes:"Requires two passes through the data (one for mean, one for squared differences).",searchKeywords:["variance","statistics","spread","distribution","squared","deviation"]},{id:"logarithm-base-n",name:"Logarithm (Base N)",category:"math",shortDescription:"Logarithm to an arbitrary base",longDescription:"Calculates the logarithm of a value using any specified base. This extends beyond the standard natural logarithm (base e) and base-10 logarithm functions built into the engine.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to calculate the logarithm of (must be positive)"},{name:"Base",type:"Float",description:"The logarithm base (must be positive and not 1)",defaultValue:"10.0"}],outputs:[{name:"Return Value",type:"Float",description:"The logarithm of Value with the specified Base"}],examples:[{title:"Custom logarithmic scaling",description:"Scale values using a custom logarithmic function.",code:"Raw Value -> Logarithm (Base N) (Base=2) -> Scale Result"}],errorHandling:"Validates Value is positive and Base is valid (positive and not 1). Returns 0 for invalid inputs.",searchKeywords:["logarithm","log","base","math","exponent","scale"]},{id:"clamp-angle-radians",name:"Clamp Angle (Radians)",category:"math",shortDescription:"Clamps an angle to a specific range",longDescription:"Normalizes an angle in radians to a specified range, such as 0 to 2 or - to . Useful for angle calculations, rotations, and ensuring consistent angle formats.",complexity:"simple",inputs:[{name:"Angle",type:"Float",description:"The angle in radians to clamp"},{name:"MinAngle",type:"Float",description:"Minimum angle of the range",defaultValue:"0.0"},{name:"MaxAngle",type:"Float",description:"Maximum angle of the range",defaultValue:"6.28318"}],outputs:[{name:"ClampedAngle",type:"Float",description:"The angle clamped to the specified range"}],examples:[{title:"Normalize rotation",description:"Ensure a rotation angle stays within the - to  range.",code:"Current Rotation Radians -> Clamp Angle (Radians) (Min=-3.14159, Max=3.14159) -> Set Rotation"}],errorHandling:"Validates that MinAngle is less than MaxAngle and that the range is not more than a full circle (2).",searchKeywords:["angle","clamp","normalize","radians","rotation","range"]},{id:"to-title-case",name:"To Title Case",category:"string",shortDescription:"Converts a string to title case",longDescription:"Transforms a string to title case format where the first letter of each word is capitalized. Useful for formatting titles, names, and other text that requires title capitalization.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to convert"}],outputs:[{name:"Return Value",type:"String",description:"The title-cased string"}],examples:[{title:"Format heading text",description:"Convert a string to proper title case for UI elements.",code:`"the quick brown fox" -> To Title Case -> Set Text
// Result will be "The Quick Brown Fox"`}],searchKeywords:["title","case","string","capitalize","format","text"]},{id:"to-sentence-case",name:"To Sentence Case",category:"string",shortDescription:"Converts a string to sentence case",longDescription:"Transforms a string to sentence case format where the first letter of each sentence is capitalized. Useful for formatting body text, paragraphs, and other prose-style content.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to convert"}],outputs:[{name:"Return Value",type:"String",description:"The sentence-cased string"}],examples:[{title:"Format paragraph text",description:"Convert text to proper sentence case for dialog or descriptions.",code:`"hello world. this is a test." -> To Sentence Case -> Set Description
// Result will be "Hello world. This is a test."`}],searchKeywords:["sentence","case","string","capitalize","format","text"]},{id:"invert-case",name:"Invert Case",category:"string",shortDescription:"Inverts the case of each letter in a string",longDescription:"Reverses the case of each letter in a string, making uppercase letters lowercase and lowercase letters uppercase. Useful for text effects, stylization, and certain text processing operations.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to invert the case of"}],outputs:[{name:"Return Value",type:"String",description:"The case-inverted string"}],examples:[{title:"Create visual effect",description:"Create alternating case for visual emphasis.",code:`"Hello World" -> Invert Case -> Set Text
// Result will be "hELLO wORLD"`}],searchKeywords:["invert","case","string","flip","uppercase","lowercase"]},{id:"string-similarity",name:"String Similarity",category:"string",shortDescription:"Returns a percentage representing the similarity between two strings",longDescription:"Calculates how similar two strings are and returns a percentage score. Uses the Levenshtein distance metric to determine the number of edits needed to transform one string into another. Useful for fuzzy matching, typo correction, and finding similar text.",complexity:"moderate",inputs:[{name:"StringA",type:"String",description:"First string to compare"},{name:"StringB",type:"String",description:"Second string to compare"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the comparison should be case-sensitive",defaultValue:"false"}],outputs:[{name:"Return Value",type:"Float",description:"Similarity percentage (0-100)"}],examples:[{title:"Check for typos",description:"Verify if user input matches expected value with tolerance for typos.",code:`User Input -> String Similarity -> Branch (Similarity > 80)
// Accept input if it's at least 80% similar`}],performanceNotes:"For very long strings, this calculation can be expensive.",searchKeywords:["similarity","compare","string","percentage","levenshtein","fuzzy"]},{id:"count-occurrences",name:"Count Occurrences",category:"string",shortDescription:"Counts the number of times a substring appears within a larger string",longDescription:"Counts how many times a specific substring appears within a source string. Useful for text analysis, finding word frequency, or detecting patterns in text data.",complexity:"simple",inputs:[{name:"SourceString",type:"String",description:"The string to search within"},{name:"Substring",type:"String",description:"The substring to search for"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the search should be case-sensitive",defaultValue:"false"}],outputs:[{name:"Return Value",type:"Integer",description:"The number of occurrences"}],examples:[{title:"Word frequency analysis",description:"Count how many times a specific word appears in a text.",code:"Long Text -> Count Occurrences (Substring='the') -> Display Count"}],errorHandling:"Returns 0 if either string is empty or if the substring is not found.",searchKeywords:["count","substring","occurrences","find","frequency","text"]},{id:"string-fuzzy-search",name:"Fuzzy String Search",category:"string",shortDescription:"Performs fuzzy matching between strings",longDescription:"Searches for close matches to a term within a collection of candidate strings. Ranks results by similarity, allowing for typos and minor variations. Useful for search interfaces, auto-completion, and handling user input with errors.",complexity:"complex",inputs:[{name:"SearchTerm",type:"String",description:"The term to search for"},{name:"Candidates",type:"Array of Strings",description:"Array of strings to search within"},{name:"MinimumScore",type:"Float",description:"Minimum similarity score (0-100) for a result to be included",defaultValue:"50"},{name:"MaxResults",type:"Integer",description:"Maximum number of results to return (0 for all matches)",defaultValue:"10"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the search should be case-sensitive",defaultValue:"false"},{name:"bExactMatchOnly",type:"Boolean",description:"If true, only returns exact matches (ignores MinimumScore)",defaultValue:"false"}],outputs:[{name:"ResultStrings",type:"Array of Strings",description:"Array of matching strings, sorted by similarity (best matches first)"},{name:"ResultIndices",type:"Array of Integers",description:"Indices of matching strings in the original Candidates array"}],examples:[{title:"Auto-complete implementation",description:"Suggest possible completions as the user types.",code:"User Input -> Fuzzy String Search -> Display Suggestions"}],performanceNotes:"Can be computationally expensive with large candidate arrays. Consider filtering candidates first for better performance.",searchKeywords:["fuzzy","search","match","similar","typo","autocomplete"]},{id:"timer-loop",name:"Timer Loop",category:"utility",shortDescription:"Creates a timed loop with configurable delay",longDescription:"Creates a timer that executes at specified intervals. The node provides full flow control with separate pins for setup, looping, breaking, and completion. Enhances the standard Delay node with optional looping functionality.",complexity:"moderate",inputs:[{name:"Exec",type:"Exec",description:"Execution input pin",isExec:!0},{name:"Duration",type:"Float",description:"Time in seconds between iterations",defaultValue:"1.0"},{name:"Loop",type:"Boolean",description:"Whether to continue looping after the first iteration",defaultValue:"true"},{name:"Break",type:"Boolean",description:"Signal to break out of the loop",defaultValue:"false"}],outputs:[{name:"Before",type:"Exec",description:"Fires once at the beginning without delay",isExec:!0},{name:"Loop Body",type:"Exec",description:"Fires as long as the loop condition is true, after each delay duration",isExec:!0},{name:"On Break",type:"Exec",description:"Fires once when the Break input is used",isExec:!0},{name:"Continue",type:"Exec",description:"Fires once when loop condition becomes false",isExec:!0},{name:"Index",type:"Integer",description:"Current iteration index (0-based)"}],examples:[{title:"Countdown sequence",description:"Create a countdown timer for a game start sequence.",code:"Start Countdown -> Timer Loop -> Display Count -> Play Start Sound"}],errorHandling:"Validates that Duration is non-negative and Iterations is at least 1, with warnings for extreme values.",performanceNotes:"Timer operations use the global timer manager and are efficient for reasonable numbers of timers. For high-frequency operations (duration < 0.1), consider using a tick event instead.",searchKeywords:["timer","count","delay","iteration","countdown","wait","loop"]},{id:"timer-n",name:"Timer N",category:"utility",shortDescription:"Creates a timed loop with a fixed number of iterations",longDescription:"Creates a timer that executes at specified intervals for a fixed number of iterations. Similar to Timer Loop, but with a predefined number of iterations. Useful for countdown timers, step sequences, and other operations that need to execute a specific number of times.",complexity:"moderate",inputs:[{name:"Exec",type:"Exec",description:"Execution input pin",isExec:!0},{name:"Duration",type:"Float",description:"Time in seconds between iterations",defaultValue:"1.0"},{name:"Iterations",type:"Integer",description:"Number of iterations to perform",defaultValue:"5"},{name:"Break",type:"Exec",description:"Signal to break out of the loop",defaultValue:"false",isExec:!0}],outputs:[{name:"Before",type:"Exec",description:"Fires once at the beginning without delay",isExec:!0},{name:"Loop Body",type:"Exec",description:"Fires after each delay duration, up to Iterations times",isExec:!0},{name:"On Break",type:"Exec",description:"Fires once when the Break input is used",isExec:!0},{name:"Complete",type:"Exec",description:"Fires once when all iterations are completed",isExec:!0},{name:"Index",type:"Integer",description:"Current iteration index (0-based)"}],examples:[{title:"Countdown sequence",description:"Create a countdown timer for a game start sequence.",code:`Start Countdown -> Timer N (Iterations=3) -> Display Count -> Play Start Sound
// Will countdown 3, 2, 1 with delay between each`}],errorHandling:"Validates that Duration is non-negative and Iterations is at least 1, with warnings for extreme values.",performanceNotes:"Same as Timer Loop - use with caution for very high-frequency or long-running operations.",searchKeywords:["timer","count","delay","iteration","countdown","wait","fixed"]},{id:"array-unique",name:"Array Unique",category:"array",shortDescription:"Removes duplicate entries from an array",longDescription:"Creates a new array containing only the unique elements from the input array, removing all duplicates. Works with primitive types, objects, and structs based on value equality.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to remove duplicates from"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing only the unique elements"}],examples:[{title:"Filter collected items",description:"Remove duplicate items from player inventory.",code:"Player Inventory -> Array Unique -> Update Inventory"}],performanceNotes:"Performance scales with the array size. For very large arrays, this operation may be expensive.",searchKeywords:["array","unique","duplicate","remove","filter","distinct"]},{id:"array-union",name:"Array Union",category:"array",shortDescription:"Returns a new array containing all unique elements from two input arrays",longDescription:"Combines two arrays and removes any duplicates, returning a new array with all unique elements from both input arrays. Useful for merging collections while ensuring no duplicates exist.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing all unique elements from both arrays"}],examples:[{title:"Merge item collections",description:"Combine two inventories without duplicates.",code:`Player Inventory -> Array Union (A)
Chest Contents -> Array Union (B) -> Combined Unique Items`}],performanceNotes:"For large arrays, this operation may be expensive as it needs to check for duplicates.",searchKeywords:["array","union","combine","merge","unique","set"]},{id:"array-intersection",name:"Array Intersection",category:"array",shortDescription:"Returns a new array containing only elements present in both input arrays",longDescription:"Creates a new array containing only the elements that exist in both input arrays. Useful for finding common items between collections or implementing set-based operations.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing only elements present in both arrays"}],examples:[{title:"Find common requirements",description:"Determine which crafting materials are needed for two different recipes.",code:`Recipe1 Requirements -> Array Intersection (A)
Recipe2 Requirements -> Array Intersection (B) -> Common Materials`}],performanceNotes:"Performance depends on the size of both arrays. Optimized to use the smaller array for lookups.",searchKeywords:["array","intersection","common","both","filter","set"]},{id:"array-difference",name:"Array Difference (A - B)",category:"array",shortDescription:"Returns a new array containing elements in array A but not in array B",longDescription:"Creates a new array with elements that are present in the first array but not in the second array. Useful for finding the unique elements in one collection compared to another.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"Source array"},{name:"ArrayB",type:"Array",description:"Array to subtract"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing elements in A but not in B"}],examples:[{title:"Find missing items",description:"Determine which items from a required list are still missing.",code:`Required Items -> Array Difference (A)
Collected Items -> Array Difference (B) -> Missing Items`}],performanceNotes:"Performance depends on the size of both arrays.",searchKeywords:["array","difference","subtract","exclude","filter","set"]},{id:"array-symmetric-difference",name:"Array Symmetric Difference",category:"array",shortDescription:"Returns elements that are in either array A or B, but not both",longDescription:"Creates a new array containing elements that are unique to each input array, excluding common elements. This is equivalent to the union of A-B and B-A. Useful for finding the unique differences between two collections.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing elements in either A or B, but not both"}],examples:[{title:"Find inventory changes",description:"Determine what items changed between two inventory states.",code:`Previous Inventory -> Array Symmetric Difference (A)
Current Inventory -> Array Symmetric Difference (B) -> Changed Items`}],performanceNotes:"More computationally expensive than basic difference or intersection operations.",searchKeywords:["array","symmetric","difference","exclusive","unique","xor"]},{id:"shuffle-array",name:"Shuffle Array (Seedable)",category:"array",shortDescription:"Shuffles the elements of an array randomly",longDescription:"Randomizes the order of elements in an array with an optional seed for reproducibility. The seed allows you to generate the same shuffle pattern multiple times, which is useful for deterministic randomization in games.",complexity:"simple",inputs:[{name:"TargetArray",type:"Array",description:"The array to shuffle"},{name:"UseRandomSeed",type:"Boolean",description:"Whether to use the provided seed",defaultValue:"false"},{name:"Seed",type:"Integer",description:"Random seed value for reproducible shuffling",defaultValue:"0"}],outputs:[{name:"Return Value",type:"Array",description:"A new shuffled array"}],examples:[{title:"Card deck shuffling",description:"Shuffle a deck of cards with reproducible results.",code:"Card Deck -> Shuffle Array (UseRandomSeed=true, Seed=GameSeed) -> Shuffled Deck"}],performanceNotes:"Uses an efficient Fisher-Yates shuffle algorithm with O(n) complexity.",searchKeywords:["array","shuffle","random","seed","order","randomize"]},{id:"array-insert-multiple",name:"Array Insert Multiple at Index",category:"array",shortDescription:"Inserts multiple elements into an array at a specific index",longDescription:"Adds multiple elements into an array at a specified position. This is more efficient than inserting elements one at a time, especially for large arrays or when inserting many elements.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to modify"},{name:"NewItems",type:"Array",description:"Array of elements to insert"},{name:"Index",type:"Integer",description:"Index at which to insert the new elements",defaultValue:"0"}],outputs:[{name:"Return Value",type:"Array",description:"The modified array with inserted elements"}],examples:[{title:"Insert quest chain",description:"Add a sequence of quests at a specific point in the player's quest log.",code:"Player Quests -> Array Insert Multiple (NewItems=NewQuestChain, Index=3) -> Update Quest Log"}],errorHandling:"Validates that Index is within bounds of the array. If Index equals the array length, items are appended.",searchKeywords:["array","insert","multiple","add","batch","index"]},{id:"array-remove-range",name:"Array Remove Range",category:"array",shortDescription:"Removes a range of elements from an array based on start and end indices",longDescription:"Removes a specified number of consecutive elements from an array starting at a given index. More efficient than removing elements one by one, especially for large arrays.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to modify"},{name:"StartIndex",type:"Integer",description:"Index of the first element to remove",defaultValue:"0"},{name:"Count",type:"Integer",description:"Number of elements to remove",defaultValue:"1"}],outputs:[{name:"Return Value",type:"Array",description:"The modified array with elements removed"}],examples:[{title:"Remove completed quest section",description:"Remove a group of completed quests from the quest log.",code:"Quest Log -> Array Remove Range (StartIndex=5, Count=3) -> Update Quest Log"}],errorHandling:"Validates that StartIndex is within bounds and Count is positive. If the range extends beyond the array, it will be capped at the array bounds.",searchKeywords:["array","remove","range","delete","slice","batch"]},{id:"dictionary-to-array",name:"Dictionary to Array",category:"array",shortDescription:"Converts a dictionary/map to key and value arrays",longDescription:"Splits a dictionary or map data structure into separate arrays for keys and values. Useful for processing dictionary data with array operations or visualizing dictionary contents.",complexity:"simple",inputs:[{name:"TargetMap",type:"Map",description:"The map to convert"}],outputs:[{name:"Keys",type:"Array",description:"Array containing all the keys from the map"},{name:"Values",type:"Array",description:"Array containing all the values from the map"}],examples:[{title:"Display player stats",description:"Extract player statistics from a map for UI display.",code:"Player Stats Map -> Dictionary to Array -> Create UI List from Keys and Values"}],performanceNotes:"Linear time complexity, proportional to the size of the dictionary.",searchKeywords:["dictionary","map","array","keys","values","convert"]},{id:"array-to-dictionary",name:"Array to Dictionary",category:"array",shortDescription:"Converts key and value arrays into a dictionary/map",longDescription:"Creates a dictionary or map data structure from separate arrays of keys and values. The keys and values are paired by index - the first key is paired with the first value, and so on.",complexity:"simple",inputs:[{name:"Keys",type:"Array",description:"Array containing the keys"},{name:"Values",type:"Array",description:"Array containing the values"},{name:"HandleDuplicateKeys",type:"Enum (Skip, Overwrite, Error)",description:"How to handle duplicate keys",defaultValue:"Overwrite"}],outputs:[{name:"Result",type:"Map",description:"A new map with keys and values from the input arrays"},{name:"Success",type:"Boolean",description:"Whether the operation was successful"}],examples:[{title:"Create configuration map",description:"Convert two arrays of settings into a configuration map.",code:`Setting Names -> Array to Dictionary (Keys)
Setting Values -> Array to Dictionary (Values) -> Config Map`}],errorHandling:"If the arrays have different lengths, only pairs up to the shorter array's length are processed. If duplicate keys are found, behavior depends on the HandleDuplicateKeys setting.",searchKeywords:["array","dictionary","map","convert","keys","values"]}];function Ye(e){return hr.filter(t=>t.category===e)}function hi(e){if(e)return hr.find(t=>t.id===e)}function pi(e){if(!e||e.trim()==="")return[];const t=e.toLowerCase();return hr.filter(n=>!!(n.name.toLowerCase().includes(t)||n.shortDescription.toLowerCase().includes(t)||n.searchKeywords.some(r=>r.toLowerCase().includes(t))))}const Mf=({categories:e,selectedCategory:t,onSelectCategory:n,onNodeSelect:r})=>{const[i,o]=v.useState({}),[s,a]=v.useState(window.innerWidth<768);v.useEffect(()=>{t&&!i[t]&&o(d=>({...d,[t]:!0}))},[t]),v.useEffect(()=>{const d=()=>{a(window.innerWidth<768)};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const c=d=>{o(f=>({...f,[d]:!f[d]}))},u=()=>{const d=e.reduce((f,h)=>(f[h.id]=!0,f),{});o(d)},l=()=>{o({})};return v.useEffect(()=>{const d=()=>{u()},f=()=>{l()};return window.addEventListener("expandAllCategories",d),window.addEventListener("collapseAllCategories",f),()=>{window.removeEventListener("expandAllCategories",d),window.removeEventListener("collapseAllCategories",f)}},[e]),m.jsx("div",{className:`node-category-list ${s?"mobile-view":""}`,children:m.jsx("div",{className:"category-list",children:e.map(d=>{const f=t===d.id,h=i[d.id],g=Ye(d.id).length;return m.jsxs("div",{className:`category-item ${f?"selected":""}`,children:[m.jsxs("div",{className:"category-header",onClick:()=>{n(d.id),h||c(d.id)},children:[m.jsxs("div",{className:"category-info",children:[m.jsx("span",{className:"category-name",children:d.name}),m.jsx("span",{className:"category-count",children:g})]}),m.jsx("button",{className:"expand-button",onClick:y=>{y.stopPropagation(),c(d.id)},"aria-label":h?"Collapse category":"Expand category",children:h?m.jsx(bs,{}):m.jsx(Ss,{})})]}),h&&m.jsx("div",{className:"category-nodes",children:Ye(d.id).map(y=>{const w=t===d.id&&window.location.pathname.includes(y.id);return m.jsx("div",{className:`node-item ${w?"selected":""}`,onClick:x=>{x.stopPropagation(),r&&r(y)},children:m.jsx("div",{className:"node-item-info",children:m.jsx("span",{className:"node-name",children:y.name})})},y.id)})})]},d.id)})})})},Rn=(e,t)=>{if(!e||!t||t.length<2)return e;const n=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(n,'<span class="highlight">$1</span>')},Rf=({node:e,highlightTerm:t="",onClose:n})=>{var d,f;const r=t&&e.name?{__html:Rn(e.name,t)}:void 0,i=t&&e.shortDescription?{__html:Rn(e.shortDescription,t)}:void 0,o=t&&e.longDescription?{__html:Rn(e.longDescription,t)}:void 0,{theme:s}=an(),a=v.useMemo(()=>[{id:e.id,type:"blueprintNode",position:{x:100,y:100},data:{node:e,detailed:!0},draggable:!0}],[e]),c=[],u=v.useMemo(()=>({blueprintNode:Vo}),[]),l=v.useMemo(()=>({padding:.2,maxZoom:1.5,duration:200}),[]);return m.jsxs("div",{className:"node-details-panel",children:[m.jsxs("div",{className:"node-details-header",children:[m.jsxs("div",{className:"node-title-container",children:[m.jsx("h2",{className:"node-title",children:r?m.jsx("span",{dangerouslySetInnerHTML:r}):e.name}),m.jsxs("div",{className:"node-badges",children:[m.jsx("span",{className:"node-category-badge",style:{backgroundColor:kf(e.category)},children:e.category}),m.jsxs("span",{className:`node-complexity-badge ${e.complexity}`,children:["Complexity: ",e.complexity]})]})]}),n&&m.jsxs("button",{className:"back-button",onClick:n,"aria-label":"Back to list",children:[m.jsx(Xn,{})," ",m.jsx("span",{children:"Back"})]})]}),m.jsxs("div",{className:"node-details-content",children:[m.jsxs("div",{className:"node-graph-section",children:[m.jsx("h3",{children:"Node Visualization"}),m.jsx("div",{className:"node-graph-container",style:{height:"300px",background:s==="dark-theme"?"#1A202C":"#F7FAFC"},children:m.jsxs(Io,{nodes:a,edges:c,nodeTypes:u,fitView:!0,fitViewOptions:l,attributionPosition:"bottom-right",minZoom:.5,maxZoom:2,zoomOnScroll:!0,panOnScroll:!1,panOnDrag:!0,nodesDraggable:!0,elementsSelectable:!1,children:[m.jsx(Af,{color:s==="dark-theme"?"#2D3748":"#E2E8F0",size:1.5,gap:16}),m.jsx(bf,{showInteractive:!1})]})})]}),m.jsxs("div",{className:"node-overview",children:[m.jsxs("div",{className:"node-description",children:[m.jsxs("h3",{children:[m.jsx(Es,{})," Description"]}),m.jsx("p",{className:"short-description",children:i?m.jsx("span",{dangerouslySetInnerHTML:i}):e.shortDescription}),e.longDescription&&m.jsx("p",{className:"long-description",children:o?m.jsx("span",{dangerouslySetInnerHTML:o}):e.longDescription})]}),e.searchKeywords&&e.searchKeywords.length>0&&m.jsxs("div",{className:"node-keywords",children:[m.jsxs("h3",{children:[m.jsx(Ns,{})," Keywords"]}),m.jsx("div",{className:"keyword-tags",children:e.searchKeywords.map((h,g)=>m.jsx("span",{className:"keyword-tag",children:h},g))})]}),e.performanceNotes&&m.jsxs("div",{className:"node-performance",children:[m.jsxs("h3",{children:[m.jsx(_s,{})," Performance Considerations"]}),m.jsx("p",{children:e.performanceNotes})]}),e.errorHandling&&m.jsxs("div",{className:"node-error-handling",children:[m.jsxs("h3",{children:[m.jsx(Cs,{})," Error Handling"]}),m.jsx("p",{children:e.errorHandling})]})]}),(((d=e.inputs)==null?void 0:d.length)||((f=e.outputs)==null?void 0:f.length))&&m.jsxs("div",{className:"node-pins-wrapper",children:[m.jsx("h3",{children:"Pins"}),m.jsxs("div",{className:"node-pins-container",children:[e.inputs&&e.inputs.length>0&&m.jsxs("div",{className:"node-pins-section",children:[m.jsx("h4",{children:"Inputs"}),m.jsx("div",{className:"pins-table-wrapper",children:m.jsxs("table",{className:"pins-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Name"}),m.jsx("th",{children:"Type"}),m.jsx("th",{children:"Description"}),e.inputs.some(h=>h.defaultValue!==void 0)&&m.jsx("th",{children:"Default"})]})}),m.jsx("tbody",{children:e.inputs.map((h,g)=>{var y;return m.jsxs("tr",{children:[m.jsx("td",{className:"pin-name",children:h.name}),m.jsx("td",{className:"pin-type",children:h.type}),m.jsx("td",{className:"pin-description",children:h.description}),((y=e.inputs)==null?void 0:y.some(w=>w.defaultValue!==void 0))&&m.jsx("td",{className:"pin-default",children:h.defaultValue!==void 0?h.defaultValue:"-"})]},g)})})]})})]}),e.outputs&&e.outputs.length>0&&m.jsxs("div",{className:"node-pins-section",children:[m.jsx("h4",{children:"Outputs"}),m.jsx("div",{className:"pins-table-wrapper",children:m.jsxs("table",{className:"pins-table",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Name"}),m.jsx("th",{children:"Type"}),m.jsx("th",{children:"Description"})]})}),m.jsx("tbody",{children:e.outputs.map((h,g)=>m.jsxs("tr",{children:[m.jsx("td",{className:"pin-name",children:h.name}),m.jsx("td",{className:"pin-type",children:h.type}),m.jsx("td",{className:"pin-description",children:h.description})]},g))})]})})]})]})]}),e.examples&&e.examples.length>0&&m.jsxs("div",{className:"node-examples-section",children:[m.jsx("h3",{children:"Examples"}),m.jsx("div",{className:"node-examples",children:e.examples.map((h,g)=>m.jsxs("div",{className:"node-example",children:[m.jsx("h4",{children:h.title}),m.jsx("p",{children:h.description}),h.code&&m.jsx("pre",{className:"code-example",children:m.jsx("code",{children:h.code})}),h.image&&m.jsx("div",{className:"example-image-container",children:m.jsx("img",{src:h.image,alt:`Example: ${h.title}`})})]},g))})]})]})]})};function kf(e){switch(e.toLowerCase()){case"debug":return"#E53E3E";case"math":return"#3182CE";case"string":return"#38A169";case"utility":return"#D69E2E";case"array":return"#805AD5";default:return"#4A5568"}}const If=({category:e,nodes:t,onSelectNode:n,onBack:r})=>{const{theme:i}=an();return m.jsxs("div",{className:"category-details-panel",children:[m.jsxs("div",{className:"category-details-banner",children:[m.jsx("div",{className:"category-details-banner-content",children:m.jsxs("div",{className:"category-title-container",children:[m.jsx("h2",{className:"category-title",children:e.name}),m.jsx("div",{className:"category-meta",children:m.jsxs("span",{className:"category-count",children:[t.length," nodes"]})})]})}),r&&m.jsxs("button",{className:"back-button",onClick:r,"aria-label":"Back to documentation",children:[m.jsx(Xn,{})," ",m.jsx("span",{children:"Back"})]})]}),e.description&&m.jsx("div",{className:"category-description",children:m.jsx("p",{children:e.description})}),m.jsx("div",{className:"category-nodes-grid",children:t.map(o=>m.jsxs("div",{className:"node-preview-card",onClick:()=>n(o),children:[m.jsx("div",{className:"node-preview-header",children:m.jsx("h3",{children:o.name})}),m.jsx("div",{className:"node-preview-description",children:m.jsx("p",{children:o.shortDescription})}),m.jsxs("div",{className:"node-preview-footer",children:[m.jsx("span",{className:"node-complexity","data-complexity":o.complexity,children:o.complexity}),o.category&&m.jsx("span",{className:"node-category-badge",children:o.category})]})]},o.id))}),t.length===0&&m.jsxs("div",{className:"empty-category",children:[m.jsx(As,{size:40}),m.jsx("h3",{children:"No nodes available"}),m.jsx("p",{children:"This category doesn't have any nodes yet."})]})]})},$f=({categories:e,onSelectCategory:t})=>{const{theme:n}=an();return m.jsxs("div",{className:`default-documentation ${n}`,children:[m.jsxs("div",{className:"default-header",children:[m.jsx("h1",{children:"NodesPlus Blueprint Library"}),m.jsx("p",{children:"Custom nodes for enhancing Unreal Engine Blueprints"})]}),m.jsxs("div",{className:"documentation-guide",children:[m.jsx("h2",{children:"Documentation Guide"}),m.jsxs("div",{className:"guide-content",children:[m.jsx("p",{children:"This documentation provides information about custom Blueprint nodes available in the NodesPlus plugin for Unreal Engine."}),m.jsxs("div",{className:"navigation-steps",children:[m.jsxs("div",{className:"navigation-step",children:[m.jsx("div",{className:"step-number",children:"1"}),m.jsxs("div",{className:"step-content",children:[m.jsx("h3",{children:"Select a Category"}),m.jsx("p",{children:"Choose a category from the grid below to browse related nodes"})]})]}),m.jsxs("div",{className:"navigation-step",children:[m.jsx("div",{className:"step-number",children:"2"}),m.jsxs("div",{className:"step-content",children:[m.jsx("h3",{children:"Explore Nodes"}),m.jsx("p",{children:"View all nodes within the selected category and their brief descriptions"})]})]}),m.jsxs("div",{className:"navigation-step",children:[m.jsx("div",{className:"step-number",children:"3"}),m.jsxs("div",{className:"step-content",children:[m.jsx("h3",{children:"View Details"}),m.jsx("p",{children:"Click on any node to see full documentation including inputs, outputs, and usage examples"})]})]})]}),m.jsx("p",{className:"search-tip",children:"You can also use the search bar at the left to quickly find specific nodes"})]})]}),m.jsx("h2",{className:"categories-heading",children:"Node Categories"}),m.jsx("div",{className:"categories-minimal-grid",children:e.map(r=>m.jsx("div",{className:"category-minimal-card",onClick:()=>t(r.id),children:m.jsxs("div",{className:"category-minimal-header",children:[m.jsx("h3",{children:r.name}),m.jsx("span",{className:"node-count",children:Ye(r.id).length})]})},r.id))})]})},Ff=()=>{const{categoryId:e,nodeId:t}=xs(),n=ws(),r=vs(),i=v.useRef(null),{theme:o,toggleTheme:s}=an(),a=v.useRef(!1),[c,u]=v.useState(e),[l,d]=v.useState(t?hi(t):void 0),[f,h]=v.useState(""),[g,y]=v.useState(window.innerWidth<768),[w,x]=v.useState(!0),[E,A]=v.useState([]);v.useMemo(()=>({blueprintNode:Vo}),[]),v.useMemo(()=>({padding:.2,maxZoom:1.5,duration:200}),[]),v.useMemo(()=>({type:"default",style:{stroke:"#3182CE",strokeWidth:2}}),[]),v.useMemo(()=>[16,16],[]),v.useCallback(()=>{document.body.classList.add("node-dragging")},[]),v.useCallback(()=>{},[]),v.useCallback(()=>{document.body.classList.remove("node-dragging")},[]),v.useCallback(C=>C.length?C.map(($,B)=>({id:$.id,type:"blueprintNode",position:{x:g?20:B%3*350+50,y:g?B*150+50:Math.floor(B/3)*200+50},data:{node:$,detailed:!1,highlightTerm:f},draggable:!0})):[],[g,f]),v.useEffect(()=>{if(f&&f.length>=2){const C=pi(f);A(C)}else if(c){const C=Ye(c);A(C)}else A([])},[f,c]),v.useEffect(()=>{if(e){u(e);const C=Ye(e);if(A(C),t){const $=hi(t);$&&d($)}}},[e,t]),v.useEffect(()=>{const C=()=>{y(window.innerWidth<768)};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),v.useEffect(()=>{const C=$=>{var B;if(!($.target instanceof HTMLInputElement||$.target instanceof HTMLTextAreaElement))switch($.key){case"/":$.preventDefault(),(B=i.current)==null||B.focus();break;case"Escape":f?R():l&&(d(void 0),c&&n(`/documentation/${c}`));break}};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[f,l,c,n]);const b=v.useCallback(C=>{a.current=!0,C.category!==c&&u(C.category),d(C),g&&w&&x(!1);const $=`/documentation/${C.category}/${C.id}`;n($,{replace:!0}),r.trackNodeView(C.id,C.name,C.category),setTimeout(()=>{a.current=!1},0)},[g,w,c,n,r]),T=v.useCallback(C=>{h(C),C.length>=2&&r.trackSearch(C,pi(C).length)},[r]),R=v.useCallback(()=>{if(h(""),c){const C=Ye(c);A(C)}else A([])},[c]),z=v.useCallback(C=>{var B;u(C);const $=Ye(C);A($),d(void 0),n(`/documentation/${C}`),g&&!w&&x(!0),r.trackFeatureUsage("select_category",{category_id:C,category_name:((B=Kt.find(P=>P.id===C))==null?void 0:B.name)||C})},[n,g,w,r]),H=v.useCallback(()=>{d(void 0),n(c?`/documentation/${c}`:"/documentation")},[c,n]),k=v.useMemo(()=>c&&Kt.find(C=>C.id===c)||null,[c]);return m.jsxs("div",{className:`documentation-page ${o}`,children:[m.jsx(Ds,{}),m.jsxs("div",{className:`documentation-container ${g?"mobile-view":""} ${o}`,children:[m.jsxs("div",{className:`sidebar ${g&&!w?"mobile-hidden":""} ${o}`,children:[m.jsxs("div",{className:"sidebar-controls",children:[m.jsx("div",{className:"search-container",children:m.jsxs("div",{className:"search-input-wrapper",children:[m.jsx(Ts,{className:"search-icon"}),m.jsx("input",{ref:i,type:"text",placeholder:"Search nodes... (Press / to focus)",value:f,onChange:C=>T(C.target.value),className:"search-input"}),f&&m.jsx("button",{className:"clear-search",onClick:R,children:m.jsx(Ms,{})})]})}),m.jsxs("div",{className:"controls-row",children:[m.jsx("button",{className:"control-button theme-toggle-button",onClick:s,title:`Switch to ${o==="dark-theme"?"light":"dark"} theme (Ctrl+T)`,children:o==="dark-theme"?m.jsx(Rs,{}):m.jsx(ks,{})}),m.jsxs("div",{className:"category-controls",children:[m.jsx("button",{className:"control-button",onClick:()=>{window.dispatchEvent(new CustomEvent("expandAllCategories"))},title:"Expand All Categories",children:m.jsx(xr,{})}),m.jsx("button",{className:"control-button",onClick:()=>{window.dispatchEvent(new CustomEvent("collapseAllCategories"))},title:"Collapse All Categories",children:m.jsx(Is,{})})]})]})]}),!f&&m.jsx(Mf,{categories:Kt,selectedCategory:c,onSelectCategory:z,onNodeSelect:b}),f&&E.length>0&&m.jsxs("div",{className:"search-results",children:[m.jsxs("h3",{children:["Search Results (",E.length,")"]}),m.jsx("div",{className:"node-list",children:E.map(C=>m.jsxs("div",{className:`node-list-item ${(l==null?void 0:l.id)===C.id?"selected":""}`,onClick:()=>b(C),children:[m.jsxs("div",{className:"node-list-item-name",children:[m.jsx("span",{className:"category-indicator"}),m.jsx("span",{dangerouslySetInnerHTML:{__html:zf(C.name,f)}})]}),m.jsx("div",{className:"node-list-item-category",children:C.category})]},C.id))})]}),f&&E.length===0&&m.jsxs("div",{className:"no-results",children:[m.jsxs("p",{children:['No nodes found matching "',f,'"']}),m.jsx("p",{children:"Try a different search term or browse by category"})]})]}),m.jsxs("div",{className:"main-content",children:[g&&m.jsx("button",{className:`mobile-toggle ${o}`,onClick:()=>x(!w),children:w?m.jsx(Xn,{}):m.jsx(xr,{})}),l?m.jsx(Rf,{node:l,highlightTerm:f,onClose:H}):c&&k?m.jsx(If,{category:k,nodes:E,onSelectNode:b,onBack:()=>{u(void 0),n("/documentation")}}):m.jsx($f,{categories:Kt,onSelectCategory:z})]})]}),m.jsx($s,{className:o})]})};function zf(e,t){if(!e||!t||t.length<2)return e;const n=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(n,'<span class="highlight">$1</span>')}export{Ff as default};
