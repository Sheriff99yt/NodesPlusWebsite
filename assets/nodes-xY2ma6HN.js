import{e as ss,r as oi,g as as,R as M,a as E,u as cs,j as Z}from"./index-CbV2Utvn.js";ss();function le(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=le(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var hn={exports:{}},pn={},mn={exports:{}},gn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dr;function ls(){if(dr)return gn;dr=1;var e=oi();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function a(d,h){var p=h(),x=r({inst:{value:p,getSnapshot:h}}),m=x[0].inst,y=x[1];return s(function(){m.value=p,m.getSnapshot=h,c(m)&&y({inst:m})},[d,p,h]),i(function(){return c(m)&&y({inst:m}),d(function(){c(m)&&y({inst:m})})},[d]),o(p),p}function c(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function u(d,h){return h()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return gn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,gn}var fr;function us(){return fr||(fr=1,mn.exports=ls()),mn.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hr;function ds(){if(hr)return pn;hr=1;var e=oi(),t=us();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,a=e.useMemo,c=e.useDebugValue;return pn.useSyncExternalStoreWithSelector=function(u,l,d,h,p){var x=s(null);if(x.current===null){var m={hasValue:!1,value:null};x.current=m}else m=x.current;x=a(function(){function g(R){if(!S){if(S=!0,A=R,R=h(R),p!==void 0&&m.hasValue){var $=m.value;if(p($,R))return w=$}return w=R}if($=w,r(A,R))return $;var F=h(R);return p!==void 0&&p($,F)?(A=R,$):(A=R,w=F)}var S=!1,A,w,C=d===void 0?null:d;return[function(){return g(l())},C===null?void 0:function(){return g(C())}]},[l,d,h,p]);var y=i(u,x[0],x[1]);return o(function(){m.hasValue=!0,m.value=y},[y]),c(y),y},pn}var pr;function fs(){return pr||(pr=1,hn.exports=ds()),hn.exports}var hs=fs();const ps=as(hs),ms={},mr=e=>{let t;const n=new Set,r=(l,d)=>{const h=typeof l=="function"?l(t):l;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,p))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(ms?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,c);return c},gs=e=>e?mr(e):mr,{useDebugValue:ys}=M,{useSyncExternalStoreWithSelector:xs}=ps,ws=e=>e;function si(e,t=ws,n){const r=xs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ys(r),r}const gr=(e,t)=>{const n=gs(e),r=(i,s=t)=>si(n,i,s);return Object.assign(r,n),r},vs=(e,t)=>e?gr(e,t):gr;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var bs={value:()=>{}};function rn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ot(n)}function Ot(e){this._=e}function Ss(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ot.prototype=rn.prototype={constructor:Ot,on:function(e,t){var n=this._,r=Ss(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Es(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=yr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=yr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ot(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Es(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function yr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bs,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cn="http://www.w3.org/1999/xhtml";const xr={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function on(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xr.hasOwnProperty(t)?{space:xr[t],local:e}:e}function _s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cn&&t.documentElement.namespaceURI===Cn?t.createElement(e):t.createElementNS(n,e)}}function As(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ai(e){var t=on(e);return(t.local?As:_s)(t)}function Ns(){}function Un(e){return e==null?Ns:function(){return this.querySelector(e)}}function Cs(e){typeof e!="function"&&(e=Un(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,u,l=0;l<o;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ce(r,this._parents)}function Ts(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ds(){return[]}function ci(e){return e==null?Ds:function(){return this.querySelectorAll(e)}}function Rs(e){return function(){return Ts(e.apply(this,arguments))}}function Ms(e){typeof e=="function"?e=Rs(e):e=ci(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),i.push(c));return new ce(r,i)}function li(e){return function(){return this.matches(e)}}function ui(e){return function(t){return t.matches(e)}}var Is=Array.prototype.find;function ks(e){return function(){return Is.call(this.children,e)}}function $s(){return this.firstElementChild}function zs(e){return this.select(e==null?$s:ks(typeof e=="function"?e:ui(e)))}var Vs=Array.prototype.filter;function Fs(){return Array.from(this.children)}function Ps(e){return function(){return Vs.call(this.children,e)}}function Bs(e){return this.selectAll(e==null?Fs:Ps(typeof e=="function"?e:ui(e)))}function Hs(e){typeof e!="function"&&(e=li(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new ce(r,this._parents)}function di(e){return new Array(e.length)}function Ls(){return new ce(this._enter||this._groups.map(di),this._parents)}function Wt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Wt.prototype={constructor:Wt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qs(e){return function(){return e}}function Us(e,t,n,r,i,s){for(var o=0,a,c=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Wt(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function Os(e,t,n,r,i,s,o){var a,c,u=new Map,l=t.length,d=s.length,h=new Array(l),p;for(a=0;a<l;++a)(c=t[a])&&(h[a]=p=o.call(c,c.__data__,a,t)+"",u.has(p)?i[a]=c:u.set(p,c));for(a=0;a<d;++a)p=o.call(e,s[a],a,s)+"",(c=u.get(p))?(r[a]=c,c.__data__=s[a],u.delete(p)):n[a]=new Wt(e,s[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(h[a])===c&&(i[a]=c)}function Ks(e){return e.__data__}function Ys(e,t){if(!arguments.length)return Array.from(this,Ks);var n=t?Os:Us,r=this._parents,i=this._groups;typeof e!="function"&&(e=qs(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var l=r[u],d=i[u],h=d.length,p=Xs(e.call(l,l&&l.__data__,u,r)),x=p.length,m=a[u]=new Array(x),y=o[u]=new Array(x),g=c[u]=new Array(h);n(l,d,m,y,g,p,t);for(var S=0,A=0,w,C;S<x;++S)if(w=m[S]){for(S>=A&&(A=S+1);!(C=y[A])&&++A<x;);w._next=C||null}}return o=new ce(o,r),o._enter=a,o._exit=c,o}function Xs(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ws(){return new ce(this._exit||this._groups.map(di),this._parents)}function Gs(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Zs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var u=n[c],l=r[c],d=u.length,h=a[c]=new Array(d),p,x=0;x<d;++x)(p=u[x]||l[x])&&(h[x]=p);for(;c<i;++c)a[c]=n[c];return new ce(a,this._parents)}function Qs(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function js(e){e||(e=Js);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),u,l=0;l<a;++l)(u=o[l])&&(c[l]=u);c.sort(t)}return new ce(i,this._parents).order()}function Js(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ea(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ta(){return Array.from(this)}function na(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ra(){let e=0;for(const t of this)++e;return e}function ia(){return!this.node()}function oa(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function sa(e){return function(){this.removeAttribute(e)}}function aa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ca(e,t){return function(){this.setAttribute(e,t)}}function la(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ua(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function da(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fa(e,t){var n=on(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?aa:sa:typeof t=="function"?n.local?da:ua:n.local?la:ca)(n,t))}function fi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ha(e){return function(){this.style.removeProperty(e)}}function pa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ma(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ga(e,t,n){return arguments.length>1?this.each((t==null?ha:typeof t=="function"?ma:pa)(e,t,n??"")):dt(this.node(),e)}function dt(e,t){return e.style.getPropertyValue(t)||fi(e).getComputedStyle(e,null).getPropertyValue(t)}function ya(e){return function(){delete this[e]}}function xa(e,t){return function(){this[e]=t}}function wa(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function va(e,t){return arguments.length>1?this.each((t==null?ya:typeof t=="function"?wa:xa)(e,t)):this.node()[e]}function hi(e){return e.trim().split(/^|\s+/)}function On(e){return e.classList||new pi(e)}function pi(e){this._node=e,this._names=hi(e.getAttribute("class")||"")}pi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function mi(e,t){for(var n=On(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function gi(e,t){for(var n=On(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ba(e){return function(){mi(this,e)}}function Sa(e){return function(){gi(this,e)}}function Ea(e,t){return function(){(t.apply(this,arguments)?mi:gi)(this,e)}}function _a(e,t){var n=hi(e+"");if(arguments.length<2){for(var r=On(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Ea:t?ba:Sa)(n,t))}function Aa(){this.textContent=""}function Na(e){return function(){this.textContent=e}}function Ca(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ta(e){return arguments.length?this.each(e==null?Aa:(typeof e=="function"?Ca:Na)(e)):this.node().textContent}function Da(){this.innerHTML=""}function Ra(e){return function(){this.innerHTML=e}}function Ma(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ia(e){return arguments.length?this.each(e==null?Da:(typeof e=="function"?Ma:Ra)(e)):this.node().innerHTML}function ka(){this.nextSibling&&this.parentNode.appendChild(this)}function $a(){return this.each(ka)}function za(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Va(){return this.each(za)}function Fa(e){var t=typeof e=="function"?e:ai(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pa(){return null}function Ba(e,t){var n=typeof e=="function"?e:ai(e),r=t==null?Pa:typeof t=="function"?t:Un(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ha(){var e=this.parentNode;e&&e.removeChild(this)}function La(){return this.each(Ha)}function qa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ua(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Oa(e){return this.select(e?Ua:qa)}function Ka(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ya(e){return function(t){e.call(this,t,this.__data__)}}function Xa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wa(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ga(e,t,n){return function(){var r=this.__on,i,s=Ya(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Za(e,t,n){var r=Xa(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(i=0,l=a[c];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(a=t?Ga:Wa,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function yi(e,t,n){var r=fi(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Qa(e,t){return function(){return yi(this,e,t)}}function ja(e,t){return function(){return yi(this,e,t.apply(this,arguments))}}function Ja(e,t){return this.each((typeof t=="function"?ja:Qa)(e,t))}function*ec(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var xi=[null];function ce(e,t){this._groups=e,this._parents=t}function It(){return new ce([[document.documentElement]],xi)}function tc(){return this}ce.prototype=It.prototype={constructor:ce,select:Cs,selectAll:Ms,selectChild:zs,selectChildren:Bs,filter:Hs,data:Ys,enter:Ls,exit:Ws,join:Gs,merge:Zs,selection:tc,order:Qs,sort:js,call:ea,nodes:ta,node:na,size:ra,empty:ia,each:oa,attr:fa,style:ga,property:va,classed:_a,text:Ta,html:Ia,raise:$a,lower:Va,append:Fa,insert:Ba,remove:La,clone:Oa,datum:Ka,on:Za,dispatch:Ja,[Symbol.iterator]:ec};function ge(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],xi)}function nc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Se(e,t){if(e=nc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const rc={passive:!1},At={capture:!0,passive:!1};function yn(e){e.stopImmediatePropagation()}function at(e){e.preventDefault(),e.stopImmediatePropagation()}function wi(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",at,At);"onselectstart"in t?n.on("selectstart.drag",at,At):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function vi(e,t){var n=e.document.documentElement,r=ge(e).on("dragstart.drag",null);t&&(r.on("click.drag",at,At),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const zt=e=>()=>e;function Tn(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Tn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ic(e){return!e.ctrlKey&&!e.button}function oc(){return this.parentNode}function sc(e,t){return t??{x:e.x,y:e.y}}function ac(){return navigator.maxTouchPoints||"ontouchstart"in this}function cc(){var e=ic,t=oc,n=sc,r=ac,i={},s=rn("start","drag","end"),o=0,a,c,u,l,d=0;function h(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",y).on("touchmove.drag",g,rc).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,C){if(!(l||!e.call(this,w,C))){var R=A(this,t.call(this,w,C),w,C,"mouse");R&&(ge(w.view).on("mousemove.drag",x,At).on("mouseup.drag",m,At),wi(w.view),yn(w),u=!1,a=w.clientX,c=w.clientY,R("start",w))}}function x(w){if(at(w),!u){var C=w.clientX-a,R=w.clientY-c;u=C*C+R*R>d}i.mouse("drag",w)}function m(w){ge(w.view).on("mousemove.drag mouseup.drag",null),vi(w.view,u),at(w),i.mouse("end",w)}function y(w,C){if(e.call(this,w,C)){var R=w.changedTouches,$=t.call(this,w,C),F=R.length,D,P;for(D=0;D<F;++D)(P=A(this,$,w,C,R[D].identifier,R[D]))&&(yn(w),P("start",w,R[D]))}}function g(w){var C=w.changedTouches,R=C.length,$,F;for($=0;$<R;++$)(F=i[C[$].identifier])&&(at(w),F("drag",w,C[$]))}function S(w){var C=w.changedTouches,R=C.length,$,F;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),$=0;$<R;++$)(F=i[C[$].identifier])&&(yn(w),F("end",w,C[$]))}function A(w,C,R,$,F,D){var P=s.copy(),V=Se(D||R,C),H,B,f;if((f=n.call(w,new Tn("beforestart",{sourceEvent:R,target:h,identifier:F,active:o,x:V[0],y:V[1],dx:0,dy:0,dispatch:P}),$))!=null)return H=f.x-V[0]||0,B=f.y-V[1]||0,function _(b,T,I){var v=V,N;switch(b){case"start":i[F]=_,N=o++;break;case"end":delete i[F],--o;case"drag":V=Se(I||T,C),N=o;break}P.call(b,w,new Tn(b,{sourceEvent:T,subject:f,target:h,identifier:F,active:N,x:V[0]+H,y:V[1]+B,dx:V[0]-v[0],dy:V[1]-v[1],dispatch:P}),$)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:zt(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:zt(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:zt(w),h):n},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:zt(!!w),h):r},h.on=function(){var w=s.on.apply(s,arguments);return w===s?h:w},h.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,h):Math.sqrt(d)},h}function Kn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kt(){}var Nt=.7,Gt=1/Nt,ct="\\s*([+-]?\\d+)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lc=/^#([0-9a-f]{3,8})$/,uc=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),dc=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),fc=new RegExp(`^rgba\\(${ct},${ct},${ct},${Ct}\\)$`),hc=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${Ct}\\)$`),pc=new RegExp(`^hsl\\(${Ct},${Ee},${Ee}\\)$`),mc=new RegExp(`^hsla\\(${Ct},${Ee},${Ee},${Ct}\\)$`),wr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kn(kt,Tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vr,formatHex:vr,formatHex8:gc,formatHsl:yc,formatRgb:br,toString:br});function vr(){return this.rgb().formatHex()}function gc(){return this.rgb().formatHex8()}function yc(){return Si(this).formatHsl()}function br(){return this.rgb().formatRgb()}function Tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=lc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sr(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uc.exec(e))?new se(t[1],t[2],t[3],1):(t=dc.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fc.exec(e))?Vt(t[1],t[2],t[3],t[4]):(t=hc.exec(e))?Vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pc.exec(e))?Ar(t[1],t[2]/100,t[3]/100,1):(t=mc.exec(e))?Ar(t[1],t[2]/100,t[3]/100,t[4]):wr.hasOwnProperty(e)?Sr(wr[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function Sr(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Vt(e,t,n,r){return r<=0&&(e=t=n=NaN),new se(e,t,n,r)}function xc(e){return e instanceof kt||(e=Tt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Dn(e,t,n,r){return arguments.length===1?xc(e):new se(e,t,n,r??1)}function se(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kn(se,Dn,bi(kt,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nt:Math.pow(Nt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Xe(this.r),Xe(this.g),Xe(this.b),Zt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Er,formatHex:Er,formatHex8:wc,formatRgb:_r,toString:_r}));function Er(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}`}function wc(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}${Ke((isNaN(this.opacity)?1:this.opacity)*255)}`}function _r(){const e=Zt(this.opacity);return`${e===1?"rgb(":"rgba("}${Xe(this.r)}, ${Xe(this.g)}, ${Xe(this.b)}${e===1?")":`, ${e})`}`}function Zt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ke(e){return e=Xe(e),(e<16?"0":"")+e.toString(16)}function Ar(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ye(e,t,n,r)}function Si(e){if(e instanceof ye)return new ye(e.h,e.s,e.l,e.opacity);if(e instanceof kt||(e=Tt(e)),!e)return new ye;if(e instanceof ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new ye(o,a,c,e.opacity)}function vc(e,t,n,r){return arguments.length===1?Si(e):new ye(e,t,n,r??1)}function ye(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kn(ye,vc,bi(kt,{brighter(e){return e=e==null?Gt:Math.pow(Gt,e),new ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nt:Math.pow(Nt,e),new ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new se(xn(e>=240?e-240:e+120,i,r),xn(e,i,r),xn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ye(Nr(this.h),Ft(this.s),Ft(this.l),Zt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zt(this.opacity);return`${e===1?"hsl(":"hsla("}${Nr(this.h)}, ${Ft(this.s)*100}%, ${Ft(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nr(e){return e=(e||0)%360,e<0?e+360:e}function Ft(e){return Math.max(0,Math.min(1,e||0))}function xn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ei=e=>()=>e;function bc(e,t){return function(n){return e+n*t}}function Sc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ec(e){return(e=+e)==1?_i:function(t,n){return n-t?Sc(t,n,e):Ei(isNaN(t)?n:t)}}function _i(e,t){var n=t-e;return n?bc(e,n):Ei(isNaN(e)?t:e)}const Cr=function e(t){var n=Ec(t);function r(i,s){var o=n((i=Dn(i)).r,(s=Dn(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),u=_i(i.opacity,s.opacity);return function(l){return i.r=o(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=e,r}(1);function Ie(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(Rn.source,"g");function _c(e){return function(){return e}}function Ac(e){return function(t){return e(t)+""}}function Nc(e,t){var n=Rn.lastIndex=wn.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Rn.exec(e))&&(i=wn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Ie(r,i)})),n=wn.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Ac(c[0].x):_c(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var Tr=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ai(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Tr,skewX:Math.atan(c)*Tr,scaleX:o,scaleY:a}}var Pt;function Cc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mn:Ai(t.a,t.b,t.c,t.d,t.e,t.f)}function Tc(e){return e==null||(Pt||(Pt=document.createElementNS("http://www.w3.org/2000/svg","g")),Pt.setAttribute("transform",e),!(e=Pt.transform.baseVal.consolidate()))?Mn:(e=e.matrix,Ai(e.a,e.b,e.c,e.d,e.e,e.f))}function Ni(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,l,d,h,p,x){if(u!==d||l!==h){var m=p.push("translate(",null,t,null,n);x.push({i:m-4,x:Ie(u,d)},{i:m-2,x:Ie(l,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function o(u,l,d,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ie(u,l)})):l&&d.push(i(d)+"rotate("+l+r)}function a(u,l,d,h){u!==l?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ie(u,l)}):l&&d.push(i(d)+"skewX("+l+r)}function c(u,l,d,h,p,x){if(u!==d||l!==h){var m=p.push(i(p)+"scale(",null,",",null,")");x.push({i:m-4,x:Ie(u,d)},{i:m-2,x:Ie(l,h)})}else(d!==1||h!==1)&&p.push(i(p)+"scale("+d+","+h+")")}return function(u,l){var d=[],h=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,d,h),o(u.rotate,l.rotate,d,h),a(u.skewX,l.skewX,d,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,h),u=l=null,function(p){for(var x=-1,m=h.length,y;++x<m;)d[(y=h[x]).i]=y.x(p);return d.join("")}}}var Dc=Ni(Cc,"px, ","px)","deg)"),Rc=Ni(Tc,", ",")",")"),Mc=1e-12;function Dr(e){return((e=Math.exp(e))+1/e)/2}function Ic(e){return((e=Math.exp(e))-1/e)/2}function kc(e){return((e=Math.exp(2*e))-1)/(e+1)}const $c=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],u=s[2],l=o[0],d=o[1],h=o[2],p=l-a,x=d-c,m=p*p+x*x,y,g;if(m<Mc)g=Math.log(h/u)/t,y=function($){return[a+$*p,c+$*x,u*Math.exp(t*$*g)]};else{var S=Math.sqrt(m),A=(h*h-u*u+r*m)/(2*u*n*S),w=(h*h-u*u-r*m)/(2*h*n*S),C=Math.log(Math.sqrt(A*A+1)-A),R=Math.log(Math.sqrt(w*w+1)-w);g=(R-C)/t,y=function($){var F=$*g,D=Dr(C),P=u/(n*S)*(D*kc(t*F+C)-Ic(C));return[a+P*p,c+P*x,u*D/Dr(t*F+C)]}}return y.duration=g*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);var ft=0,Et=0,xt=0,Ci=1e3,Qt,_t,jt=0,Ge=0,sn=0,Dt=typeof performance=="object"&&performance.now?performance:Date,Ti=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yn(){return Ge||(Ti(zc),Ge=Dt.now()+sn)}function zc(){Ge=0}function Jt(){this._call=this._time=this._next=null}Jt.prototype=Di.prototype={constructor:Jt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yn():+n)+(t==null?0:+t),!this._next&&_t!==this&&(_t?_t._next=this:Qt=this,_t=this),this._call=e,this._time=n,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function Di(e,t,n){var r=new Jt;return r.restart(e,t,n),r}function Vc(){Yn(),++ft;for(var e=Qt,t;e;)(t=Ge-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ft}function Rr(){Ge=(jt=Dt.now())+sn,ft=Et=0;try{Vc()}finally{ft=0,Pc(),Ge=0}}function Fc(){var e=Dt.now(),t=e-jt;t>Ci&&(sn-=t,jt=e)}function Pc(){for(var e,t=Qt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qt=n);_t=e,In(r)}function In(e){if(!ft){Et&&(Et=clearTimeout(Et));var t=e-Ge;t>24?(e<1/0&&(Et=setTimeout(Rr,e-Dt.now()-sn)),xt&&(xt=clearInterval(xt))):(xt||(jt=Dt.now(),xt=setInterval(Fc,Ci)),ft=1,Ti(Rr))}}function Mr(e,t,n){var r=new Jt;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Bc=rn("start","end","cancel","interrupt"),Hc=[],Ri=0,Ir=1,kn=2,Kt=3,kr=4,$n=5,Yt=6;function an(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Lc(e,n,{name:t,index:r,group:i,on:Bc,tween:Hc,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ri})}function Xn(e,t){var n=we(e,t);if(n.state>Ri)throw new Error("too late; already scheduled");return n}function _e(e,t){var n=we(e,t);if(n.state>Kt)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lc(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Di(s,0,n.time);function s(u){n.state=Ir,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var l,d,h,p;if(n.state!==Ir)return c();for(l in r)if(p=r[l],p.name===n.name){if(p.state===Kt)return Mr(o);p.state===kr?(p.state=Yt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[l]):+l<t&&(p.state=Yt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[l])}if(Mr(function(){n.state===Kt&&(n.state=kr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=kn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kn){for(n.state=Kt,i=new Array(h=n.tween.length),l=0,d=-1;l<h;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=$n,1),d=-1,h=i.length;++d<h;)i[d].call(e,l);n.state===$n&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Yt,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Xt(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>kn&&r.state<$n,r.state=Yt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function qc(e){return this.each(function(){Xt(this,e)})}function Uc(e,t){var n,r;return function(){var i=_e(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Oc(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_e(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=a;break}c===u&&i.push(a)}s.tween=i}}function Kc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=we(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Uc:Oc)(n,e,t))}function Wn(e,t,n){var r=e._id;return e.each(function(){var i=_e(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return we(i,r).value[t]}}function Mi(e,t){var n;return(typeof t=="number"?Ie:t instanceof Tt?Cr:(n=Tt(t))?(t=n,Cr):Nc)(e,t)}function Yc(e){return function(){this.removeAttribute(e)}}function Xc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wc(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Gc(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Zc(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Qc(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function jc(e,t){var n=on(e),r=n==="transform"?Rc:Mi;return this.attrTween(e,typeof t=="function"?(n.local?Qc:Zc)(n,r,Wn(this,"attr."+e,t)):t==null?(n.local?Xc:Yc)(n):(n.local?Gc:Wc)(n,r,t))}function Jc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function el(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tl(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&el(e,s)),n}return i._value=t,i}function nl(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Jc(e,s)),n}return i._value=t,i}function rl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=on(e);return this.tween(n,(r.local?tl:nl)(r,t))}function il(e,t){return function(){Xn(this,e).delay=+t.apply(this,arguments)}}function ol(e,t){return t=+t,function(){Xn(this,e).delay=t}}function sl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?il:ol)(t,e)):we(this.node(),t).delay}function al(e,t){return function(){_e(this,e).duration=+t.apply(this,arguments)}}function cl(e,t){return t=+t,function(){_e(this,e).duration=t}}function ll(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?al:cl)(t,e)):we(this.node(),t).duration}function ul(e,t){if(typeof t!="function")throw new Error;return function(){_e(this,e).ease=t}}function dl(e){var t=this._id;return arguments.length?this.each(ul(t,e)):we(this.node(),t).ease}function fl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_e(this,e).ease=n}}function hl(e){if(typeof e!="function")throw new Error;return this.each(fl(this._id,e))}function pl(e){typeof e!="function"&&(e=li(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new De(r,this._parents,this._name,this._id)}function ml(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],u=n[a],l=c.length,d=o[a]=new Array(l),h,p=0;p<l;++p)(h=c[p]||u[p])&&(d[p]=h);for(;a<r;++a)o[a]=t[a];return new De(o,this._parents,this._name,this._id)}function gl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yl(e,t,n){var r,i,s=gl(t)?Xn:_e;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function xl(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(yl(n,e,t))}function wl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vl(){return this.on("end.remove",wl(this._id))}function bl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Un(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,u=s[o]=new Array(c),l,d,h=0;h<c;++h)(l=a[h])&&(d=e.call(l,l.__data__,h,a))&&("__data__"in l&&(d.__data__=l.__data__),u[h]=d,an(u[h],t,n,h,u,we(l,n)));return new De(s,this._parents,t,n)}function Sl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ci(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var h=e.call(l,l.__data__,d,c),p,x=we(l,n),m=0,y=h.length;m<y;++m)(p=h[m])&&an(p,t,n,m,h,x);s.push(h),o.push(l)}return new De(s,o,t,n)}var El=It.prototype.constructor;function _l(){return new El(this._groups,this._parents)}function Al(e,t){var n,r,i;return function(){var s=dt(this,e),o=(this.style.removeProperty(e),dt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Ii(e){return function(){this.style.removeProperty(e)}}function Nl(e,t,n){var r,i=n+"",s;return function(){var o=dt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Cl(e,t,n){var r,i,s;return function(){var o=dt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),dt(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function Tl(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=_e(this,e),u=c.on,l=c.value[s]==null?a||(a=Ii(t)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(o,i=l),c.on=r}}function Dl(e,t,n){var r=(e+="")=="transform"?Dc:Mi;return t==null?this.styleTween(e,Al(e,r)).on("end.style."+e,Ii(e)):typeof t=="function"?this.styleTween(e,Cl(e,r,Wn(this,"style."+e,t))).each(Tl(this._id,e)):this.styleTween(e,Nl(e,r,t),n).on("end.style."+e,null)}function Rl(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ml(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Rl(e,o,n)),r}return s._value=t,s}function Il(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ml(e,t,n??""))}function kl(e){return function(){this.textContent=e}}function $l(e){return function(){var t=e(this);this.textContent=t??""}}function zl(e){return this.tween("text",typeof e=="function"?$l(Wn(this,"text",e)):kl(e==null?"":e+""))}function Vl(e){return function(t){this.textContent=e.call(this,t)}}function Fl(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Vl(i)),t}return r._value=e,r}function Pl(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Fl(e))}function Bl(){for(var e=this._name,t=this._id,n=ki(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var l=we(c,t);an(c,e,n,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new De(r,this._parents,e,n)}function Hl(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var u=_e(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),i===0&&s()})}var Ll=0;function De(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ki(){return++Ll}var Ce=It.prototype;De.prototype={constructor:De,select:bl,selectAll:Sl,selectChild:Ce.selectChild,selectChildren:Ce.selectChildren,filter:pl,merge:ml,selection:_l,transition:Bl,call:Ce.call,nodes:Ce.nodes,node:Ce.node,size:Ce.size,empty:Ce.empty,each:Ce.each,on:xl,attr:jc,attrTween:rl,style:Dl,styleTween:Il,text:zl,textTween:Pl,remove:vl,tween:Kc,delay:sl,duration:ll,ease:dl,easeVarying:hl,end:Hl,[Symbol.iterator]:Ce[Symbol.iterator]};function ql(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ul={time:null,delay:0,duration:250,ease:ql};function Ol(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kl(e){var t,n;e instanceof De?(t=e._id,e=e._name):(t=ki(),(n=Ul).time=Yn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&an(c,e,t,u,o,n||Ol(c,t));return new De(r,this._parents,e,t)}It.prototype.interrupt=qc;It.prototype.transition=Kl;const Bt=e=>()=>e;function Yl(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ze=new Te(1,0,0);Te.prototype;function vn(e){e.stopImmediatePropagation()}function wt(e){e.preventDefault(),e.stopImmediatePropagation()}function Xl(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Wl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function $r(){return this.__zoom||ze}function Gl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ql(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function jl(){var e=Xl,t=Wl,n=Ql,r=Gl,i=Zl,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=$c,u=rn("start","zoom","end"),l,d,h,p=500,x=150,m=0,y=10;function g(f){f.property("__zoom",$r).on("wheel.zoom",F,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(f,_,b,T){var I=f.selection?f.selection():f;I.property("__zoom",$r),f!==I?C(f,_,b,T):I.interrupt().each(function(){R(this,arguments).event(T).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},g.scaleBy=function(f,_,b,T){g.scaleTo(f,function(){var I=this.__zoom.k,v=typeof _=="function"?_.apply(this,arguments):_;return I*v},b,T)},g.scaleTo=function(f,_,b,T){g.transform(f,function(){var I=t.apply(this,arguments),v=this.__zoom,N=b==null?w(I):typeof b=="function"?b.apply(this,arguments):b,k=v.invert(N),z=typeof _=="function"?_.apply(this,arguments):_;return n(A(S(v,z),N,k),I,o)},b,T)},g.translateBy=function(f,_,b,T){g.transform(f,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),o)},null,T)},g.translateTo=function(f,_,b,T,I){g.transform(f,function(){var v=t.apply(this,arguments),N=this.__zoom,k=T==null?w(v):typeof T=="function"?T.apply(this,arguments):T;return n(ze.translate(k[0],k[1]).scale(N.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof b=="function"?-b.apply(this,arguments):-b),v,o)},T,I)};function S(f,_){return _=Math.max(s[0],Math.min(s[1],_)),_===f.k?f:new Te(_,f.x,f.y)}function A(f,_,b){var T=_[0]-b[0]*f.k,I=_[1]-b[1]*f.k;return T===f.x&&I===f.y?f:new Te(f.k,T,I)}function w(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function C(f,_,b,T){f.on("start.zoom",function(){R(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(T).end()}).tween("zoom",function(){var I=this,v=arguments,N=R(I,v).event(T),k=t.apply(I,v),z=b==null?w(k):typeof b=="function"?b.apply(I,v):b,q=Math.max(k[1][0]-k[0][0],k[1][1]-k[0][1]),L=I.__zoom,K=typeof _=="function"?_.apply(I,v):_,X=c(L.invert(z).concat(q/L.k),K.invert(z).concat(q/K.k));return function(W){if(W===1)W=K;else{var G=X(W),J=q/G[2];W=new Te(J,z[0]-G[0]*J,z[1]-G[1]*J)}N.zoom(null,W)}})}function R(f,_,b){return!b&&f.__zooming||new $(f,_)}function $(f,_){this.that=f,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(f,_),this.taps=0}$.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,_){return this.mouse&&f!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var _=ge(this.that).datum();u.call(f,this.that,new Yl(f,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:u}),_)}};function F(f,..._){if(!e.apply(this,arguments))return;var b=R(this,_).event(f),T=this.__zoom,I=Math.max(s[0],Math.min(s[1],T.k*Math.pow(2,r.apply(this,arguments)))),v=Se(f);if(b.wheel)(b.mouse[0][0]!==v[0]||b.mouse[0][1]!==v[1])&&(b.mouse[1]=T.invert(b.mouse[0]=v)),clearTimeout(b.wheel);else{if(T.k===I)return;b.mouse=[v,T.invert(v)],Xt(this),b.start()}wt(f),b.wheel=setTimeout(N,x),b.zoom("mouse",n(A(S(T,I),b.mouse[0],b.mouse[1]),b.extent,o));function N(){b.wheel=null,b.end()}}function D(f,..._){if(h||!e.apply(this,arguments))return;var b=f.currentTarget,T=R(this,_,!0).event(f),I=ge(f.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",q,!0),v=Se(f,b),N=f.clientX,k=f.clientY;wi(f.view),vn(f),T.mouse=[v,this.__zoom.invert(v)],Xt(this),T.start();function z(L){if(wt(L),!T.moved){var K=L.clientX-N,X=L.clientY-k;T.moved=K*K+X*X>m}T.event(L).zoom("mouse",n(A(T.that.__zoom,T.mouse[0]=Se(L,b),T.mouse[1]),T.extent,o))}function q(L){I.on("mousemove.zoom mouseup.zoom",null),vi(L.view,T.moved),wt(L),T.event(L).end()}}function P(f,..._){if(e.apply(this,arguments)){var b=this.__zoom,T=Se(f.changedTouches?f.changedTouches[0]:f,this),I=b.invert(T),v=b.k*(f.shiftKey?.5:2),N=n(A(S(b,v),T,I),t.apply(this,_),o);wt(f),a>0?ge(this).transition().duration(a).call(C,N,T,f):ge(this).call(g.transform,N,T,f)}}function V(f,..._){if(e.apply(this,arguments)){var b=f.touches,T=b.length,I=R(this,_,f.changedTouches.length===T).event(f),v,N,k,z;for(vn(f),N=0;N<T;++N)k=b[N],z=Se(k,this),z=[z,this.__zoom.invert(z),k.identifier],I.touch0?!I.touch1&&I.touch0[2]!==z[2]&&(I.touch1=z,I.taps=0):(I.touch0=z,v=!0,I.taps=1+!!l);l&&(l=clearTimeout(l)),v&&(I.taps<2&&(d=z[0],l=setTimeout(function(){l=null},p)),Xt(this),I.start())}}function H(f,..._){if(this.__zooming){var b=R(this,_).event(f),T=f.changedTouches,I=T.length,v,N,k,z;for(wt(f),v=0;v<I;++v)N=T[v],k=Se(N,this),b.touch0&&b.touch0[2]===N.identifier?b.touch0[0]=k:b.touch1&&b.touch1[2]===N.identifier&&(b.touch1[0]=k);if(N=b.that.__zoom,b.touch1){var q=b.touch0[0],L=b.touch0[1],K=b.touch1[0],X=b.touch1[1],W=(W=K[0]-q[0])*W+(W=K[1]-q[1])*W,G=(G=X[0]-L[0])*G+(G=X[1]-L[1])*G;N=S(N,Math.sqrt(W/G)),k=[(q[0]+K[0])/2,(q[1]+K[1])/2],z=[(L[0]+X[0])/2,(L[1]+X[1])/2]}else if(b.touch0)k=b.touch0[0],z=b.touch0[1];else return;b.zoom("touch",n(A(N,k,z),b.extent,o))}}function B(f,..._){if(this.__zooming){var b=R(this,_).event(f),T=f.changedTouches,I=T.length,v,N;for(vn(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),v=0;v<I;++v)N=T[v],b.touch0&&b.touch0[2]===N.identifier?delete b.touch0:b.touch1&&b.touch1[2]===N.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(N=Se(N,this),Math.hypot(d[0]-N[0],d[1]-N[1])<y)){var k=ge(this).on("dblclick.zoom");k&&k.apply(this,arguments)}}}return g.wheelDelta=function(f){return arguments.length?(r=typeof f=="function"?f:Bt(+f),g):r},g.filter=function(f){return arguments.length?(e=typeof f=="function"?f:Bt(!!f),g):e},g.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:Bt(!!f),g):i},g.extent=function(f){return arguments.length?(t=typeof f=="function"?f:Bt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),g):t},g.scaleExtent=function(f){return arguments.length?(s[0]=+f[0],s[1]=+f[1],g):[s[0],s[1]]},g.translateExtent=function(f){return arguments.length?(o[0][0]=+f[0][0],o[1][0]=+f[1][0],o[0][1]=+f[0][1],o[1][1]=+f[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(f){return arguments.length?(n=f,g):n},g.duration=function(f){return arguments.length?(a=+f,g):a},g.interpolate=function(f){return arguments.length?(c=f,g):c},g.on=function(){var f=u.on.apply(u,arguments);return f===u?g:f},g.clickDistance=function(f){return arguments.length?(m=(f=+f)*f,g):Math.sqrt(m)},g.tapDistance=function(f){return arguments.length?(y=+f,g):y},g}const cn=E.createContext(null),Jl=cn.Provider,Re={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},$i=Re.error001();function te(e,t){const n=E.useContext(cn);if(n===null)throw new Error($i);return si(n,e,t)}const re=()=>{const e=E.useContext(cn);if(e===null)throw new Error($i);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},eu=e=>e.userSelectionActive?"none":"all";function tu({position:e,children:t,className:n,style:r,...i}){const s=te(eu),o=`${e}`.split("-");return M.createElement("div",{className:le(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function nu({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:M.createElement(tu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},M.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const ru=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=E.useRef(null),[h,p]=E.useState({x:0,y:0,width:0,height:0}),x=le(["react-flow__edge-textwrapper",u]);return E.useEffect(()=>{if(d.current){const m=d.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:M.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...l},i&&M.createElement("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),M.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:r},n),c)};var iu=E.memo(ru);const Gn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ht=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Zn=(e={x:0,y:0},t)=>({x:ht(e.x,t[0][0],t[1][0]),y:ht(e.y,t[0][1],t[1][1])}),zr=(e,t,n)=>e<t?ht(Math.abs(e-t),1,50)/50:e>n?-ht(Math.abs(e-n),1,50)/50:0,zi=(e,t)=>{const n=zr(e.x,35,t.width-35)*20,r=zr(e.y,35,t.height-35)*20;return[n,r]},Vi=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ou=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),su=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Vr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},au=e=>fe(e.width)&&fe(e.height)&&fe(e.x)&&fe(e.y),fe=e=>!isNaN(e)&&isFinite(e),ee=Symbol.for("internals"),Fi=["Enter"," ","Escape"],cu=(e,t)=>{},lu=e=>"nativeEvent"in e;function Vn(e){var i,s;const t=lu(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Pi=e=>"clientX"in e,Ve=(e,t)=>{var s,o;const n=Pi(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},en=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},$t=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p=20})=>M.createElement(M.Fragment,null,M.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&M.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),i&&fe(n)&&fe(r)?M.createElement(iu,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);$t.displayName="BaseEdge";function vt(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function Bi({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function Hi({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}var Ze;(function(e){e.Strict="strict",e.Loose="loose"})(Ze||(Ze={}));var Ye;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ye||(Ye={}));var Rt;(function(e){e.Partial="partial",e.Full="full"})(Rt||(Rt={}));var $e;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($e||($e={}));var tn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(tn||(tn={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));function Fr({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===U.Left||e===U.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Li({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top}){const[o,a]=Fr({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,u]=Fr({pos:s,x1:r,y1:i,x2:e,y2:t}),[l,d,h,p]=Hi({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${r},${i}`,l,d,h,p]}const jn=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:s=U.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})=>{const[y,g,S]=Li({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return M.createElement($t,{path:y,labelX:g,labelY:S,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})});jn.displayName="SimpleBezierEdge";const Pr={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},uu=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Br=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function du({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:i,offset:s}){const o=Pr[t],a=Pr[r],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},l=uu({source:c,sourcePosition:t,target:u}),d=l.x!==0?"x":"y",h=l[d];let p=[],x,m;const y={x:0,y:0},g={x:0,y:0},[S,A,w,C]=Bi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*a[d]===-1){x=i.x??S,m=i.y??A;const $=[{x,y:c.y},{x,y:u.y}],F=[{x:c.x,y:m},{x:u.x,y:m}];o[d]===h?p=d==="x"?$:F:p=d==="x"?F:$}else{const $=[{x:c.x,y:u.y}],F=[{x:u.x,y:c.y}];if(d==="x"?p=o.x===h?F:$:p=o.y===h?$:F,t===r){const B=Math.abs(e[d]-n[d]);if(B<=s){const f=Math.min(s-1,s-B);o[d]===h?y[d]=(c[d]>e[d]?-1:1)*f:g[d]=(u[d]>n[d]?-1:1)*f}}if(t!==r){const B=d==="x"?"y":"x",f=o[d]===a[B],_=c[B]>u[B],b=c[B]<u[B];(o[d]===1&&(!f&&_||f&&b)||o[d]!==1&&(!f&&b||f&&_))&&(p=d==="x"?$:F)}const D={x:c.x+y.x,y:c.y+y.y},P={x:u.x+g.x,y:u.y+g.y},V=Math.max(Math.abs(D.x-p[0].x),Math.abs(P.x-p[0].x)),H=Math.max(Math.abs(D.y-p[0].y),Math.abs(P.y-p[0].y));V>=H?(x=(D.x+P.x)/2,m=p[0].y):(x=p[0].x,m=(D.y+P.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...p,{x:u.x+g.x,y:u.y+g.y},n],x,m,w,C]}function fu(e,t,n,r){const i=Math.min(Br(e,t)/2,Br(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function Fn({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[l,d,h,p,x]=du({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:u});return[l.reduce((y,g,S)=>{let A="";return S>0&&S<l.length-1?A=fu(l[S-1],g,l[S+1],o):A=`${S===0?"M":"L"}${g.x} ${g.y}`,y+=A,y},""),d,h,p,x]}const ln=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=U.Bottom,targetPosition:h=U.Top,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:y})=>{const[g,S,A]=Fn({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:h,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return M.createElement($t,{path:g,labelX:S,labelY:A,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:p,markerStart:x,interactionWidth:y})});ln.displayName="SmoothStepEdge";const Jn=E.memo(e=>{var t;return M.createElement(ln,{...e,pathOptions:E.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Jn.displayName="StepEdge";function hu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Bi({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const er=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[x,m,y]=hu({sourceX:e,sourceY:t,targetX:n,targetY:r});return M.createElement($t,{path:x,labelX:m,labelY:y,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:h,interactionWidth:p})});er.displayName="StraightEdge";function Ht(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Hr({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case U.Left:return[t-Ht(t-r,s),n];case U.Right:return[t+Ht(r-t,s),n];case U.Top:return[t,n-Ht(n-i,s)];case U.Bottom:return[t,n+Ht(i-n,s)]}}function qi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:s=U.Top,curvature:o=.25}){const[a,c]=Hr({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,l]=Hr({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,h,p,x]=Hi({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${i}`,d,h,p,x]}const nn=E.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:s=U.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:y})=>{const[g,S,A]=qi({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:m==null?void 0:m.curvature});return M.createElement($t,{path:g,labelX:S,labelY:A,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:y})});nn.displayName="BezierEdge";const tr=E.createContext(null),pu=tr.Provider;tr.Consumer;const mu=()=>E.useContext(tr),gu=e=>"id"in e&&"source"in e&&"target"in e,yu=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Pn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,xu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),wu=(e,t)=>{if(!e.source||!e.target)return t;let n;return gu(e)?n={...e}:n={...e,id:yu(e)},xu(n,t)?t:t.concat(n)},Bn=({x:e,y:t},[n,r,i],s,[o,a])=>{const c={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},Ui=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),lt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},nr=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=lt(i,t).positionAbsolute;return ou(r,Qn({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return su(n)},Oi=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(l=>{const{width:d,height:h,selectable:p=!0,hidden:x=!1}=l;if(o&&!p||x)return!1;const{positionAbsolute:m}=lt(l,a),y={x:m.x,y:m.y,width:d||0,height:h||0},g=zn(c,y),S=typeof d>"u"||typeof h>"u"||d===null||h===null,A=s&&g>0,w=(d||0)*(h||0);(S||A||g>=w||l.dragging)&&u.push(l)}),u},Ki=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Yi=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),u=ht(c,r,i),l=e.x+e.width/2,d=e.y+e.height/2,h=t/2-l*u,p=n/2-d*u;return{x:h,y:p,zoom:u}},Oe=(e,t=0)=>e.transition().duration(t);function Lr(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function vu(e,t,n,r,i,s){const{x:o,y:a}=Ve(e),u=t.elementsFromPoint(o,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const m=rr(void 0,u),y=u.getAttribute("data-handleid"),g=s({nodeId:x,id:y,type:m});if(g){const S=i.find(A=>A.nodeId===x&&A.type===m&&A.id===y);return{handle:{id:y,type:m,nodeId:x,x:(S==null?void 0:S.x)||n.x,y:(S==null?void 0:S.y)||n.y},validHandleResult:g}}}}let l=[],d=1/0;if(i.forEach(x=>{const m=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(m<=r){const y=s(x);m<=d&&(m<d?l=[{handle:x,validHandleResult:y}]:m===d&&l.push({handle:x,validHandleResult:y}),d=m)}}),!l.length)return{handle:null,validHandleResult:Xi()};if(l.length===1)return l[0];const h=l.some(({validHandleResult:x})=>x.isValid),p=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:m})=>p?x.type==="target":h?m.isValid:!0)||l[0]}const bu={source:null,target:null,sourceHandle:null,targetHandle:null},Xi=()=>({handleDomNode:null,isValid:!1,connection:bu,endHandle:null});function Wi(e,t,n,r,i,s,o){const a=i==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Xi(),handleDomNode:c};if(c){const l=rr(void 0,c),d=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),m={source:a?d:n,sourceHandle:a?h:r,target:a?n:d,targetHandle:a?r:h};u.connection=m,p&&x&&(t===Ze.Strict?a&&l==="source"||!a&&l==="target":d!==n||h!==r)&&(u.endHandle={nodeId:d,handleId:h,type:l},u.isValid=s(m))}return u}function Su({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[ee]){const{handleBounds:o}=s[ee];let a=[],c=[];o&&(a=Lr(s,o,"source",`${t}-${n}-${r}`),c=Lr(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function rr(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function bn(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Eu(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Gi({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=Vi(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:x,onConnectStart:m,panBy:y,getNodes:g,cancelConnection:S}=s();let A=0,w;const{x:C,y:R}=Ve(e),$=l==null?void 0:l.elementFromPoint(C,R),F=rr(c,$),D=h==null?void 0:h.getBoundingClientRect();if(!D||!F)return;let P,V=Ve(e,D),H=!1,B=null,f=!1,_=null;const b=Su({nodes:g(),nodeId:n,handleId:t,handleType:F}),T=()=>{if(!p)return;const[N,k]=zi(V,D);y({x:N,y:k}),A=requestAnimationFrame(T)};o({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:F,connectionStartHandle:{nodeId:n,handleId:t,type:F},connectionEndHandle:null}),m==null||m(e,{nodeId:n,handleId:t,handleType:F});function I(N){const{transform:k}=s();V=Ve(N,D);const{handle:z,validHandleResult:q}=vu(N,l,Bn(V,k,!1,[1,1]),x,b,L=>Wi(L,d,n,t,i?"target":"source",a,l));if(w=z,H||(T(),H=!0),_=q.handleDomNode,B=q.connection,f=q.isValid,o({connectionPosition:w&&f?Ui({x:w.x,y:w.y},k):V,connectionStatus:Eu(!!w,f),connectionEndHandle:q.endHandle}),!w&&!f&&!_)return bn(P);B.source!==B.target&&_&&(bn(P),P=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",f),_.classList.toggle("react-flow__handle-valid",f))}function v(N){var k,z;(w||_)&&B&&f&&(r==null||r(B)),(z=(k=s()).onConnectEnd)==null||z.call(k,N),c&&(u==null||u(N)),bn(P),S(),cancelAnimationFrame(A),H=!1,f=!1,B=null,_=null,l.removeEventListener("mousemove",I),l.removeEventListener("mouseup",v),l.removeEventListener("touchmove",I),l.removeEventListener("touchend",v)}l.addEventListener("mousemove",I),l.addEventListener("mouseup",v),l.addEventListener("touchmove",I),l.addEventListener("touchend",v)}const qr=()=>!0,_u=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Au=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},Zi=E.forwardRef(({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...h},p)=>{var D,P;const x=o||null,m=e==="target",y=re(),g=mu(),{connectOnClick:S,noPanClassName:A}=te(_u,oe),{connecting:w,clickConnecting:C}=te(Au(g,x,e),oe);g||(P=(D=y.getState()).onError)==null||P.call(D,"010",Re.error010());const R=V=>{const{defaultEdgeOptions:H,onConnect:B,hasDefaultEdges:f}=y.getState(),_={...H,...V};if(f){const{edges:b,setEdges:T}=y.getState();T(wu(_,b))}B==null||B(_),a==null||a(_)},$=V=>{if(!g)return;const H=Pi(V);i&&(H&&V.button===0||!H)&&Gi({event:V,handleId:x,nodeId:g,onConnect:R,isTarget:m,getState:y.getState,setState:y.setState,isValidConnection:n||y.getState().isValidConnection||qr}),H?l==null||l(V):d==null||d(V)},F=V=>{const{onClickConnectStart:H,onClickConnectEnd:B,connectionClickStartHandle:f,connectionMode:_,isValidConnection:b}=y.getState();if(!g||!f&&!i)return;if(!f){H==null||H(V,{nodeId:g,handleId:x,handleType:e}),y.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:x}});return}const T=Vi(V.target),I=n||b||qr,{connection:v,isValid:N}=Wi({nodeId:g,id:x,type:e},_,f.nodeId,f.handleId||null,f.type,I,T);N&&R(v),B==null||B(V),y.setState({connectionClickStartHandle:null})};return M.createElement("div",{"data-handleid":x,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${x}-${e}`,className:le(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:s,connecting:C,connectionindicator:r&&(i&&!w||s&&w)}]),onMouseDown:$,onTouchStart:$,onClick:S?F:void 0,ref:p,...h},c)});Zi.displayName="Handle";var We=E.memo(Zi);const Qi=({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:r=U.Bottom})=>M.createElement(M.Fragment,null,M.createElement(We,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,M.createElement(We,{type:"source",position:r,isConnectable:t}));Qi.displayName="DefaultNode";var Hn=E.memo(Qi);const ji=({data:e,isConnectable:t,sourcePosition:n=U.Bottom})=>M.createElement(M.Fragment,null,e==null?void 0:e.label,M.createElement(We,{type:"source",position:n,isConnectable:t}));ji.displayName="InputNode";var Ji=E.memo(ji);const eo=({data:e,isConnectable:t,targetPosition:n=U.Top})=>M.createElement(M.Fragment,null,M.createElement(We,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);eo.displayName="OutputNode";var to=E.memo(eo);const ir=()=>null;ir.displayName="GroupNode";const Nu=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Lt=e=>e.id;function Cu(e,t){return oe(e.selectedNodes.map(Lt),t.selectedNodes.map(Lt))&&oe(e.selectedEdges.map(Lt),t.selectedEdges.map(Lt))}const no=E.memo(({onSelectionChange:e})=>{const t=re(),{selectedNodes:n,selectedEdges:r}=te(Nu,Cu);return E.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});no.displayName="SelectionListener";const Tu=e=>!!e.onSelectionChange;function Du({onSelectionChange:e}){const t=te(Tu);return e||t?M.createElement(no,{onSelectionChange:e}):null}const Ru=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function nt(e,t){E.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Y(e,t,n){E.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Mu=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:m,maxZoom:y,nodeExtent:g,onNodesChange:S,onEdgesChange:A,elementsSelectable:w,connectionMode:C,snapGrid:R,snapToGrid:$,translateExtent:F,connectOnClick:D,defaultEdgeOptions:P,fitView:V,fitViewOptions:H,onNodesDelete:B,onEdgesDelete:f,onNodeDrag:_,onNodeDragStart:b,onNodeDragStop:T,onSelectionDrag:I,onSelectionDragStart:v,onSelectionDragStop:N,noPanClassName:k,nodeOrigin:z,rfId:q,autoPanOnConnect:L,autoPanOnNodeDrag:K,onError:X,connectionRadius:W,isValidConnection:G,nodeDragThreshold:J})=>{const{setNodes:Q,setEdges:he,setDefaultNodesAndEdges:ue,setMinZoom:pe,setMaxZoom:de,setTranslateExtent:ne,setNodeExtent:ve,reset:j}=te(Ru,oe),O=re();return E.useEffect(()=>{const ae=r==null?void 0:r.map(Fe=>({...Fe,...P}));return ue(n,ae),()=>{j()}},[]),Y("defaultEdgeOptions",P,O.setState),Y("connectionMode",C,O.setState),Y("onConnect",i,O.setState),Y("onConnectStart",s,O.setState),Y("onConnectEnd",o,O.setState),Y("onClickConnectStart",a,O.setState),Y("onClickConnectEnd",c,O.setState),Y("nodesDraggable",u,O.setState),Y("nodesConnectable",l,O.setState),Y("nodesFocusable",d,O.setState),Y("edgesFocusable",h,O.setState),Y("edgesUpdatable",p,O.setState),Y("elementsSelectable",w,O.setState),Y("elevateNodesOnSelect",x,O.setState),Y("snapToGrid",$,O.setState),Y("snapGrid",R,O.setState),Y("onNodesChange",S,O.setState),Y("onEdgesChange",A,O.setState),Y("connectOnClick",D,O.setState),Y("fitViewOnInit",V,O.setState),Y("fitViewOnInitOptions",H,O.setState),Y("onNodesDelete",B,O.setState),Y("onEdgesDelete",f,O.setState),Y("onNodeDrag",_,O.setState),Y("onNodeDragStart",b,O.setState),Y("onNodeDragStop",T,O.setState),Y("onSelectionDrag",I,O.setState),Y("onSelectionDragStart",v,O.setState),Y("onSelectionDragStop",N,O.setState),Y("noPanClassName",k,O.setState),Y("nodeOrigin",z,O.setState),Y("rfId",q,O.setState),Y("autoPanOnConnect",L,O.setState),Y("autoPanOnNodeDrag",K,O.setState),Y("onError",X,O.setState),Y("connectionRadius",W,O.setState),Y("isValidConnection",G,O.setState),Y("nodeDragThreshold",J,O.setState),nt(e,Q),nt(t,he),nt(m,pe),nt(y,de),nt(F,ne),nt(g,ve),null},Ur={display:"none"},Iu={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ro="react-flow__node-desc",io="react-flow__edge-desc",ku="react-flow__aria-live",$u=e=>e.ariaLiveMessage;function zu({rfId:e}){const t=te($u);return M.createElement("div",{id:`${ku}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Iu},t)}function Vu({rfId:e,disableKeyboardA11y:t}){return M.createElement(M.Fragment,null,M.createElement("div",{id:`${ro}-${e}`,style:Ur},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),M.createElement("div",{id:`${io}-${e}`,style:Ur},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&M.createElement(zu,{rfId:e}))}var Mt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=E.useState(!1),i=E.useRef(!1),s=E.useRef(new Set([])),[o,a]=E.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,h)=>d.concat(...h),[]);return[u,l]}return[[],[]]},[e]);return E.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const l=p=>{if(i.current=p.ctrlKey||p.metaKey||p.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Vn(p))return!1;const m=Kr(p.code,a);s.current.add(p[m]),Or(o,s.current,!1)&&(p.preventDefault(),r(!0))},d=p=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Vn(p))return!1;const m=Kr(p.code,a);Or(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(p[m]),p.key==="Meta"&&s.current.clear(),i.current=!1},h=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",l),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",l),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,r]),n};function Or(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Kr(e,t){return t.includes(e)?"code":"key"}function oo(e,t,n,r){var a,c;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),o=lt(s,r);return oo(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[ee])==null?void 0:a.z)??0)>(n.z??0)?((c=s[ee])==null?void 0:c.z)??0:n.z??0},r)}function so(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:c}=oo(r,e,{...r.position,z:((s=r[ee])==null?void 0:s.z)??0},t);r.positionAbsolute={x:o,y:a},r[ee].z=c,n!=null&&n[r.id]&&(r[ee].isParent=!0)}})}function Sn(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var p;const c=(fe(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},d=a.parentNode||a.parentId;d&&(s[d]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(l,ee,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[ee])==null?void 0:p.handleBounds,z:c}}),i.set(a.id,l)}),so(i,n,s),i}function ao(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=e(),h=t.initial&&!u&&l;if(a&&c&&(h||!t.initial)){const x=n().filter(y=>{var S;const g=t.includeHiddenNodes?y.width&&y.height:!y.hidden;return(S=t.nodes)!=null&&S.length?g&&t.nodes.some(A=>A.id===y.id):g}),m=x.every(y=>y.width&&y.height);if(x.length>0&&m){const y=nr(x,d),{x:g,y:S,zoom:A}=Yi(y,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),w=ze.translate(g,S).scale(A);return typeof t.duration=="number"&&t.duration>0?a.transform(Oe(c,t.duration),w):a.transform(c,w),!0}}return!1}function Fu(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ee]:r[ee],selected:n.selected})}),new Map(t)}function Pu(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function qt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:Fu(e,i)}),o==null||o(e)),t!=null&&t.length&&(u&&r({edges:Pu(t,s)}),a==null||a(t))}const rt=()=>{},Bu={zoomIn:rt,zoomOut:rt,zoomTo:rt,getZoom:()=>1,setViewport:rt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:rt,fitBounds:rt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Hu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Lu=()=>{const e=re(),{d3Zoom:t,d3Selection:n}=te(Hu,oe);return E.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Oe(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Oe(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(Oe(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,c]=e.getState().transform,u=ze.translate(i.x??o,i.y??a).scale(i.zoom??c);t.transform(Oe(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>ao(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,d=a/2-i*l,h=c/2-s*l,p=ze.translate(d,h).scale(l);t.transform(Oe(n,o==null?void 0:o.duration),p)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:d,zoom:h}=Yi(i,o,a,c,u,(s==null?void 0:s.padding)??.1),p=ze.translate(l,d).scale(h);t.transform(Oe(n,s==null?void 0:s.duration),p)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Bn(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return i;const{x:u,y:l}=c.getBoundingClientRect(),d={x:i.x-u,y:i.y-l};return Bn(d,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:c}=o.getBoundingClientRect(),u=Ui(i,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:Bu,[t,n])};function co(){const e=Lu(),t=re(),n=E.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),r=E.useCallback(m=>t.getState().nodeInternals.get(m),[]),i=E.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(y=>({...y}))},[]),s=E.useCallback(m=>{const{edges:y=[]}=t.getState();return y.find(g=>g.id===m)},[]),o=E.useCallback(m=>{const{getNodes:y,setNodes:g,hasDefaultNodes:S,onNodesChange:A}=t.getState(),w=y(),C=typeof m=="function"?m(w):m;if(S)g(C);else if(A){const R=C.length===0?w.map($=>({type:"remove",id:$.id})):C.map($=>({item:$,type:"reset"}));A(R)}},[]),a=E.useCallback(m=>{const{edges:y=[],setEdges:g,hasDefaultEdges:S,onEdgesChange:A}=t.getState(),w=typeof m=="function"?m(y):m;if(S)g(w);else if(A){const C=w.length===0?y.map(R=>({type:"remove",id:R.id})):w.map(R=>({item:R,type:"reset"}));A(C)}},[]),c=E.useCallback(m=>{const y=Array.isArray(m)?m:[m],{getNodes:g,setNodes:S,hasDefaultNodes:A,onNodesChange:w}=t.getState();if(A){const R=[...g(),...y];S(R)}else if(w){const C=y.map(R=>({item:R,type:"add"}));w(C)}},[]),u=E.useCallback(m=>{const y=Array.isArray(m)?m:[m],{edges:g=[],setEdges:S,hasDefaultEdges:A,onEdgesChange:w}=t.getState();if(A)S([...g,...y]);else if(w){const C=y.map(R=>({item:R,type:"add"}));w(C)}},[]),l=E.useCallback(()=>{const{getNodes:m,edges:y=[],transform:g}=t.getState(),[S,A,w]=g;return{nodes:m().map(C=>({...C})),edges:y.map(C=>({...C})),viewport:{x:S,y:A,zoom:w}}},[]),d=E.useCallback(({nodes:m,edges:y})=>{const{nodeInternals:g,getNodes:S,edges:A,hasDefaultNodes:w,hasDefaultEdges:C,onNodesDelete:R,onEdgesDelete:$,onNodesChange:F,onEdgesChange:D}=t.getState(),P=(m||[]).map(_=>_.id),V=(y||[]).map(_=>_.id),H=S().reduce((_,b)=>{const T=b.parentNode||b.parentId,I=!P.includes(b.id)&&T&&_.find(N=>N.id===T);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(P.includes(b.id)||I)&&_.push(b),_},[]),B=A.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),f=B.filter(_=>V.includes(_.id));if(H||f){const _=Ki(H,B),b=[...f,..._],T=b.reduce((I,v)=>(I.includes(v.id)||I.push(v.id),I),[]);if((C||w)&&(C&&t.setState({edges:A.filter(I=>!T.includes(I.id))}),w&&(H.forEach(I=>{g.delete(I.id)}),t.setState({nodeInternals:new Map(g)}))),T.length>0&&($==null||$(b),D&&D(T.map(I=>({id:I,type:"remove"})))),H.length>0&&(R==null||R(H),F)){const I=H.map(v=>({id:v.id,type:"remove"}));F(I)}}},[]),h=E.useCallback(m=>{const y=au(m),g=y?null:t.getState().nodeInternals.get(m.id);return!y&&!g?[null,null,y]:[y?m:Vr(g),g,y]},[]),p=E.useCallback((m,y=!0,g)=>{const[S,A,w]=h(m);return S?(g||t.getState().getNodes()).filter(C=>{if(!w&&(C.id===A.id||!C.positionAbsolute))return!1;const R=Vr(C),$=zn(R,S);return y&&$>0||$>=S.width*S.height}):[]},[]),x=E.useCallback((m,y,g=!0)=>{const[S]=h(m);if(!S)return!1;const A=zn(S,y);return g&&A>0||A>=S.width*S.height},[]);return E.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,r,i,s,o,a,c,u,l,d,p,x])}const qu={actInsideInputWithModifier:!1};var Uu=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=re(),{deleteElements:r}=co(),i=Mt(e,qu),s=Mt(t);E.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=o.filter(l=>l.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),E.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Ou(e){const t=re();E.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=Gn(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Re.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const or={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ku=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ut=e=>({x:e.x,y:e.y,zoom:e.k}),it=(e,t)=>e.target.closest(`.${t}`),Yr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xr=e=>{const t=e.ctrlKey&&en()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Yu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Xu=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ye.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:x,maxZoom:m,zoomActivationKeyCode:y,preventScrolling:g=!0,children:S,noWheelClassName:A,noPanClassName:w})=>{const C=E.useRef(),R=re(),$=E.useRef(!1),F=E.useRef(!1),D=E.useRef(null),P=E.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:H,d3ZoomHandler:B,userSelectionActive:f}=te(Yu,oe),_=Mt(y),b=E.useRef(0),T=E.useRef(!1),I=E.useRef();return Ou(D),E.useEffect(()=>{if(D.current){const v=D.current.getBoundingClientRect(),N=jl().scaleExtent([x,m]).translateExtent(p),k=ge(D.current).call(N),z=ze.translate(h.x,h.y).scale(ht(h.zoom,x,m)),q=[[0,0],[v.width,v.height]],L=N.constrain()(z,q,p);N.transform(k,L),N.wheelDelta(Xr),R.setState({d3Zoom:N,d3Selection:k,d3ZoomHandler:k.on("wheel.zoom"),transform:[L.x,L.y,L.k],domNode:D.current.closest(".react-flow")})}},[]),E.useEffect(()=>{H&&V&&(o&&!_&&!f?H.on("wheel.zoom",v=>{if(it(v,A))return!1;v.preventDefault(),v.stopImmediatePropagation();const N=H.property("__zoom").k||1;if(v.ctrlKey&&s){const G=Se(v),J=Xr(v),Q=N*Math.pow(2,J);V.scaleTo(H,Q,G,v);return}const k=v.deltaMode===1?20:1;let z=c===Ye.Vertical?0:v.deltaX*k,q=c===Ye.Horizontal?0:v.deltaY*k;!en()&&v.shiftKey&&c!==Ye.Vertical&&(z=v.deltaY*k,q=0),V.translateBy(H,-(z/N)*a,-(q/N)*a,{internal:!0});const L=Ut(H.property("__zoom")),{onViewportChangeStart:K,onViewportChange:X,onViewportChangeEnd:W}=R.getState();clearTimeout(I.current),T.current||(T.current=!0,t==null||t(v,L),K==null||K(L)),T.current&&(e==null||e(v,L),X==null||X(L),I.current=setTimeout(()=>{n==null||n(v,L),W==null||W(L),T.current=!1},150))},{passive:!1}):typeof B<"u"&&H.on("wheel.zoom",function(v,N){if(!g&&v.type==="wheel"&&!v.ctrlKey||it(v,A))return null;v.preventDefault(),B.call(this,v,N)},{passive:!1}))},[f,o,c,H,V,B,_,s,g,A,t,e,n]),E.useEffect(()=>{V&&V.on("start",v=>{var z,q;if(!v.sourceEvent||v.sourceEvent.internal)return null;b.current=(z=v.sourceEvent)==null?void 0:z.button;const{onViewportChangeStart:N}=R.getState(),k=Ut(v.transform);$.current=!0,P.current=k,((q=v.sourceEvent)==null?void 0:q.type)==="mousedown"&&R.setState({paneDragging:!0}),N==null||N(k),t==null||t(v.sourceEvent,k)})},[V,t]),E.useEffect(()=>{V&&(f&&!$.current?V.on("zoom",null):f||V.on("zoom",v=>{var k;const{onViewportChange:N}=R.getState();if(R.setState({transform:[v.transform.x,v.transform.y,v.transform.k]}),F.current=!!(r&&Yr(d,b.current??0)),(e||N)&&!((k=v.sourceEvent)!=null&&k.internal)){const z=Ut(v.transform);N==null||N(z),e==null||e(v.sourceEvent,z)}}))},[f,V,e,d,r]),E.useEffect(()=>{V&&V.on("end",v=>{if(!v.sourceEvent||v.sourceEvent.internal)return null;const{onViewportChangeEnd:N}=R.getState();if($.current=!1,R.setState({paneDragging:!1}),r&&Yr(d,b.current??0)&&!F.current&&r(v.sourceEvent),F.current=!1,(n||N)&&Ku(P.current,v.transform)){const k=Ut(v.transform);P.current=k,clearTimeout(C.current),C.current=setTimeout(()=>{N==null||N(k),n==null||n(v.sourceEvent,k)},o?150:0)}})},[V,o,d,n,r]),E.useEffect(()=>{V&&V.filter(v=>{const N=_||i,k=s&&v.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&v.button===1&&v.type==="mousedown"&&(it(v,"react-flow__node")||it(v,"react-flow__edge")))return!0;if(!d&&!N&&!o&&!u&&!s||f||!u&&v.type==="dblclick"||it(v,A)&&v.type==="wheel"||it(v,w)&&(v.type!=="wheel"||o&&v.type==="wheel"&&!_)||!s&&v.ctrlKey&&v.type==="wheel"||!N&&!o&&!k&&v.type==="wheel"||!d&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(d)&&!d.includes(v.button)&&v.type==="mousedown")return!1;const z=Array.isArray(d)&&d.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||v.type==="wheel")&&z})},[f,V,i,s,o,u,d,l,_]),M.createElement("div",{className:"react-flow__renderer",ref:D,style:or},S)},Wu=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Gu(){const{userSelectionActive:e,userSelectionRect:t}=te(Wu,oe);return e&&t?M.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Wr(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function lo(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Wr(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Wr(r,o);break}case"remove":return r}return r.push(o),r},n)}function uo(e,t){return lo(e,t)}function Zu(e,t){return lo(e,t)}const ke=(e,t)=>({id:e,type:"select",selected:t});function st(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(ke(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(ke(r.id,!1))),n},[])}const En=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Qu=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),fo=E.memo(({isSelecting:e,selectionMode:t=Rt.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const h=E.useRef(null),p=re(),x=E.useRef(0),m=E.useRef(0),y=E.useRef(),{userSelectionActive:g,elementsSelectable:S,dragging:A}=te(Qu,oe),w=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,m.current=0},C=B=>{s==null||s(B),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},R=B=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){B.preventDefault();return}o==null||o(B)},$=a?B=>a(B):void 0,F=B=>{const{resetSelectedElements:f,domNode:_}=p.getState();if(y.current=_==null?void 0:_.getBoundingClientRect(),!S||!e||B.button!==0||B.target!==h.current||!y.current)return;const{x:b,y:T}=Ve(B,y.current);f(),p.setState({userSelectionRect:{width:0,height:0,startX:b,startY:T,x:b,y:T}}),r==null||r(B)},D=B=>{const{userSelectionRect:f,nodeInternals:_,edges:b,transform:T,onNodesChange:I,onEdgesChange:v,nodeOrigin:N,getNodes:k}=p.getState();if(!e||!y.current||!f)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=Ve(B,y.current),q=f.startX??0,L=f.startY??0,K={...f,x:z.x<q?z.x:q,y:z.y<L?z.y:L,width:Math.abs(z.x-q),height:Math.abs(z.y-L)},X=k(),W=Oi(_,K,T,t===Rt.Partial,!0,N),G=Ki(W,b).map(Q=>Q.id),J=W.map(Q=>Q.id);if(x.current!==J.length){x.current=J.length;const Q=st(X,J);Q.length&&(I==null||I(Q))}if(m.current!==G.length){m.current=G.length;const Q=st(b,G);Q.length&&(v==null||v(Q))}p.setState({userSelectionRect:K})},P=B=>{if(B.button!==0)return;const{userSelectionRect:f}=p.getState();!g&&f&&B.target===h.current&&(C==null||C(B)),p.setState({nodesSelectionActive:x.current>0}),w(),i==null||i(B)},V=B=>{g&&(p.setState({nodesSelectionActive:x.current>0}),i==null||i(B)),w()},H=S&&(e||g);return M.createElement("div",{className:le(["react-flow__pane",{dragging:A,selection:e}]),onClick:H?void 0:En(C,h),onContextMenu:En(R,h),onWheel:En($,h),onMouseEnter:H?void 0:c,onMouseDown:H?F:void 0,onMouseMove:H?D:u,onMouseUp:H?P:void 0,onMouseLeave:H?V:l,ref:h,style:or},d,M.createElement(Gu,null))});fo.displayName="Pane";function ho(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:ho(r,t):!1}function Gr(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ju(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!ho(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function Ju(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function po(e,t,n,r,i=[0,0],s){const o=Ju(e,e.extent||r);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const d=n.get(c),{x:h,y:p}=lt(d,i).positionAbsolute;a=d&&fe(h)&&fe(p)&&fe(d.width)&&fe(d.height)?[[h+e.width*i[0],p+e.height*i[1]],[h+d.width-e.width+e.width*i[0],p+d.height-e.height+e.height*i[1]]]:a}else s==null||s("005",Re.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const d=n.get(c),{x:h,y:p}=lt(d,i).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const d=n.get(c);u=lt(d,i).positionAbsolute}const l=a&&a!=="parent"?Zn(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function _n({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Zr=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Gn(c)}})};function bt(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Ln({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Re.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):i([e])}function ed(){const e=re();return E.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:s?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function An(e){return(t,n,r)=>e==null?void 0:e(t,r)}function mo({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=re(),[c,u]=E.useState(!1),l=E.useRef([]),d=E.useRef({x:null,y:null}),h=E.useRef(0),p=E.useRef(null),x=E.useRef({x:0,y:0}),m=E.useRef(null),y=E.useRef(!1),g=E.useRef(!1),S=E.useRef(!1),A=ed();return E.useEffect(()=>{if(e!=null&&e.current){const w=ge(e.current),C=({x:F,y:D})=>{const{nodeInternals:P,onNodeDrag:V,onSelectionDrag:H,updateNodePositions:B,nodeExtent:f,snapGrid:_,snapToGrid:b,nodeOrigin:T,onError:I}=a.getState();d.current={x:F,y:D};let v=!1,N={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&f){const z=nr(l.current,T);N=Qn(z)}if(l.current=l.current.map(z=>{const q={x:F-z.distance.x,y:D-z.distance.y};b&&(q.x=_[0]*Math.round(q.x/_[0]),q.y=_[1]*Math.round(q.y/_[1]));const L=[[f[0][0],f[0][1]],[f[1][0],f[1][1]]];l.current.length>1&&f&&!z.extent&&(L[0][0]=z.positionAbsolute.x-N.x+f[0][0],L[1][0]=z.positionAbsolute.x+(z.width??0)-N.x2+f[1][0],L[0][1]=z.positionAbsolute.y-N.y+f[0][1],L[1][1]=z.positionAbsolute.y+(z.height??0)-N.y2+f[1][1]);const K=po(z,q,P,L,T,I);return v=v||z.position.x!==K.position.x||z.position.y!==K.position.y,z.position=K.position,z.positionAbsolute=K.positionAbsolute,z}),!v)return;B(l.current,!0,!0),u(!0);const k=i?V:An(H);if(k&&m.current){const[z,q]=_n({nodeId:i,dragItems:l.current,nodeInternals:P});k(m.current,z,q)}},R=()=>{if(!p.current)return;const[F,D]=zi(x.current,p.current);if(F!==0||D!==0){const{transform:P,panBy:V}=a.getState();d.current.x=(d.current.x??0)-F/P[2],d.current.y=(d.current.y??0)-D/P[2],V({x:F,y:D})&&C(d.current)}h.current=requestAnimationFrame(R)},$=F=>{var T;const{nodeInternals:D,multiSelectionActive:P,nodesDraggable:V,unselectNodesAndEdges:H,onNodeDragStart:B,onSelectionDragStart:f}=a.getState();g.current=!0;const _=i?B:An(f);(!o||!s)&&!P&&i&&((T=D.get(i))!=null&&T.selected||H()),i&&s&&o&&Ln({id:i,store:a,nodeRef:e});const b=A(F);if(d.current=b,l.current=ju(D,V,b,i),_&&l.current){const[I,v]=_n({nodeId:i,dragItems:l.current,nodeInternals:D});_(F.sourceEvent,I,v)}};if(t)w.on(".drag",null);else{const F=cc().on("start",D=>{const{domNode:P,nodeDragThreshold:V}=a.getState();V===0&&$(D),S.current=!1;const H=A(D);d.current=H,p.current=(P==null?void 0:P.getBoundingClientRect())||null,x.current=Ve(D.sourceEvent,p.current)}).on("drag",D=>{var B,f;const P=A(D),{autoPanOnNodeDrag:V,nodeDragThreshold:H}=a.getState();if(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1&&(S.current=!0),!S.current){if(!y.current&&g.current&&V&&(y.current=!0,R()),!g.current){const _=P.xSnapped-(((B=d==null?void 0:d.current)==null?void 0:B.x)??0),b=P.ySnapped-(((f=d==null?void 0:d.current)==null?void 0:f.y)??0);Math.sqrt(_*_+b*b)>H&&$(D)}(d.current.x!==P.xSnapped||d.current.y!==P.ySnapped)&&l.current&&g.current&&(m.current=D.sourceEvent,x.current=Ve(D.sourceEvent,p.current),C(P))}}).on("end",D=>{if(!(!g.current||S.current)&&(u(!1),y.current=!1,g.current=!1,cancelAnimationFrame(h.current),l.current)){const{updateNodePositions:P,nodeInternals:V,onNodeDragStop:H,onSelectionDragStop:B}=a.getState(),f=i?H:An(B);if(P(l.current,!1,!1),f){const[_,b]=_n({nodeId:i,dragItems:l.current,nodeInternals:V});f(D.sourceEvent,_,b)}}}).filter(D=>{const P=D.target;return!D.button&&(!n||!Gr(P,`.${n}`,e))&&(!r||Gr(P,r,e))});return w.call(F),()=>{w.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,A]),c}function go(){const e=re();return E.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),d=o().filter(S=>S.selected&&(S.draggable||l&&typeof S.draggable>"u")),h=a?c[0]:5,p=a?c[1]:5,x=n.isShiftPressed?4:1,m=n.x*h*x,y=n.y*p*x,g=d.map(S=>{if(S.positionAbsolute){const A={x:S.positionAbsolute.x+m,y:S.positionAbsolute.y+y};a&&(A.x=c[0]*Math.round(A.x/c[0]),A.y=c[1]*Math.round(A.y/c[1]));const{positionAbsolute:w,position:C}=po(S,A,r,i,void 0,u);S.position=C,S.positionAbsolute=w}return S});s(g,!0,!1)},[])}const ut={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var St=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:x,onDoubleClick:m,style:y,className:g,isDraggable:S,isSelectable:A,isConnectable:w,isFocusable:C,selectNodesOnDrag:R,sourcePosition:$,targetPosition:F,hidden:D,resizeObserver:P,dragHandle:V,zIndex:H,isParent:B,noDragClassName:f,noPanClassName:_,initialized:b,disableKeyboardA11y:T,ariaLabel:I,rfId:v,hasHandleBounds:N})=>{const k=re(),z=E.useRef(null),q=E.useRef(null),L=E.useRef($),K=E.useRef(F),X=E.useRef(r),W=A||S||l||d||h||p,G=go(),J=bt(n,k.getState,d),Q=bt(n,k.getState,h),he=bt(n,k.getState,p),ue=bt(n,k.getState,x),pe=bt(n,k.getState,m),de=j=>{const{nodeDragThreshold:O}=k.getState();if(A&&(!R||!S||O>0)&&Ln({id:n,store:k,nodeRef:z}),l){const ae=k.getState().nodeInternals.get(n);ae&&l(j,{...ae})}},ne=j=>{if(!Vn(j)&&!T)if(Fi.includes(j.key)&&A){const O=j.key==="Escape";Ln({id:n,store:k,unselect:O,nodeRef:z})}else S&&u&&Object.prototype.hasOwnProperty.call(ut,j.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${j.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),G({x:ut[j.key].x,y:ut[j.key].y,isShiftPressed:j.shiftKey}))};E.useEffect(()=>()=>{q.current&&(P==null||P.unobserve(q.current),q.current=null)},[]),E.useEffect(()=>{if(z.current&&!D){const j=z.current;(!b||!N||q.current!==j)&&(q.current&&(P==null||P.unobserve(q.current)),P==null||P.observe(j),q.current=j)}},[D,b,N]),E.useEffect(()=>{const j=X.current!==r,O=L.current!==$,ae=K.current!==F;z.current&&(j||O||ae)&&(j&&(X.current=r),O&&(L.current=$),ae&&(K.current=F),k.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,r,$,F]);const ve=mo({nodeRef:z,disabled:D||!S,noDragClassName:f,handleSelector:V,nodeId:n,isSelectable:A,selectNodesOnDrag:R});return D?null:M.createElement("div",{className:le(["react-flow__node",`react-flow__node-${r}`,{[_]:S},g,{selected:u,selectable:A,parent:B,dragging:ve}]),ref:z,style:{zIndex:H,transform:`translate(${a}px,${c}px)`,pointerEvents:W?"all":"none",visibility:b?"visible":"hidden",...y},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:J,onMouseMove:Q,onMouseLeave:he,onContextMenu:ue,onClick:de,onDoubleClick:pe,onKeyDown:C?ne:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":T?void 0:`${ro}-${v}`,"aria-label":I},M.createElement(pu,{value:n},M.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:w,sourcePosition:$,targetPosition:F,dragging:ve,dragHandle:V,zIndex:H})))};return t.displayName="NodeWrapper",E.memo(t)};const td=e=>{const t=e.getNodes().filter(n=>n.selected);return{...nr(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function nd({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=re(),{width:i,height:s,x:o,y:a,transformString:c,userSelectionActive:u}=te(td,oe),l=go(),d=E.useRef(null);if(E.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),mo({nodeRef:d}),u||!i||!s)return null;const h=e?x=>{const m=r.getState().getNodes().filter(y=>y.selected);e(x,m)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(ut,x.key)&&l({x:ut[x.key].x,y:ut[x.key].y,isShiftPressed:x.shiftKey})};return M.createElement("div",{className:le(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},M.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s,top:a,left:o}}))}var rd=E.memo(nd);const id=e=>e.nodesSelectionActive,yo=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:x,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:g,zoomActivationKeyCode:S,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:C,panOnScroll:R,panOnScrollSpeed:$,panOnScrollMode:F,zoomOnDoubleClick:D,panOnDrag:P,defaultViewport:V,translateExtent:H,minZoom:B,maxZoom:f,preventScrolling:_,onSelectionContextMenu:b,noWheelClassName:T,noPanClassName:I,disableKeyboardA11y:v})=>{const N=te(id),k=Mt(d),z=Mt(g),q=z||P,L=z||R,K=k||h&&q!==!0;return Uu({deleteKeyCode:a,multiSelectionKeyCode:y}),M.createElement(Xu,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:s,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:C,panOnScroll:L,panOnScrollSpeed:$,panOnScrollMode:F,zoomOnDoubleClick:D,panOnDrag:!k&&q,defaultViewport:V,translateExtent:H,minZoom:B,maxZoom:f,zoomActivationKeyCode:S,preventScrolling:_,noWheelClassName:T,noPanClassName:I},M.createElement(fo,{onSelectionStart:x,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:q,isSelecting:!!K,selectionMode:p},e,N&&M.createElement(rd,{onSelectionContextMenu:b,noPanClassName:I,disableKeyboardA11y:v})))};yo.displayName="FlowRenderer";var od=E.memo(yo);function sd(e){return te(E.useCallback(n=>e?Oi(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function ad(e){const t={input:St(e.input||Ji),default:St(e.default||Hn),output:St(e.output||to),group:St(e.group||ir)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=St(e[s]||Hn),i),n);return{...t,...r}}const cd=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},ld=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),xo=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=te(ld,oe),a=sd(e.onlyRenderVisibleElements),c=E.useRef(),u=E.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=l,l},[]);return E.useEffect(()=>()=>{var l;(l=c==null?void 0:c.current)==null||l.disconnect()},[]),M.createElement("div",{className:"react-flow__nodes",style:or},a.map(l=>{var C,R,$;let d=l.type||"default";e.nodeTypes[d]||(o==null||o("003",Re.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(l.draggable||t&&typeof l.draggable>"u"),x=!!(l.selectable||i&&typeof l.selectable>"u"),m=!!(l.connectable||n&&typeof l.connectable>"u"),y=!!(l.focusable||r&&typeof l.focusable>"u"),g=e.nodeExtent?Zn(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,S=(g==null?void 0:g.x)??0,A=(g==null?void 0:g.y)??0,w=cd({x:S,y:A,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return M.createElement(h,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||U.Bottom,targetPosition:l.targetPosition||U.Top,hidden:l.hidden,xPos:S,yPos:A,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:p,isSelectable:x,isConnectable:m,isFocusable:y,resizeObserver:u,dragHandle:l.dragHandle,zIndex:((C=l[ee])==null?void 0:C.z)??0,isParent:!!((R=l[ee])!=null&&R.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!(($=l[ee])!=null&&$.handleBounds)})}))};xo.displayName="NodeRenderer";var ud=E.memo(xo);const dd=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,fd=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Qr="react-flow__edgeupdater",jr=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>M.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:le([Qr,`${Qr}-${a}`]),cx:dd(t,r,e),cy:fd(n,r,e),r,stroke:"transparent",fill:"transparent"}),hd=()=>!0;var ot=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,style:y,source:g,target:S,sourceX:A,sourceY:w,targetX:C,targetY:R,sourcePosition:$,targetPosition:F,elementsSelectable:D,hidden:P,sourceHandleId:V,targetHandleId:H,onContextMenu:B,onMouseEnter:f,onMouseMove:_,onMouseLeave:b,reconnectRadius:T,onReconnect:I,onReconnectStart:v,onReconnectEnd:N,markerEnd:k,markerStart:z,rfId:q,ariaLabel:L,isFocusable:K,isReconnectable:X,pathOptions:W,interactionWidth:G,disableKeyboardA11y:J})=>{const Q=E.useRef(null),[he,ue]=E.useState(!1),[pe,de]=E.useState(!1),ne=re(),ve=E.useMemo(()=>`url('#${Pn(z,q)}')`,[z,q]),j=E.useMemo(()=>`url('#${Pn(k,q)}')`,[k,q]);if(P)return null;const O=ie=>{var be;const{edges:me,addSelectedEdges:He,unselectNodesAndEdges:Le,multiSelectionActive:qe}=ne.getState(),Ne=me.find(gt=>gt.id===n);Ne&&(D&&(ne.setState({nodesSelectionActive:!1}),Ne.selected&&qe?(Le({nodes:[],edges:[Ne]}),(be=Q.current)==null||be.blur()):He([n])),o&&o(ie,Ne))},ae=vt(n,ne.getState,a),Fe=vt(n,ne.getState,B),pt=vt(n,ne.getState,f),Qe=vt(n,ne.getState,_),je=vt(n,ne.getState,b),Ae=(ie,me)=>{if(ie.button!==0)return;const{edges:He,isValidConnection:Le}=ne.getState(),qe=me?S:g,Ne=(me?H:V)||null,be=me?"target":"source",gt=Le||hd,un=me,yt=He.find(Ue=>Ue.id===n);de(!0),v==null||v(ie,yt,be);const dn=Ue=>{de(!1),N==null||N(Ue,yt,be)};Gi({event:ie,handleId:Ne,nodeId:qe,onConnect:Ue=>I==null?void 0:I(yt,Ue),isTarget:un,getState:ne.getState,setState:ne.setState,isValidConnection:gt,edgeUpdaterType:be,onReconnectEnd:dn})},Je=ie=>Ae(ie,!0),Pe=ie=>Ae(ie,!1),Be=()=>ue(!0),et=()=>ue(!1),tt=!D&&!o,mt=ie=>{var me;if(!J&&Fi.includes(ie.key)&&D){const{unselectNodesAndEdges:He,addSelectedEdges:Le,edges:qe}=ne.getState();ie.key==="Escape"?((me=Q.current)==null||me.blur(),He({edges:[qe.find(be=>be.id===n)]})):Le([n])}};return M.createElement("g",{className:le(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:u,inactive:tt,updating:he}]),onClick:O,onDoubleClick:ae,onContextMenu:Fe,onMouseEnter:pt,onMouseMove:Qe,onMouseLeave:je,onKeyDown:K?mt:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":L===null?void 0:L||`Edge from ${g} to ${S}`,"aria-describedby":K?`${io}-${q}`:void 0,ref:Q},!pe&&M.createElement(e,{id:n,source:g,target:S,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,data:s,style:y,sourceX:A,sourceY:w,targetX:C,targetY:R,sourcePosition:$,targetPosition:F,sourceHandleId:V,targetHandleId:H,markerStart:ve,markerEnd:j,pathOptions:W,interactionWidth:G}),X&&M.createElement(M.Fragment,null,(X==="source"||X===!0)&&M.createElement(jr,{position:$,centerX:A,centerY:w,radius:T,onMouseDown:Je,onMouseEnter:Be,onMouseOut:et,type:"source"}),(X==="target"||X===!0)&&M.createElement(jr,{position:F,centerX:C,centerY:R,radius:T,onMouseDown:Pe,onMouseEnter:Be,onMouseOut:et,type:"target"})))};return t.displayName="EdgeWrapper",E.memo(t)};function pd(e){const t={default:ot(e.default||nn),straight:ot(e.bezier||er),step:ot(e.step||Jn),smoothstep:ot(e.step||ln),simplebezier:ot(e.simplebezier||jn)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=ot(e[s]||nn),i),n);return{...t,...r}}function Jr(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case U.Top:return{x:r+s/2,y:i};case U.Right:return{x:r+s,y:i+o/2};case U.Bottom:return{x:r+s/2,y:i+o};case U.Left:return{x:r,y:i+o/2}}}function ei(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const md=(e,t,n,r,i,s)=>{const o=Jr(n,e,t),a=Jr(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function gd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=Qn({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),h=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*h)>0}function ti(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[ee])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const yd=[{level:0,isMaxLevel:!0,edges:[]}];function xd(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var l,d;const c=fe(a.zIndex);let u=c?a.zIndex:0;if(n){const h=t.get(a.target),p=t.get(a.source),x=a.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),m=Math.max(((l=p==null?void 0:p[ee])==null?void 0:l.z)||0,((d=h==null?void 0:h[ee])==null?void 0:d.z)||0,1e3);u=(c?a.zIndex:0)+(x?m:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===r}});return s.length===0?yd:s}function wd(e,t,n){const r=te(E.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&gd({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return xd(r,t,n)}const vd=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),bd=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ni={[tn.Arrow]:vd,[tn.ArrowClosed]:bd};function Sd(e){const t=re();return E.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(ni,e)?ni[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Re.error009(e)),null)},[e])}const Ed=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=Sd(t);return c?M.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},M.createElement(c,{color:n,strokeWidth:o})):null},_d=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Pn(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},wo=({defaultColor:e,rfId:t})=>{const n=te(E.useCallback(_d({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return M.createElement("defs",null,n.map(r=>M.createElement(Ed,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};wo.displayName="MarkerDefinitions";var Ad=E.memo(wo);const Nd=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vo=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:m,children:y,disableKeyboardA11y:g})=>{const{edgesFocusable:S,edgesUpdatable:A,elementsSelectable:w,width:C,height:R,connectionMode:$,nodeInternals:F,onError:D}=te(Nd,oe),P=wd(t,F,n);return C?M.createElement(M.Fragment,null,P.map(({level:V,edges:H,isMaxLevel:B})=>M.createElement("svg",{key:V,style:{zIndex:V},width:C,height:R,className:"react-flow__edges react-flow__container"},B&&M.createElement(Ad,{defaultColor:e,rfId:r}),M.createElement("g",null,H.map(f=>{const[_,b,T]=ti(F.get(f.source)),[I,v,N]=ti(F.get(f.target));if(!T||!N)return null;let k=f.type||"default";i[k]||(D==null||D("011",Re.error011(k)),k="default");const z=i[k]||i.default,q=$===Ze.Strict?v.target:(v.target??[]).concat(v.source??[]),L=ei(b.source,f.sourceHandle),K=ei(q,f.targetHandle),X=(L==null?void 0:L.position)||U.Bottom,W=(K==null?void 0:K.position)||U.Top,G=!!(f.focusable||S&&typeof f.focusable>"u"),J=f.reconnectable||f.updatable,Q=typeof h<"u"&&(J||A&&typeof J>"u");if(!L||!K)return D==null||D("008",Re.error008(L,f)),null;const{sourceX:he,sourceY:ue,targetX:pe,targetY:de}=md(_,L,X,I,K,W);return M.createElement(z,{key:f.id,id:f.id,className:le([f.className,s]),type:k,data:f.data,selected:!!f.selected,animated:!!f.animated,hidden:!!f.hidden,label:f.label,labelStyle:f.labelStyle,labelShowBg:f.labelShowBg,labelBgStyle:f.labelBgStyle,labelBgPadding:f.labelBgPadding,labelBgBorderRadius:f.labelBgBorderRadius,style:f.style,source:f.source,target:f.target,sourceHandleId:f.sourceHandle,targetHandleId:f.targetHandle,markerEnd:f.markerEnd,markerStart:f.markerStart,sourceX:he,sourceY:ue,targetX:pe,targetY:de,sourcePosition:X,targetPosition:W,elementsSelectable:w,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:d,onReconnect:h,onReconnectStart:p,onReconnectEnd:x,reconnectRadius:m,rfId:r,ariaLabel:f.ariaLabel,isFocusable:G,isReconnectable:Q,pathOptions:"pathOptions"in f?f.pathOptions:void 0,interactionWidth:f.interactionWidth,disableKeyboardA11y:g})})))),y):null};vo.displayName="EdgeRenderer";var Cd=E.memo(vo);const Td=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Dd({children:e}){const t=te(Td);return M.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Rd(e){const t=co(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Md={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},bo=({nodeId:e,handleType:t,style:n,type:r=$e.Bezier,CustomComponent:i,connectionStatus:s})=>{var R,$,F;const{fromNode:o,handleId:a,toX:c,toY:u,connectionMode:l}=te(E.useCallback(D=>({fromNode:D.nodeInternals.get(e),handleId:D.connectionHandleId,toX:(D.connectionPosition.x-D.transform[0])/D.transform[2],toY:(D.connectionPosition.y-D.transform[1])/D.transform[2],connectionMode:D.connectionMode}),[e]),oe),d=(R=o==null?void 0:o[ee])==null?void 0:R.handleBounds;let h=d==null?void 0:d[t];if(l===Ze.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!o||!h)return null;const p=a?h.find(D=>D.id===a):h[0],x=p?p.x+p.width/2:(o.width??0)/2,m=p?p.y+p.height/2:o.height??0,y=((($=o.positionAbsolute)==null?void 0:$.x)??0)+x,g=(((F=o.positionAbsolute)==null?void 0:F.y)??0)+m,S=p==null?void 0:p.position,A=S?Md[S]:null;if(!S||!A)return null;if(i)return M.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:y,fromY:g,toX:c,toY:u,fromPosition:S,toPosition:A,connectionStatus:s});let w="";const C={sourceX:y,sourceY:g,sourcePosition:S,targetX:c,targetY:u,targetPosition:A};return r===$e.Bezier?[w]=qi(C):r===$e.Step?[w]=Fn({...C,borderRadius:0}):r===$e.SmoothStep?[w]=Fn(C):r===$e.SimpleBezier?[w]=Li(C):w=`M${y},${g} ${c},${u}`,M.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};bo.displayName="ConnectionLine";const Id=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function kd({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:u}=te(Id,oe);return!(i&&s&&a&&o)?null:M.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},M.createElement("g",{className:le(["react-flow__connection",u])},M.createElement(bo,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function ri(e,t){return E.useRef(null),re(),E.useMemo(()=>t(e),[e])}const So=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:m,onSelectionEnd:y,connectionLineType:g,connectionLineStyle:S,connectionLineComponent:A,connectionLineContainerStyle:w,selectionKeyCode:C,selectionOnDrag:R,selectionMode:$,multiSelectionKeyCode:F,panActivationKeyCode:D,zoomActivationKeyCode:P,deleteKeyCode:V,onlyRenderVisibleElements:H,elementsSelectable:B,selectNodesOnDrag:f,defaultViewport:_,translateExtent:b,minZoom:T,maxZoom:I,preventScrolling:v,defaultMarkerColor:N,zoomOnScroll:k,zoomOnPinch:z,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:K,zoomOnDoubleClick:X,panOnDrag:W,onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:he,onPaneScroll:ue,onPaneContextMenu:pe,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:ve,onEdgeMouseLeave:j,onReconnect:O,onReconnectStart:ae,onReconnectEnd:Fe,reconnectRadius:pt,noDragClassName:Qe,noWheelClassName:je,noPanClassName:Ae,elevateEdgesOnSelect:Je,disableKeyboardA11y:Pe,nodeOrigin:Be,nodeExtent:et,rfId:tt})=>{const mt=ri(e,ad),ie=ri(t,pd);return Rd(s),M.createElement(od,{onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:he,onPaneContextMenu:pe,onPaneScroll:ue,deleteKeyCode:V,selectionKeyCode:C,selectionOnDrag:R,selectionMode:$,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:F,panActivationKeyCode:D,zoomActivationKeyCode:P,elementsSelectable:B,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:k,zoomOnPinch:z,zoomOnDoubleClick:X,panOnScroll:q,panOnScrollSpeed:L,panOnScrollMode:K,panOnDrag:W,defaultViewport:_,translateExtent:b,minZoom:T,maxZoom:I,onSelectionContextMenu:x,preventScrolling:v,noDragClassName:Qe,noWheelClassName:je,noPanClassName:Ae,disableKeyboardA11y:Pe},M.createElement(Dd,null,M.createElement(Cd,{edgeTypes:ie,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:H,onEdgeContextMenu:de,onEdgeMouseEnter:ne,onEdgeMouseMove:ve,onEdgeMouseLeave:j,onReconnect:O,onReconnectStart:ae,onReconnectEnd:Fe,reconnectRadius:pt,defaultMarkerColor:N,noPanClassName:Ae,elevateEdgesOnSelect:!!Je,disableKeyboardA11y:Pe,rfId:tt},M.createElement(kd,{style:S,type:g,component:A,containerStyle:w})),M.createElement("div",{className:"react-flow__edgelabel-renderer"}),M.createElement(ud,{nodeTypes:mt,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:f,onlyRenderVisibleElements:H,noPanClassName:Ae,noDragClassName:Qe,disableKeyboardA11y:Pe,nodeOrigin:Be,nodeExtent:et,rfId:tt})))};So.displayName="GraphView";var $d=E.memo(So);const qn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Me={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:qn,nodeExtent:qn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ze.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:cu,isValidConnection:void 0},zd=()=>vs((e,t)=>({...Me,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:Sn(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?Sn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c==null?void 0:c.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((m,y)=>{const g=i.get(y.id);if(g!=null&&g.hidden)i.set(g.id,{...g,[ee]:{...g[ee],handleBounds:void 0}});else if(g){const S=Gn(y.nodeElement);!!(S.width&&S.height&&(g.width!==S.width||g.height!==S.height||y.forceUpdate))&&(i.set(g.id,{...g,[ee]:{...g[ee],handleBounds:{source:Zr(".source",y.nodeElement,h,u),target:Zr(".target",y.nodeElement,h,u)}},...S}),m.push({id:g.id,type:"dimensions",dimensions:S}))}return m},[]);so(i,u);const x=o||s&&!o&&ao(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=uo(n,a()),l=Sn(u,i,o,c);e({nodeInternals:l})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>ke(c,!0)):(o=st(s(),n),a=st(i,[])),qt({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>ke(c,!0)):(o=st(i,n),a=st(s(),[])),qt({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,c=o.map(l=>(l.selected=!1,ke(l.id,!1))),u=a.map(l=>ke(l.id,!1));qt({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>ke(a.id,!1)),o=n.filter(a=>a.selected).map(a=>ke(a.id,!1));qt({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Zn(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=ze.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),l=[[0,0],[i,s]],d=o==null?void 0:o.constrain()(u,l,c);return o.transform(a,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Me.connectionNodeId,connectionHandleId:Me.connectionHandleId,connectionHandleType:Me.connectionHandleType,connectionStatus:Me.connectionStatus,connectionStartHandle:Me.connectionStartHandle,connectionEndHandle:Me.connectionEndHandle}),reset:()=>e({...Me})}),Object.is),Eo=({children:e})=>{const t=E.useRef(null);return t.current||(t.current=zd()),M.createElement(Jl,{value:t.current},e)};Eo.displayName="ReactFlowProvider";const _o=({children:e})=>E.useContext(cn)?M.createElement(M.Fragment,null,e):M.createElement(Eo,null,e);_o.displayName="ReactFlowWrapper";const Vd={input:Ji,default:Hn,output:to,group:ir},Fd={default:nn,straight:er,step:Jn,smoothstep:ln,simplebezier:jn},Pd=[0,0],Bd=[15,15],Hd={x:0,y:0,zoom:1},Ld={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},qd=E.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=Vd,edgeTypes:o=Fd,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:y,onClickConnectEnd:g,onNodeMouseEnter:S,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:C,onNodeDoubleClick:R,onNodeDragStart:$,onNodeDrag:F,onNodeDragStop:D,onNodesDelete:P,onEdgesDelete:V,onSelectionChange:H,onSelectionDragStart:B,onSelectionDrag:f,onSelectionDragStop:_,onSelectionContextMenu:b,onSelectionStart:T,onSelectionEnd:I,connectionMode:v=Ze.Strict,connectionLineType:N=$e.Bezier,connectionLineStyle:k,connectionLineComponent:z,connectionLineContainerStyle:q,deleteKeyCode:L="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:X=!1,selectionMode:W=Rt.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:J=en()?"Meta":"Control",zoomActivationKeyCode:Q=en()?"Meta":"Control",snapToGrid:he=!1,snapGrid:ue=Bd,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:de=!0,nodesDraggable:ne,nodesConnectable:ve,nodesFocusable:j,nodeOrigin:O=Pd,edgesFocusable:ae,edgesUpdatable:Fe,elementsSelectable:pt,defaultViewport:Qe=Hd,minZoom:je=.5,maxZoom:Ae=2,translateExtent:Je=qn,preventScrolling:Pe=!0,nodeExtent:Be,defaultMarkerColor:et="#b1b1b7",zoomOnScroll:tt=!0,zoomOnPinch:mt=!0,panOnScroll:ie=!1,panOnScrollSpeed:me=.5,panOnScrollMode:He=Ye.Free,zoomOnDoubleClick:Le=!0,panOnDrag:qe=!0,onPaneClick:Ne,onPaneMouseEnter:be,onPaneMouseMove:gt,onPaneMouseLeave:un,onPaneScroll:yt,onPaneContextMenu:dn,children:ar,onEdgeContextMenu:Ue,onEdgeDoubleClick:Co,onEdgeMouseEnter:To,onEdgeMouseMove:Do,onEdgeMouseLeave:Ro,onEdgeUpdate:Mo,onEdgeUpdateStart:Io,onEdgeUpdateEnd:ko,onReconnect:$o,onReconnectStart:zo,onReconnectEnd:Vo,reconnectRadius:Fo=10,edgeUpdaterRadius:Po=10,onNodesChange:Bo,onEdgesChange:Ho,noDragClassName:Lo="nodrag",noWheelClassName:qo="nowheel",noPanClassName:cr="nopan",fitView:Uo=!1,fitViewOptions:Oo,connectOnClick:Ko=!0,attributionPosition:Yo,proOptions:Xo,defaultEdgeOptions:Wo,elevateNodesOnSelect:Go=!0,elevateEdgesOnSelect:Zo=!1,disableKeyboardA11y:lr=!1,autoPanOnConnect:Qo=!0,autoPanOnNodeDrag:jo=!0,connectionRadius:Jo=20,isValidConnection:es,onError:ts,style:ns,id:ur,nodeDragThreshold:rs,...is},os)=>{const fn=ur||"1";return M.createElement("div",{...is,style:{...ns,...Ld},ref:os,className:le(["react-flow",i]),"data-testid":"rf__wrapper",id:ur},M.createElement(_o,null,M.createElement($d,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:S,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:C,onNodeDoubleClick:R,nodeTypes:s,edgeTypes:o,connectionLineType:N,connectionLineStyle:k,connectionLineComponent:z,connectionLineContainerStyle:q,selectionKeyCode:K,selectionOnDrag:X,selectionMode:W,deleteKeyCode:L,multiSelectionKeyCode:J,panActivationKeyCode:G,zoomActivationKeyCode:Q,onlyRenderVisibleElements:pe,selectNodesOnDrag:de,defaultViewport:Qe,translateExtent:Je,minZoom:je,maxZoom:Ae,preventScrolling:Pe,zoomOnScroll:tt,zoomOnPinch:mt,zoomOnDoubleClick:Le,panOnScroll:ie,panOnScrollSpeed:me,panOnScrollMode:He,panOnDrag:qe,onPaneClick:Ne,onPaneMouseEnter:be,onPaneMouseMove:gt,onPaneMouseLeave:un,onPaneScroll:yt,onPaneContextMenu:dn,onSelectionContextMenu:b,onSelectionStart:T,onSelectionEnd:I,onEdgeContextMenu:Ue,onEdgeDoubleClick:Co,onEdgeMouseEnter:To,onEdgeMouseMove:Do,onEdgeMouseLeave:Ro,onReconnect:$o??Mo,onReconnectStart:zo??Io,onReconnectEnd:Vo??ko,reconnectRadius:Fo??Po,defaultMarkerColor:et,noDragClassName:Lo,noWheelClassName:qo,noPanClassName:cr,elevateEdgesOnSelect:Zo,rfId:fn,disableKeyboardA11y:lr,nodeOrigin:O,nodeExtent:Be}),M.createElement(Mu,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:y,onClickConnectEnd:g,nodesDraggable:ne,nodesConnectable:ve,nodesFocusable:j,edgesFocusable:ae,edgesUpdatable:Fe,elementsSelectable:pt,elevateNodesOnSelect:Go,minZoom:je,maxZoom:Ae,nodeExtent:Be,onNodesChange:Bo,onEdgesChange:Ho,snapToGrid:he,snapGrid:ue,connectionMode:v,translateExtent:Je,connectOnClick:Ko,defaultEdgeOptions:Wo,fitView:Uo,fitViewOptions:Oo,onNodesDelete:P,onEdgesDelete:V,onNodeDragStart:$,onNodeDrag:F,onNodeDragStop:D,onSelectionDrag:f,onSelectionDragStart:B,onSelectionDragStop:_,noPanClassName:cr,nodeOrigin:O,rfId:fn,autoPanOnConnect:Qo,autoPanOnNodeDrag:jo,onError:ts,connectionRadius:Jo,isValidConnection:es,nodeDragThreshold:rs}),M.createElement(Du,{onSelectionChange:H}),ar,M.createElement(nu,{proOptions:Xo,position:Yo}),M.createElement(Vu,{rfId:fn,disableKeyboardA11y:lr})))});qd.displayName="ReactFlow";function Ao(e){return t=>{const[n,r]=E.useState(t),i=E.useCallback(s=>r(o=>e(s,o)),[]);return[n,r,i]}}const Qd=Ao(uo),jd=Ao(Zu);var xe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xe||(xe={}));function Ud({color:e,dimensions:t,lineWidth:n}){return M.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Od({color:e,radius:t}){return M.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Kd={[xe.Dots]:"#91919a",[xe.Lines]:"#eee",[xe.Cross]:"#e2e2e2"},Yd={[xe.Dots]:1,[xe.Lines]:1,[xe.Cross]:6},Xd=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function No({id:e,variant:t=xe.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:c}){const u=E.useRef(null),{transform:l,patternId:d}=te(Xd,oe),h=o||Kd[t],p=r||Yd[t],x=t===xe.Dots,m=t===xe.Cross,y=Array.isArray(n)?n:[n,n],g=[y[0]*l[2]||1,y[1]*l[2]||1],S=p*l[2],A=m?[S,S]:g,w=x?[S/s,S/s]:[A[0]/s,A[1]/s];return M.createElement("svg",{className:le(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},M.createElement("pattern",{id:d+e,x:l[0]%g[0],y:l[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},x?M.createElement(Od,{color:h,radius:S/s}):M.createElement(Ud,{dimensions:A,color:h,lineWidth:i})),M.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}No.displayName="Background";var Jd=E.memo(No);const ii=(e,t)=>{let n=0;return(...r)=>{const i=Date.now();if(i-n>=t)return n=i,e(...r)}},Wd=(e,t)=>{if(!e||!t||t.length<2)return e;const n=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(n,'<span class="highlight">$1</span>')},Nn=e=>{switch(e.toLowerCase()){case"boolean":return"#FF5252";case"integer":case"float":case"number":case"vector":case"vector2d":case"vector4":case"transform":return"#4FC3F7";case"string":case"name":case"text":return"#81C784";case"exec":return"#D83B3B";case"object":case"actor":case"component":return"#CE93D8";case"struct":return"#FFB74D";case"enum":return"#FFF176";case"array":case"set":case"map":return"#7986CB";default:return"#B0BEC5"}},Gd=(e,t)=>{const n=t==="dark-theme";switch(e.toLowerCase()){case"debug":return n?"#F56565":"#E53E3E";case"math":return n?"#4299E1":"#3182CE";case"string":return n?"#48BB78":"#38A169";case"utility":return n?"#ECC94B":"#D69E2E";case"array":return n?"#9F7AEA":"#805AD5";default:return n?"#6E8EAF":"#4A5568"}},ef=E.memo(({data:e,isConnectable:t})=>{const{node:n,detailed:r=!1,highlightTerm:i="",minimal:s=!1}=e,[o,a]=E.useState(null),c=E.useRef(null),{theme:u}=cs(),l=E.useMemo(()=>{if(i&&n.name)return{__html:Wd(n.name,i)}},[n.name,i]),d=E.useMemo(()=>({backgroundColor:Gd(n.category,u)}),[n.category,u]),h=E.useCallback(ii((m,y)=>{a({id:m,description:y})},50),[]),p=E.useCallback(ii(()=>{a(null)},50),[]);E.useMemo(()=>({background:"#ffffff",top:"14px",width:"12px",height:"12px",borderRadius:"2px"}),[]);const x=E.useMemo(()=>`blueprint-node ${r?"detailed":""} ${s?"minimal":""}`,[r,s]);return Z.jsxs("div",{className:x,ref:c,children:[Z.jsxs("div",{className:"blueprint-node-header node-header",style:d,children:[l?Z.jsx("span",{className:"blueprint-node-title",dangerouslySetInnerHTML:l}):Z.jsx("span",{className:"blueprint-node-title",children:n.name}),Z.jsx("span",{className:"blueprint-node-category",children:n.category})]}),Z.jsx("div",{className:"blueprint-node-content",children:r&&Z.jsx("div",{className:"blueprint-node-pins",children:Z.jsxs("div",{className:"inline-pins-container",children:[(n.inputs||[]).map((m,y)=>{const g=n.outputs&&n.outputs[y],S=E.useMemo(()=>({background:m.isExec?"#ffffff":Nn(m.type),width:m.isExec?"12px":"8px",height:m.isExec?"12px":"8px",borderRadius:m.isExec?"2px":"50%"}),[m.isExec,m.type]),A=g?E.useMemo(()=>({background:g.isExec?"#ffffff":Nn(g.type),width:g.isExec?"12px":"8px",height:g.isExec?"12px":"8px",borderRadius:g.isExec?"2px":"50%"}),[g.isExec,g.type]):null;return Z.jsxs("div",{className:"inline-pins-row",children:[Z.jsxs("div",{className:"blueprint-node-pin input-pin",onMouseEnter:()=>h(`input-${y}`,m.description),onMouseLeave:p,children:[Z.jsx(We,{type:"target",position:U.Left,id:`input-${y}`,style:S,isConnectable:t,className:m.isExec?"exec":""}),Z.jsxs("div",{className:"blueprint-node-pin-label",children:[Z.jsx("span",{className:"pin-name",title:m.name,children:m.name}),Z.jsx("span",{className:"pin-type",title:m.type,children:m.type})]})]}),g&&Z.jsxs("div",{className:"blueprint-node-pin output-pin",onMouseEnter:()=>h(`output-${y}`,g.description),onMouseLeave:p,children:[Z.jsxs("div",{className:"blueprint-node-pin-label",children:[Z.jsx("span",{className:"pin-name",title:g.name,children:g.name}),Z.jsx("span",{className:"pin-type",title:g.type,children:g.type})]}),Z.jsx(We,{type:"source",position:U.Right,id:`output-${y}`,style:A,isConnectable:t,className:g.isExec?"exec":""})]})]},`pin-row-${y}`)}),n.outputs&&n.inputs&&n.outputs.length>n.inputs.length&&n.outputs.slice(n.inputs.length).map((m,y)=>{const g=y+n.inputs.length,S=E.useMemo(()=>({background:m.isExec?"#ffffff":Nn(m.type),width:m.isExec?"12px":"8px",height:m.isExec?"12px":"8px",borderRadius:m.isExec?"2px":"50%"}),[m.isExec,m.type]);return Z.jsxs("div",{className:"inline-pins-row",children:[Z.jsx("div",{className:"blueprint-node-pin empty-input"}),Z.jsxs("div",{className:"blueprint-node-pin output-pin",onMouseEnter:()=>h(`output-${g}`,m.description),onMouseLeave:p,children:[Z.jsxs("div",{className:"blueprint-node-pin-label",children:[Z.jsx("span",{className:"pin-name",title:m.name,children:m.name}),Z.jsx("span",{className:"pin-type",title:m.type,children:m.type})]}),Z.jsx(We,{type:"source",position:U.Right,id:`output-${g}`,style:S,isConnectable:t,className:m.isExec?"exec":""})]})]},`extra-output-${y}`)})]})})}),o&&Z.jsx("div",{className:"pin-tooltip",style:{position:"absolute",top:(o.id.includes("input"),-30),left:o.id.includes("input")?30:"auto",right:o.id.includes("output")?30:"auto",opacity:1},children:o.description})]})}),tf=[{id:"debug",name:"Debug & Utilities",description:"Nodes for debugging and basic utility operations"},{id:"math",name:"Math & Calculations",description:"Mathematical operations and calculations"},{id:"string",name:"String Operations",description:"Text and string manipulation nodes"},{id:"utility",name:"Utility",description:"General purpose utility nodes"},{id:"array",name:"Array & Collection Operations",description:"Operations for working with arrays and collections"}],sr=[{id:"hello-world",name:"Hello World",category:"debug",shortDescription:'Prints "Hello, World!" to the output log',longDescription:'A simple test node that prints "Hello, World!" to the output log. Used to validate plugin architecture.',complexity:"simple",inputs:[{name:"Execute",type:"Exec",description:"Triggers the node execution",isExec:!0}],outputs:[{name:"Then",type:"Exec",description:"Executed after the message is printed",isExec:!0}],errorHandling:"Always succeeds, no validation required.",searchKeywords:["debug","print","log","hello","test"]},{id:"is-nearly-equal",name:"Is Nearly Equal (Float)",category:"math",shortDescription:"Checks if two floats are nearly equal within tolerance",longDescription:"Compares two float values with a tolerance to account for floating point precision errors. Addresses common issues when comparing floating-point numbers for equality.",complexity:"simple",inputs:[{name:"A",type:"Float",description:"First value to compare"},{name:"B",type:"Float",description:"Second value to compare"},{name:"ErrorTolerance",type:"Float",description:"Maximum allowed difference for considering the values as equal",defaultValue:"0.0000001"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the difference between A and B is less than or equal to ErrorTolerance"}],examples:[{title:"Compare calculated values",description:"Use to compare values that may have minor calculation differences.",code:`Math.Sin(1.0) -> Is Nearly Equal (A)
Math.Sin(1.0 + 2) -> Is Nearly Equal (B)
0.0000001 -> Is Nearly Equal (ErrorTolerance)`}],errorHandling:"Handles NaN and Infinity values appropriately.",performanceNotes:"Very efficient operation with minimal overhead.",searchKeywords:["float","compare","equal","tolerance","approximate","precision"]},{id:"is-nearly-zero",name:"Is Nearly Zero (Float)",category:"math",shortDescription:"Checks if value is approximately zero",longDescription:"Tests if a float value is close enough to zero within a specified tolerance. Useful for checking if calculations result in effectively zero values.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"Value to check if close to zero"},{name:"ErrorTolerance",type:"Float",description:'Maximum absolute value to consider as "nearly zero"',defaultValue:"0.0000001"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the absolute value is less than or equal to ErrorTolerance"}],examples:[{title:"Checking for small residuals",description:"When an iterative calculation should reach zero but might have small residual values.",code:"Calculate Residual -> Is Nearly Zero -> Branch"}],searchKeywords:["zero","float","epsilon","tolerance","math","calculation"]},{id:"degrees-to-radians",name:"Degrees To Radians",category:"math",shortDescription:"Convert angle from degrees to radians",longDescription:"Converts an angle value from degrees to radians. Useful for mathematical functions that require radian input.",complexity:"simple",inputs:[{name:"Degrees",type:"Float",description:"The angle in degrees"}],outputs:[{name:"Return Value",type:"Float",description:"The angle in radians"}],examples:[{title:"Convert user input to radians",description:"Use this node when user inputs angles in degrees but calculations require radians.",code:`90.0 -> Degrees To Radians -> Sin
// Result will be 1.0 (sin of 90 degrees)`}],searchKeywords:["conversion","angle","degrees","radians","math","trigonometry"]},{id:"radians-to-degrees",name:"Radians To Degrees",category:"math",shortDescription:"Convert angle from radians to degrees",longDescription:"Converts an angle value from radians to degrees. Useful for displaying radian values in a more human-readable format.",complexity:"simple",inputs:[{name:"Radians",type:"Float",description:"The angle in radians"}],outputs:[{name:"Return Value",type:"Float",description:"The angle in degrees"}],examples:[{title:"Display result in degrees",description:"Convert math calculation results from radians to degrees for display.",code:"Math.Atan2(Y, X) -> Radians To Degrees -> Display Angle"}],searchKeywords:["conversion","angle","radians","degrees","math","trigonometry"]},{id:"random-vector-in-cone-degrees",name:"Random Vector in Cone (Degrees)",category:"math",shortDescription:"Generate random vector within cone",longDescription:"Creates a random direction vector within a cone angle. Useful for spawning particles, creating spread patterns, or simulating inaccuracy.",complexity:"moderate",inputs:[{name:"Direction",type:"Vector",description:"Base direction of the cone"},{name:"ConeHalfAngleDegrees",type:"Float",description:"Half-angle of cone in degrees"},{name:"bIsSquished",type:"Boolean",description:"If true, creates a non-uniform cone with different angles in Y and Z",defaultValue:"false"},{name:"VerticalConeHalfAngleDegrees",type:"Float",description:"Half-angle of cone in vertical direction (only used if bIsSquished is true)",defaultValue:"45.0"}],outputs:[{name:"Return Value",type:"Vector",description:"Random normalized vector within the specified cone"}],examples:[{title:"Bullet spread simulation",description:"Create a random spread for weapon fire.",code:"Get Forward Vector -> Random Vector in Cone (Degrees) -> Spawn Projectile"}],errorHandling:"Validates Direction is not a zero vector, and normalizes it if needed.",searchKeywords:["random","vector","cone","direction","spread","angle","degrees"]},{id:"random-vector-in-cone-radians",name:"Random Vector in Cone (Radians)",category:"math",shortDescription:"Generate random vector within cone using radians",longDescription:"Creates a random direction vector within a cone angle using radians. Alternative version of the Random Vector in Cone node that uses radians instead of degrees.",complexity:"moderate",inputs:[{name:"Direction",type:"Vector",description:"Base direction of the cone"},{name:"ConeHalfAngleRadians",type:"Float",description:"Half-angle of cone in radians"},{name:"bIsSquished",type:"Boolean",description:"If true, creates a non-uniform cone with different angles in Y and Z",defaultValue:"false"},{name:"VerticalConeHalfAngleRadians",type:"Float",description:"Half-angle of cone in vertical direction (only used if bIsSquished is true)",defaultValue:"0.7853982"}],outputs:[{name:"Return Value",type:"Vector",description:"Random normalized vector within the specified cone"}],examples:[{title:"Bullet spread simulation",description:"Create a random spread for weapon fire using radians.",code:"Get Forward Vector -> Random Vector in Cone (Radians) -> Spawn Projectile"}],errorHandling:"Validates Direction is not a zero vector, and normalizes it if needed.",searchKeywords:["random","vector","cone","direction","spread","angle","radians"]},{id:"round-to-nearest-increment",name:"Round To Nearest (Increment)",category:"math",shortDescription:"Rounds a number to the nearest multiple of a specified increment",longDescription:"Rounds a floating-point value to the nearest multiple of a specified increment. Useful for snapping values to grids or intervals in level design, UI positioning, or quantized values.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to round"},{name:"Increment",type:"Float",description:"The increment to round to",defaultValue:"1.0"}],outputs:[{name:"Return Value",type:"Float",description:"The rounded value"}],examples:[{title:"Snap to grid",description:"Round a world position to the nearest 5 units.",code:"Get Actor Location -> Round To Nearest (Increment=5.0) -> Set Actor Location"},{title:"Price rounding",description:"Round a calculated price to nearest $0.25.",code:`12.73 -> Round To Nearest (Increment=0.25) -> Display Price
// Result will be 12.75`}],errorHandling:"Validates that Increment is not zero. Returns the input value if Increment is invalid.",searchKeywords:["round","increment","snap","grid","quantize","multiple"]},{id:"round-away-from-zero",name:"Round Away From Zero",category:"math",shortDescription:"Rounds away from zero instead of to nearest even",longDescription:"Rounds a floating-point value away from zero. This differs from standard rounding which typically rounds to the nearest even number for halfway cases. This node always rounds outward from zero for consistent behavior.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to round"}],outputs:[{name:"Return Value",type:"Float",description:"The rounded value"}],examples:[{title:"Consistent rounding",description:"Round values away from zero consistently.",code:`-1.5 -> Round Away From Zero -> Print String
// Result will be -2
1.5 -> Round Away From Zero -> Print String
// Result will be 2`}],searchKeywords:["round","away","zero","consistent","ceiling","floor"]},{id:"is-prime-number",name:"Is Prime Number",category:"math",shortDescription:"Checks if an integer is a prime number",longDescription:"Determines if a given integer is a prime number (divisible only by 1 and itself). Useful for procedural generation algorithms, cryptography, or puzzle gameplay mechanics.",complexity:"moderate",inputs:[{name:"Value",type:"Integer",description:"The integer to check"}],outputs:[{name:"Return Value",type:"Boolean",description:"True if the number is prime"}],examples:[{title:"Procedural generation",description:"Use prime checking to create unique patterns.",code:`Get Current Cell Index -> Is Prime Number -> Branch
// Different behavior for prime-indexed cells`}],errorHandling:"Numbers less than 2 are never prime. Negative numbers are converted to their absolute value.",performanceNotes:"Uses optimized algorithm for checking primality, but can be slow for very large numbers.",searchKeywords:["prime","number","integer","divisible","math","check"]},{id:"greatest-common-divisor",name:"Greatest Common Divisor",category:"math",shortDescription:"Calculates the GCD of an array of integers",longDescription:"Finds the largest positive integer that divides all the input integers without a remainder. Useful for simplifying fractions, finding common factors, and various mathematical algorithms.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Integers",description:"Array of integers to find the GCD of"}],outputs:[{name:"Return Value",type:"Integer",description:"The GCD of all values in the array, or 0 if the array is empty"}],examples:[{title:"Simplify fractions",description:"Find the simplest form of a fraction.",code:"GCD of [Numerator, Denominator] -> Divide Both Values"}],errorHandling:"Returns 0 if the array is empty. Uses absolute values for calculation (ignores signs).",searchKeywords:["gcd","greatest","common","divisor","math","factor"]},{id:"least-common-multiple",name:"Least Common Multiple",category:"math",shortDescription:"Calculates the LCM of an array of integers",longDescription:"Finds the smallest positive integer that is divisible by all the input integers. Useful for finding common periods, synchronizing repeating events, and various mathematical applications.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Integers",description:"Array of integers to find the LCM of"}],outputs:[{name:"Return Value",type:"Integer",description:"The LCM of all values in the array, or 0 if the array is empty or contains 0"}],examples:[{title:"Find cycle repetition",description:"Calculate when two repeating events will coincide.",code:"LCM of [Cycle1Duration, Cycle2Duration] -> Next Synchronization Time"}],errorHandling:"Returns 0 if the array is empty. Uses absolute values for calculation (ignores signs).",performanceNotes:"Uses the GCD to efficiently calculate LCM and avoids integer overflow where possible.",searchKeywords:["lcm","least","common","multiple","math","cycle"]},{id:"angle-between-vectors-signed",name:"Angle Between Vectors (Signed)",category:"math",shortDescription:"Calculates the signed angle between two vectors in a 2D plane",longDescription:"Computes the signed angle between two vectors, providing information about whether the rotation is clockwise or counter-clockwise. This differs from the standard angle calculation which only returns the unsigned (absolute) angle.",complexity:"moderate",inputs:[{name:"From",type:"Vector",description:"Starting vector"},{name:"To",type:"Vector",description:"Target vector"},{name:"AxisZ",type:"Vector",description:"Optional Z axis for the 2D plane",defaultValue:"(0,0,1)"}],outputs:[{name:"Return Value",type:"Float",description:"Signed angle in degrees between the vectors (-180 to 180)"}],examples:[{title:"Character steering",description:"Determine whether to turn left or right to face a target.",code:`Get Forward Vector -> Angle Between Vectors (Signed) (From)
Get Direction to Target -> Angle Between Vectors (Signed) (To)
// Negative angle means turn left, positive means turn right`}],errorHandling:"Returns 0 if either vector is too small (close to zero). Normalizes input vectors automatically.",searchKeywords:["angle","vector","signed","direction","rotation","clockwise"]},{id:"array-average-float",name:"Average (Float Array)",category:"math",shortDescription:"Calculates the average (arithmetic mean) of an array of float values",longDescription:"Computes the arithmetic mean of an array of float values. Useful for statistical operations and data analysis.",complexity:"simple",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The arithmetic mean of the values"}],examples:[{title:"Smoothed sensor reading",description:"Average multiple sensor readings to reduce noise.",code:"Recent Temperature Readings -> Average (Float Array) -> Display Temperature"}],errorHandling:"Returns 0 if the array is empty. Ignores non-numeric values in mixed arrays.",searchKeywords:["average","mean","arithmetic","statistics","array","float"]},{id:"array-average-vector",name:"Average (Vector Array)",category:"math",shortDescription:"Calculates the average (arithmetic mean) of an array of vectors",longDescription:"Computes the arithmetic mean vector of an array of vectors. Calculates a single vector with the average of each component.",complexity:"simple",inputs:[{name:"Vectors",type:"Array of Vectors",description:"Array of vectors"}],outputs:[{name:"Return Value",type:"Vector",description:"The arithmetic mean vector"}],examples:[{title:"Calculate center position",description:"Find the center point of multiple actors.",code:"Get Multiple Actor Locations -> Average (Vector Array) -> Spawn Effect at Center"}],errorHandling:"Returns Zero Vector if the array is empty.",searchKeywords:["average","mean","arithmetic","statistics","array","vector","center"]},{id:"standard-deviation",name:"Standard Deviation",category:"math",shortDescription:"Calculates the standard deviation of a float array",longDescription:"Computes the standard deviation of a set of numeric values, measuring the amount of variation or dispersion from the average. Useful for statistical analysis, data clustering, and measuring data spread.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The standard deviation of the values"}],examples:[{title:"Detect data outliers",description:"Identify values that are outside the normal range.",code:`Data Points -> Standard Deviation -> Calculate Threshold
Data Points -> For Each -> Branch (Value > Threshold)`}],errorHandling:"Returns 0 if the array has fewer than 2 elements. Ignores non-numeric values.",performanceNotes:"Requires two passes through the data (one for mean, one for squared differences).",searchKeywords:["standard","deviation","statistics","variance","spread","distribution"]},{id:"variance",name:"Variance",category:"math",shortDescription:"Calculates the variance of a float array",longDescription:"Computes the variance of a set of numeric values, measuring how far the values are spread out from their average. The variance is the square of the standard deviation, useful for statistical analysis.",complexity:"moderate",inputs:[{name:"Values",type:"Array of Floats",description:"Array of float values"}],outputs:[{name:"Return Value",type:"Float",description:"The variance of the values"}],examples:[{title:"Compare data sets",description:"Compare the variability of different distributions.",code:`Dataset A -> Variance -> Compare (A)
Dataset B -> Variance -> Compare (B)`}],errorHandling:"Returns 0 if the array has fewer than 2 elements. Ignores non-numeric values.",performanceNotes:"Requires two passes through the data (one for mean, one for squared differences).",searchKeywords:["variance","statistics","spread","distribution","squared","deviation"]},{id:"logarithm-base-n",name:"Logarithm (Base N)",category:"math",shortDescription:"Logarithm to an arbitrary base",longDescription:"Calculates the logarithm of a value using any specified base. This extends beyond the standard natural logarithm (base e) and base-10 logarithm functions built into the engine.",complexity:"simple",inputs:[{name:"Value",type:"Float",description:"The value to calculate the logarithm of (must be positive)"},{name:"Base",type:"Float",description:"The logarithm base (must be positive and not 1)",defaultValue:"10.0"}],outputs:[{name:"Return Value",type:"Float",description:"The logarithm of Value with the specified Base"}],examples:[{title:"Custom logarithmic scaling",description:"Scale values using a custom logarithmic function.",code:"Raw Value -> Logarithm (Base N) (Base=2) -> Scale Result"}],errorHandling:"Validates Value is positive and Base is valid (positive and not 1). Returns 0 for invalid inputs.",searchKeywords:["logarithm","log","base","math","exponent","scale"]},{id:"clamp-angle-radians",name:"Clamp Angle (Radians)",category:"math",shortDescription:"Clamps an angle to a specific range",longDescription:"Normalizes an angle in radians to a specified range, such as 0 to 2 or - to . Useful for angle calculations, rotations, and ensuring consistent angle formats.",complexity:"simple",inputs:[{name:"Angle",type:"Float",description:"The angle in radians to clamp"},{name:"MinAngle",type:"Float",description:"Minimum angle of the range",defaultValue:"0.0"},{name:"MaxAngle",type:"Float",description:"Maximum angle of the range",defaultValue:"6.28318"}],outputs:[{name:"ClampedAngle",type:"Float",description:"The angle clamped to the specified range"}],examples:[{title:"Normalize rotation",description:"Ensure a rotation angle stays within the - to  range.",code:"Current Rotation Radians -> Clamp Angle (Radians) (Min=-3.14159, Max=3.14159) -> Set Rotation"}],errorHandling:"Validates that MinAngle is less than MaxAngle and that the range is not more than a full circle (2).",searchKeywords:["angle","clamp","normalize","radians","rotation","range"]},{id:"to-title-case",name:"To Title Case",category:"string",shortDescription:"Converts a string to title case",longDescription:"Transforms a string to title case format where the first letter of each word is capitalized. Useful for formatting titles, names, and other text that requires title capitalization.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to convert"}],outputs:[{name:"Return Value",type:"String",description:"The title-cased string"}],examples:[{title:"Format heading text",description:"Convert a string to proper title case for UI elements.",code:`"the quick brown fox" -> To Title Case -> Set Text
// Result will be "The Quick Brown Fox"`}],searchKeywords:["title","case","string","capitalize","format","text"]},{id:"to-sentence-case",name:"To Sentence Case",category:"string",shortDescription:"Converts a string to sentence case",longDescription:"Transforms a string to sentence case format where the first letter of each sentence is capitalized. Useful for formatting body text, paragraphs, and other prose-style content.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to convert"}],outputs:[{name:"Return Value",type:"String",description:"The sentence-cased string"}],examples:[{title:"Format paragraph text",description:"Convert text to proper sentence case for dialog or descriptions.",code:`"hello world. this is a test." -> To Sentence Case -> Set Description
// Result will be "Hello world. This is a test."`}],searchKeywords:["sentence","case","string","capitalize","format","text"]},{id:"invert-case",name:"Invert Case",category:"string",shortDescription:"Inverts the case of each letter in a string",longDescription:"Reverses the case of each letter in a string, making uppercase letters lowercase and lowercase letters uppercase. Useful for text effects, stylization, and certain text processing operations.",complexity:"simple",inputs:[{name:"InString",type:"String",description:"The string to invert the case of"}],outputs:[{name:"Return Value",type:"String",description:"The case-inverted string"}],examples:[{title:"Create visual effect",description:"Create alternating case for visual emphasis.",code:`"Hello World" -> Invert Case -> Set Text
// Result will be "hELLO wORLD"`}],searchKeywords:["invert","case","string","flip","uppercase","lowercase"]},{id:"string-similarity",name:"String Similarity",category:"string",shortDescription:"Returns a percentage representing the similarity between two strings",longDescription:"Calculates how similar two strings are and returns a percentage score. Uses the Levenshtein distance metric to determine the number of edits needed to transform one string into another. Useful for fuzzy matching, typo correction, and finding similar text.",complexity:"moderate",inputs:[{name:"StringA",type:"String",description:"First string to compare"},{name:"StringB",type:"String",description:"Second string to compare"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the comparison should be case-sensitive",defaultValue:"false"}],outputs:[{name:"Return Value",type:"Float",description:"Similarity percentage (0-100)"}],examples:[{title:"Check for typos",description:"Verify if user input matches expected value with tolerance for typos.",code:`User Input -> String Similarity -> Branch (Similarity > 80)
// Accept input if it's at least 80% similar`}],performanceNotes:"For very long strings, this calculation can be expensive.",searchKeywords:["similarity","compare","string","percentage","levenshtein","fuzzy"]},{id:"count-occurrences",name:"Count Occurrences",category:"string",shortDescription:"Counts the number of times a substring appears within a larger string",longDescription:"Counts how many times a specific substring appears within a source string. Useful for text analysis, finding word frequency, or detecting patterns in text data.",complexity:"simple",inputs:[{name:"SourceString",type:"String",description:"The string to search within"},{name:"Substring",type:"String",description:"The substring to search for"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the search should be case-sensitive",defaultValue:"false"}],outputs:[{name:"Return Value",type:"Integer",description:"The number of occurrences"}],examples:[{title:"Word frequency analysis",description:"Count how many times a specific word appears in a text.",code:"Long Text -> Count Occurrences (Substring='the') -> Display Count"}],errorHandling:"Returns 0 if either string is empty or if the substring is not found.",searchKeywords:["count","substring","occurrences","find","frequency","text"]},{id:"string-fuzzy-search",name:"Fuzzy String Search",category:"string",shortDescription:"Performs fuzzy matching between strings",longDescription:"Searches for close matches to a term within a collection of candidate strings. Ranks results by similarity, allowing for typos and minor variations. Useful for search interfaces, auto-completion, and handling user input with errors.",complexity:"complex",inputs:[{name:"SearchTerm",type:"String",description:"The term to search for"},{name:"Candidates",type:"Array of Strings",description:"Array of strings to search within"},{name:"MinimumScore",type:"Float",description:"Minimum similarity score (0-100) for a result to be included",defaultValue:"50"},{name:"MaxResults",type:"Integer",description:"Maximum number of results to return (0 for all matches)",defaultValue:"10"},{name:"bCaseSensitive",type:"Boolean",description:"Whether the search should be case-sensitive",defaultValue:"false"},{name:"bExactMatchOnly",type:"Boolean",description:"If true, only returns exact matches (ignores MinimumScore)",defaultValue:"false"}],outputs:[{name:"ResultStrings",type:"Array of Strings",description:"Array of matching strings, sorted by similarity (best matches first)"},{name:"ResultIndices",type:"Array of Integers",description:"Indices of matching strings in the original Candidates array"}],examples:[{title:"Auto-complete implementation",description:"Suggest possible completions as the user types.",code:"User Input -> Fuzzy String Search -> Display Suggestions"}],performanceNotes:"Can be computationally expensive with large candidate arrays. Consider filtering candidates first for better performance.",searchKeywords:["fuzzy","search","match","similar","typo","autocomplete"]},{id:"timer-loop",name:"Timer Loop",category:"utility",shortDescription:"Creates a timed loop with configurable delay",longDescription:"Creates a timer that executes at specified intervals. The node provides full flow control with separate pins for setup, looping, breaking, and completion. Enhances the standard Delay node with optional looping functionality.",complexity:"moderate",inputs:[{name:"Exec",type:"Exec",description:"Execution input pin",isExec:!0},{name:"Duration",type:"Float",description:"Time in seconds between iterations",defaultValue:"1.0"},{name:"Loop",type:"Boolean",description:"Whether to continue looping after the first iteration",defaultValue:"true"},{name:"Break",type:"Exec",description:"Signal to break out of the loop",defaultValue:"false",isExec:!0}],outputs:[{name:"Before",type:"Exec",description:"Fires once at the beginning without delay",isExec:!0},{name:"Loop Body",type:"Exec",description:"Fires as long as the loop condition is true, after each delay duration",isExec:!0},{name:"On Break",type:"Exec",description:"Fires once when the Break input is used",isExec:!0},{name:"Continue",type:"Exec",description:"Fires once when loop condition becomes false",isExec:!0},{name:"Index",type:"Integer",description:"Current iteration index (0-based)"}],examples:[{title:"Countdown sequence",description:"Create a countdown timer for a game start sequence.",code:"Start Countdown -> Timer Loop -> Display Count -> Play Start Sound"}],errorHandling:"Validates that Duration is non-negative and Iterations is at least 1, with warnings for extreme values.",performanceNotes:"Timer operations use the global timer manager and are efficient for reasonable numbers of timers. For high-frequency operations (duration < 0.1), consider using a tick event instead.",searchKeywords:["timer","count","delay","iteration","countdown","wait","loop"]},{id:"timer-n",name:"Timer N",category:"utility",shortDescription:"Creates a timed loop with a fixed number of iterations",longDescription:"Creates a timer that executes at specified intervals for a fixed number of iterations. Similar to Timer Loop, but with a predefined number of iterations. Useful for countdown timers, step sequences, and other operations that need to execute a specific number of times.",complexity:"moderate",inputs:[{name:"Exec",type:"Exec",description:"Execution input pin",isExec:!0},{name:"Duration",type:"Float",description:"Time in seconds between iterations",defaultValue:"1.0"},{name:"Iterations",type:"Integer",description:"Number of iterations to perform",defaultValue:"5"},{name:"Break",type:"Exec",description:"Signal to break out of the loop",defaultValue:"false",isExec:!0}],outputs:[{name:"Before",type:"Exec",description:"Fires once at the beginning without delay",isExec:!0},{name:"Loop Body",type:"Exec",description:"Fires after each delay duration, up to Iterations times",isExec:!0},{name:"On Break",type:"Exec",description:"Fires once when the Break input is used",isExec:!0},{name:"Complete",type:"Exec",description:"Fires once when all iterations are completed",isExec:!0},{name:"Index",type:"Integer",description:"Current iteration index (0-based)"}],examples:[{title:"Countdown sequence",description:"Create a countdown timer for a game start sequence.",code:`Start Countdown -> Timer N (Iterations=3) -> Display Count -> Play Start Sound
// Will countdown 3, 2, 1 with delay between each`}],errorHandling:"Validates that Duration is non-negative and Iterations is at least 1, with warnings for extreme values.",performanceNotes:"Same as Timer Loop - use with caution for very high-frequency or long-running operations.",searchKeywords:["timer","count","delay","iteration","countdown","wait","fixed"]},{id:"array-unique",name:"Array Unique",category:"array",shortDescription:"Removes duplicate entries from an array",longDescription:"Creates a new array containing only the unique elements from the input array, removing all duplicates. Works with primitive types, objects, and structs based on value equality.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to remove duplicates from"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing only the unique elements"}],examples:[{title:"Filter collected items",description:"Remove duplicate items from player inventory.",code:"Player Inventory -> Array Unique -> Update Inventory"}],performanceNotes:"Performance scales with the array size. For very large arrays, this operation may be expensive.",searchKeywords:["array","unique","duplicate","remove","filter","distinct"]},{id:"array-union",name:"Array Union",category:"array",shortDescription:"Returns a new array containing all unique elements from two input arrays",longDescription:"Combines two arrays and removes any duplicates, returning a new array with all unique elements from both input arrays. Useful for merging collections while ensuring no duplicates exist.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing all unique elements from both arrays"}],examples:[{title:"Merge item collections",description:"Combine two inventories without duplicates.",code:`Player Inventory -> Array Union (A)
Chest Contents -> Array Union (B) -> Combined Unique Items`}],performanceNotes:"For large arrays, this operation may be expensive as it needs to check for duplicates.",searchKeywords:["array","union","combine","merge","unique","set"]},{id:"array-intersection",name:"Array Intersection",category:"array",shortDescription:"Returns a new array containing only elements present in both input arrays",longDescription:"Creates a new array containing only the elements that exist in both input arrays. Useful for finding common items between collections or implementing set-based operations.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing only elements present in both arrays"}],examples:[{title:"Find common requirements",description:"Determine which crafting materials are needed for two different recipes.",code:`Recipe1 Requirements -> Array Intersection (A)
Recipe2 Requirements -> Array Intersection (B) -> Common Materials`}],performanceNotes:"Performance depends on the size of both arrays. Optimized to use the smaller array for lookups.",searchKeywords:["array","intersection","common","both","filter","set"]},{id:"array-difference",name:"Array Difference (A - B)",category:"array",shortDescription:"Returns a new array containing elements in array A but not in array B",longDescription:"Creates a new array with elements that are present in the first array but not in the second array. Useful for finding the unique elements in one collection compared to another.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"Source array"},{name:"ArrayB",type:"Array",description:"Array to subtract"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing elements in A but not in B"}],examples:[{title:"Find missing items",description:"Determine which items from a required list are still missing.",code:`Required Items -> Array Difference (A)
Collected Items -> Array Difference (B) -> Missing Items`}],performanceNotes:"Performance depends on the size of both arrays.",searchKeywords:["array","difference","subtract","exclude","filter","set"]},{id:"array-symmetric-difference",name:"Array Symmetric Difference",category:"array",shortDescription:"Returns elements that are in either array A or B, but not both",longDescription:"Creates a new array containing elements that are unique to each input array, excluding common elements. This is equivalent to the union of A-B and B-A. Useful for finding the unique differences between two collections.",complexity:"moderate",inputs:[{name:"ArrayA",type:"Array",description:"First input array"},{name:"ArrayB",type:"Array",description:"Second input array"}],outputs:[{name:"Return Value",type:"Array",description:"A new array containing elements in either A or B, but not both"}],examples:[{title:"Find inventory changes",description:"Determine what items changed between two inventory states.",code:`Previous Inventory -> Array Symmetric Difference (A)
Current Inventory -> Array Symmetric Difference (B) -> Changed Items`}],performanceNotes:"More computationally expensive than basic difference or intersection operations.",searchKeywords:["array","symmetric","difference","exclusive","unique","xor"]},{id:"shuffle-array",name:"Shuffle Array (Seedable)",category:"array",shortDescription:"Shuffles the elements of an array randomly",longDescription:"Randomizes the order of elements in an array with an optional seed for reproducibility. The seed allows you to generate the same shuffle pattern multiple times, which is useful for deterministic randomization in games.",complexity:"simple",inputs:[{name:"TargetArray",type:"Array",description:"The array to shuffle"},{name:"UseRandomSeed",type:"Boolean",description:"Whether to use the provided seed",defaultValue:"false"},{name:"Seed",type:"Integer",description:"Random seed value for reproducible shuffling",defaultValue:"0"}],outputs:[{name:"Return Value",type:"Array",description:"A new shuffled array"}],examples:[{title:"Card deck shuffling",description:"Shuffle a deck of cards with reproducible results.",code:"Card Deck -> Shuffle Array (UseRandomSeed=true, Seed=GameSeed) -> Shuffled Deck"}],performanceNotes:"Uses an efficient Fisher-Yates shuffle algorithm with O(n) complexity.",searchKeywords:["array","shuffle","random","seed","order","randomize"]},{id:"array-insert-multiple",name:"Array Insert Multiple at Index",category:"array",shortDescription:"Inserts multiple elements into an array at a specific index",longDescription:"Adds multiple elements into an array at a specified position. This is more efficient than inserting elements one at a time, especially for large arrays or when inserting many elements.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to modify"},{name:"NewItems",type:"Array",description:"Array of elements to insert"},{name:"Index",type:"Integer",description:"Index at which to insert the new elements",defaultValue:"0"}],outputs:[{name:"Return Value",type:"Array",description:"The modified array with inserted elements"}],examples:[{title:"Insert quest chain",description:"Add a sequence of quests at a specific point in the player's quest log.",code:"Player Quests -> Array Insert Multiple (NewItems=NewQuestChain, Index=3) -> Update Quest Log"}],errorHandling:"Validates that Index is within bounds of the array. If Index equals the array length, items are appended.",searchKeywords:["array","insert","multiple","add","batch","index"]},{id:"array-remove-range",name:"Array Remove Range",category:"array",shortDescription:"Removes a range of elements from an array based on start and end indices",longDescription:"Removes a specified number of consecutive elements from an array starting at a given index. More efficient than removing elements one by one, especially for large arrays.",complexity:"moderate",inputs:[{name:"TargetArray",type:"Array",description:"The array to modify"},{name:"StartIndex",type:"Integer",description:"Index of the first element to remove",defaultValue:"0"},{name:"Count",type:"Integer",description:"Number of elements to remove",defaultValue:"1"}],outputs:[{name:"Return Value",type:"Array",description:"The modified array with elements removed"}],examples:[{title:"Remove completed quest section",description:"Remove a group of completed quests from the quest log.",code:"Quest Log -> Array Remove Range (StartIndex=5, Count=3) -> Update Quest Log"}],errorHandling:"Validates that StartIndex is within bounds and Count is positive. If the range extends beyond the array, it will be capped at the array bounds.",searchKeywords:["array","remove","range","delete","slice","batch"]},{id:"dictionary-to-array",name:"Dictionary to Array",category:"array",shortDescription:"Converts a dictionary/map to key and value arrays",longDescription:"Splits a dictionary or map data structure into separate arrays for keys and values. Useful for processing dictionary data with array operations or visualizing dictionary contents.",complexity:"simple",inputs:[{name:"TargetMap",type:"Map",description:"The map to convert"}],outputs:[{name:"Keys",type:"Array",description:"Array containing all the keys from the map"},{name:"Values",type:"Array",description:"Array containing all the values from the map"}],examples:[{title:"Display player stats",description:"Extract player statistics from a map for UI display.",code:"Player Stats Map -> Dictionary to Array -> Create UI List from Keys and Values"}],performanceNotes:"Linear time complexity, proportional to the size of the dictionary.",searchKeywords:["dictionary","map","array","keys","values","convert"]},{id:"array-to-dictionary",name:"Array to Dictionary",category:"array",shortDescription:"Converts key and value arrays into a dictionary/map",longDescription:"Creates a dictionary or map data structure from separate arrays of keys and values. The keys and values are paired by index - the first key is paired with the first value, and so on.",complexity:"simple",inputs:[{name:"Keys",type:"Array",description:"Array containing the keys"},{name:"Values",type:"Array",description:"Array containing the values"},{name:"HandleDuplicateKeys",type:"Enum (Skip, Overwrite, Error)",description:"How to handle duplicate keys",defaultValue:"Overwrite"}],outputs:[{name:"Result",type:"Map",description:"A new map with keys and values from the input arrays"},{name:"Success",type:"Boolean",description:"Whether the operation was successful"}],examples:[{title:"Create configuration map",description:"Convert two arrays of settings into a configuration map.",code:`Setting Names -> Array to Dictionary (Keys)
Setting Values -> Array to Dictionary (Values) -> Config Map`}],errorHandling:"If the arrays have different lengths, only pairs up to the shorter array's length are processed. If duplicate keys are found, behavior depends on the HandleDuplicateKeys setting.",searchKeywords:["array","dictionary","map","convert","keys","values"]}];function nf(e){return sr.filter(t=>t.category===e)}function rf(e){if(e)return sr.find(t=>t.id===e)}function of(e){if(!e||e.trim()==="")return[];const t=e.toLowerCase();return sr.filter(n=>!!(n.name.toLowerCase().includes(t)||n.shortDescription.toLowerCase().includes(t)||n.searchKeywords.some(r=>r.toLowerCase().includes(t))))}export{ef as B,$e as C,qd as R,Jd as a,rf as b,jd as c,sr as d,nf as g,tf as n,of as s,Qd as u};
